<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><title>Blog</title><meta name="next-head-count" content="3"/><link rel="preload" href="/_next/static/css/80a95484ea2876e6.css" as="style"/><link rel="stylesheet" href="/_next/static/css/80a95484ea2876e6.css" data-n-g=""/><link rel="preload" href="/_next/static/css/fd0966e4f29e8168.css" as="style"/><link rel="stylesheet" href="/_next/static/css/fd0966e4f29e8168.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/_next/static/chunks/webpack-ee7e63bc15b31913.js" defer=""></script><script src="/_next/static/chunks/framework-2c79e2a64abdb08b.js" defer=""></script><script src="/_next/static/chunks/main-7477d36a73a3487c.js" defer=""></script><script src="/_next/static/chunks/pages/_app-d15f243f6b85624f.js" defer=""></script><script src="/_next/static/chunks/pages/blog-74cb8199f793e929.js" defer=""></script><script src="/_next/static/MRl_9JcFNETdeZDdTz9TL/_buildManifest.js" defer=""></script><script src="/_next/static/MRl_9JcFNETdeZDdTz9TL/_ssgManifest.js" defer=""></script></head><body><div id="__next"><div class="layout_main-container__jR90l"><main class="layout_main__E22hH"><div style="width:15em"><nav class="sidebar_nav__EFmKd"><div class="Avatar_container__egCID"><div class="Avatar_image-container__9WrGh"><img src="/images/avatar.png" alt="mingjianglong" class="Avatar_avatar__oORu6"/><h2>龙江</h2><h3 style="font-weight:normal;padding-top:.6em;color:grey">Jiang Long</h3><h4 style="padding-top:1.3em">等风也等你~</h4><span class="Avatar_my-face__hbhE_">ღゝ◡╹)ノ♡</span></div><div></div></div><a style="color:black" href="/">开心☺</a><a style="color:red" href="/blog">Blog</a><a style="color:black" href="/archive">归档</a><a style="color:black" href="/resume">简介</a></nav></div><div style="flex:1;height:100vh;display:flex;flex-direction:column;overflow-y:hidden"><div class="SearchBar_search-bar-container__py15g"><input class="SearchBar_search-input___pYqj" placeholder="输入标题/简述/标签进行搜索"/></div><div style="flex:1;overflow-y:scroll"><div class="BlogCard_card__ieja8"><h4>算法-接雨水</h4><p class="BlogCard_desc__SLlJ3">算法-接雨水</p><div class="BlogCard_tag-container__U0v0s"><span class="Tag_tag__XHvaX" style="margin-left:.1em">算法</span></div></div><div class="BlogCard_card__ieja8"><h4>禁用form默认事件</h4><p class="BlogCard_desc__SLlJ3">禁用form表单enter事件</p><div class="BlogCard_tag-container__U0v0s"><span class="Tag_tag__XHvaX" style="margin-left:.1em">html</span><span class="Tag_tag__XHvaX" style="margin-left:.1em">默认事件</span></div></div><div class="BlogCard_card__ieja8"><h4>友宝支付宝扫码支付</h4><p class="BlogCard_desc__SLlJ3">公司需要在现有售货机上需要在售货机支付宝扫码支付上使用企业福利钱包</p><div class="BlogCard_tag-container__U0v0s"><span class="Tag_tag__XHvaX" style="margin-left:.1em">支付</span></div></div><div class="BlogCard_card__ieja8"><h4>首屏加载</h4><p class="BlogCard_desc__SLlJ3">首屏打开速度</p><div class="BlogCard_tag-container__U0v0s"><span class="Tag_tag__XHvaX" style="margin-left:.1em">首屏</span><span class="Tag_tag__XHvaX" style="margin-left:.1em">优化</span></div></div><div class="BlogCard_card__ieja8"><h4>友宝项目架构</h4><p class="BlogCard_desc__SLlJ3">简单学习一下友宝的前端项目架构</p><div class="BlogCard_tag-container__U0v0s"><span class="Tag_tag__XHvaX" style="margin-left:.1em">架构</span></div></div><div class="BlogCard_card__ieja8"><h4>快速排序</h4><p class="BlogCard_desc__SLlJ3">快速排序</p><div class="BlogCard_tag-container__U0v0s"><span class="Tag_tag__XHvaX" style="margin-left:.1em">算法</span><span class="Tag_tag__XHvaX" style="margin-left:.1em">排序</span></div></div><div class="BlogCard_card__ieja8"><h4>动态规划</h4><p class="BlogCard_desc__SLlJ3">动态规划（Dynamic Programming）解决一些具有重叠子问题性质的问题。动态规划通常用于优化递归算法，通过将中间结果存储起来，避免重复计算同一个子问题</p><div class="BlogCard_tag-container__U0v0s"><span class="Tag_tag__XHvaX" style="margin-left:.1em">算法</span><span class="Tag_tag__XHvaX" style="margin-left:.1em">动态规划</span></div></div><div class="BlogCard_card__ieja8"><h4>友宝环境地址记录</h4><p class="BlogCard_desc__SLlJ3">记录友宝开发环境地址，方便使用</p><div class="BlogCard_tag-container__U0v0s"><span class="Tag_tag__XHvaX" style="margin-left:.1em">友宝</span><span class="Tag_tag__XHvaX" style="margin-left:.1em">杂项</span></div></div><div class="BlogCard_card__ieja8"><h4>凸包-地图围栏</h4><p class="BlogCard_desc__SLlJ3">公司零售货柜机在地图上的点需要围栏圈起来，以便显示大致范围</p><div class="BlogCard_tag-container__U0v0s"><span class="Tag_tag__XHvaX" style="margin-left:.1em">算法</span></div></div><div class="BlogCard_card__ieja8"><h4>不能用作 JSX 组件</h4><p class="BlogCard_desc__SLlJ3">使用tsx时vscode提示&quot;**不能用作 JSX 组件&quot;</p><div class="BlogCard_tag-container__U0v0s"><span class="Tag_tag__XHvaX" style="margin-left:.1em">tsx</span><span class="Tag_tag__XHvaX" style="margin-left:.1em">React</span></div></div><div class="BlogCard_card__ieja8"><h4>vite打包白屏</h4><p class="BlogCard_desc__SLlJ3">vue项目使用vite白屏问题</p><div class="BlogCard_tag-container__U0v0s"><span class="Tag_tag__XHvaX" style="margin-left:.1em">Vue3</span><span class="Tag_tag__XHvaX" style="margin-left:.1em">vite</span></div></div><div class="BlogCard_card__ieja8"><h4>withCredentials</h4><p class="BlogCard_desc__SLlJ3">withCredentials</p><div class="BlogCard_tag-container__U0v0s"><span class="Tag_tag__XHvaX" style="margin-left:.1em">xmlhttprequest</span></div></div><div class="BlogCard_card__ieja8"><h4>vite学习</h4><p class="BlogCard_desc__SLlJ3">vite学习</p><div class="BlogCard_tag-container__U0v0s"><span class="Tag_tag__XHvaX" style="margin-left:.1em">vite</span></div></div><div class="BlogCard_card__ieja8"><h4>vue3 学习</h4><p class="BlogCard_desc__SLlJ3">vue3搭建一个小项目，项目用于公司零售柜价格设置。项目选型之所以选vue3，主要是用了我之前很久远的一个Vue2脚手架,写起来有点膈手，外加上vue3在国内火，想着是小项目就随便我折腾了。</p><div class="BlogCard_tag-container__U0v0s"><span class="Tag_tag__XHvaX" style="margin-left:.1em">Vue3</span></div></div><div class="BlogCard_card__ieja8"><h4>Typescript类型学习</h4><p class="BlogCard_desc__SLlJ3">Typescript类型定义</p><div class="BlogCard_tag-container__U0v0s"><span class="Tag_tag__XHvaX" style="margin-left:.1em">typescript</span></div></div><div class="BlogCard_card__ieja8"><h4>Vite打包</h4><p class="BlogCard_desc__SLlJ3">Vite 打包配置学习</p><div class="BlogCard_tag-container__U0v0s"><span class="Tag_tag__XHvaX" style="margin-left:.1em">Vite</span></div></div><div class="BlogCard_card__ieja8"><h4>博客测试</h4><p class="BlogCard_desc__SLlJ3">NextJS打包相关问题以及解决办法</p><div class="BlogCard_tag-container__U0v0s"><span class="Tag_tag__XHvaX" style="margin-left:.1em">NextJS</span></div></div><div class="BlogCard_card__ieja8"><h4>ts定义全局变量</h4><p class="BlogCard_desc__SLlJ3">ts定义全局变量，以及可以能碰到的问题</p><div class="BlogCard_tag-container__U0v0s"><span class="Tag_tag__XHvaX" style="margin-left:.1em">ts</span></div></div><div class="BlogCard_card__ieja8"><h4>ReactNative Put方式上传文件</h4><p class="BlogCard_desc__SLlJ3">ReactNative Put方式上传文件</p><div class="BlogCard_tag-container__U0v0s"><span class="Tag_tag__XHvaX" style="margin-left:.1em">RN</span><span class="Tag_tag__XHvaX" style="margin-left:.1em">PUT</span></div></div><div class="BlogCard_card__ieja8"><h4>NextJS</h4><p class="BlogCard_desc__SLlJ3">NextJS打包相关问题以及解决办法</p><div class="BlogCard_tag-container__U0v0s"><span class="Tag_tag__XHvaX" style="margin-left:.1em">NextJS</span></div></div><div class="BlogCard_card__ieja8"><h4>NextJS打包</h4><p class="BlogCard_desc__SLlJ3">NextJS打包配置对应字段了解，进行简单的打包测试</p><div class="BlogCard_tag-container__U0v0s"><span class="Tag_tag__XHvaX" style="margin-left:.1em">NextJS</span></div></div><div class="BlogCard_card__ieja8"><h4>js计算精度</h4><p class="BlogCard_desc__SLlJ3">js计算精度</p><div class="BlogCard_tag-container__U0v0s"><span class="Tag_tag__XHvaX" style="margin-left:.1em">typescript</span></div></div><div class="BlogCard_card__ieja8"><h4>Gird布局</h4><p class="BlogCard_desc__SLlJ3">Gird布局</p><div class="BlogCard_tag-container__U0v0s"><span class="Tag_tag__XHvaX" style="margin-left:.1em">grid</span></div></div><div class="BlogCard_card__ieja8"><h4>Git-Workflow</h4><p class="BlogCard_desc__SLlJ3">解决开发之后需要做的事，打包上线</p><div class="BlogCard_tag-container__U0v0s"><span class="Tag_tag__XHvaX" style="margin-left:.1em">Git</span></div></div><div class="BlogCard_card__ieja8"><h4>Git</h4><p class="BlogCard_desc__SLlJ3">git常用命令记录，主要是容易忘</p><div class="BlogCard_tag-container__U0v0s"><span class="Tag_tag__XHvaX" style="margin-left:.1em">Git</span></div></div><div class="BlogCard_card__ieja8"><h4>Axios重试</h4><p class="BlogCard_desc__SLlJ3">基于Axios封装接口重试</p><div class="BlogCard_tag-container__U0v0s"><span class="Tag_tag__XHvaX" style="margin-left:.1em">Axios</span></div></div><div class="BlogCard_card__ieja8"><h4>NextJS script引入</h4><p class="BlogCard_desc__SLlJ3">在nextjs 如何使用script</p><div class="BlogCard_tag-container__U0v0s"><span class="Tag_tag__XHvaX" style="margin-left:.1em">NextJS</span></div></div><div class="BlogCard_card__ieja8"><h4>Vue生命周期中，Android不能正常调用JS代码</h4><p class="BlogCard_desc__SLlJ3">Vue生命周期中，Android不能正常调用JS代码</p><div class="BlogCard_tag-container__U0v0s"><span class="Tag_tag__XHvaX" style="margin-left:.1em">H5</span><span class="Tag_tag__XHvaX" style="margin-left:.1em">Vue</span><span class="Tag_tag__XHvaX" style="margin-left:.1em">Android</span></div></div><div class="BlogCard_card__ieja8"><h4>Koa 中间件</h4><p class="BlogCard_desc__SLlJ3">主要是简单看一下源码</p><div class="BlogCard_tag-container__U0v0s"><span class="Tag_tag__XHvaX" style="margin-left:.1em">Koa</span></div></div><div class="BlogCard_card__ieja8"><h4>Axios response status 0</h4><p class="BlogCard_desc__SLlJ3">在IOS12.*版本,Axios发起的请求status为0</p><div class="BlogCard_tag-container__U0v0s"><span class="Tag_tag__XHvaX" style="margin-left:.1em">H5</span><span class="Tag_tag__XHvaX" style="margin-left:.1em">IOS</span><span class="Tag_tag__XHvaX" style="margin-left:.1em">Axios</span><span class="Tag_tag__XHvaX" style="margin-left:.1em">Cros</span></div></div><div class="BlogCard_card__ieja8"><h4>ios拍照上传，照片被旋转</h4><p class="BlogCard_desc__SLlJ3">ios,h5使用input拍照上传，上传之后的照片被旋转</p><div class="BlogCard_tag-container__U0v0s"><span class="Tag_tag__XHvaX" style="margin-left:.1em">ios</span><span class="Tag_tag__XHvaX" style="margin-left:.1em">h5</span><span class="Tag_tag__XHvaX" style="margin-left:.1em">exif</span></div></div><div class="BlogCard_card__ieja8"><h4>H5开发问题汇总</h4><p class="BlogCard_desc__SLlJ3">H5开发问题汇总</p><div class="BlogCard_tag-container__U0v0s"><span class="Tag_tag__XHvaX" style="margin-left:.1em">H5</span></div></div><div class="BlogCard_card__ieja8"><h4>The request client is not a secure context and the resource is in more-private address space &#x27;private&#x27;</h4><p class="BlogCard_desc__SLlJ3">浏览器安全策略</p><div class="BlogCard_tag-container__U0v0s"><span class="Tag_tag__XHvaX" style="margin-left:.1em">安全</span><span class="Tag_tag__XHvaX" style="margin-left:.1em">浏览器</span></div></div></div></div></main></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"mdxList":[{"content":"\n# 接雨水\n\n给定 n 个非负整数表示每个宽度为 1 的柱子的高度图，计算按此排列的柱子，下雨之后能接多少雨水。\n\n输入：height = [0,1,0,2,1,0,1,3,2,1,2,1]\n\n输出：6\n\n解释：上面是由数组 [0,1,0,2,1,0,1,3,2,1,2,1] 表示的高度图，在这种情况下，可以接 6 个单位的雨水（蓝色部分表示雨水）。 \n\n要接住雨水得是`先递减然后再递增的一个区间`\n\n```js:接雨水\n\n  function solution(arr){\n    \n    let scope = []\n\n    // 找接水区间\n    arr.forEach((item,index)=\u003e{\n      if(item != 0 ){\n        // 找到比当前下标大或者小的下标 切 两个校标\n        let left = arr.slice(index);\n        let findIndex = left.findIndex( leftItem =\u003e leftItem \u003e= item)\n        if( findIndex != -1 ){\n          scope.push({\n            start:index,\n            end\n          })\n        }\n        scope.push({\n          start:index,\n          end\n        })\n      }\n    })\n  }\n```\n","metaData":{"title":"算法-接雨水","description":"算法-接雨水","tags":["算法"],"keywords":["算法"],"id":"接雨水","create":1692153928600,"lastUpdate":1692153928643}},{"content":"\n# 禁用form默认事件\n\n```js:禁用enter事件\n\tlet forms = document.getElementsByTagName('form')\n\tlet len = forms.length;\n\tfor(let i = 0 ;i\u003clen;i++){\n\t\tforms[i].addEventListener('keydown',function(event){\n\t\t\tif(event.key=='Enter'){\n\t\t\t\tevent.preventDefault()\n\t\t\t}\n\t\t})\n\t}\n\n```\n","metaData":{"title":"禁用form默认事件","description":"禁用form表单enter事件","tags":["html","默认事件"],"keywords":["html","默认事件"],"id":"form禁用事件","create":1692153928584,"lastUpdate":1692153928632}},{"metaData":{"title":"友宝支付宝扫码支付","description":"公司需要在现有售货机上需要在售货机支付宝扫码支付上使用企业福利钱包","tags":["支付"],"keywords":["支付"],"id":"支付宝扫码支付","create":1687337636375,"lastUpdate":1692153928601},"content":"\n# 支付宝扫码支付总结\n\n### 流程\n用户扫码之后,后端重定向进入对应支付宝h5页面，用户选择钱包点击支付按钮。前端根据对应信息(商品信息、优惠信息、钱包信息等)获取交易号并且根据该交易号拉起支付宝收银台，在收到支付宝支付回调之后，将相应的支付状态上报后端,根据上报结果判断是否展示广告,至此结束。\n\n\n### 问题点\n- 前端技术栈\n\n  前端选择的是Vue3。项目很小,前面版本使用原生开发,后面迭代了两个版本,受够了dom操作繁琐,重构为Vue(避免了开发人员dom操作,就不得不将Vue运行时打包进项目,也算是一种取舍吧)\n\n- 是否前后端分离\n \n  最终选择是前后不分离(实际上开发还是分离),主要是考虑用户请求是否是可控的(伪造请求)。其实我们是支付宝H5的页面,可以使用支付宝的授权跳转，这样就可以使得来源可控。\n\n  事实证明还是要分离，不然开发过程中苦的是自己。后端再小的变动，前端都需要打包，将对应文件放在对应位置(这一步虽然可以代码完成)。然后再把项目推服务。\n\n- 加载速度(打包体积优化)\n\n  打包支持了gzip\n\n  terse minify以及移除了console\n\n  打包分析的时候发现decimal.js包体积很大(有部分金额计算涉及小数点,所以引入该包),对该包做了minify\n\n  请求合并，将第三方包打进vendor\n\n  还有vite默认支持的treeshaking\n\n- 版本控制\n\n  hash\n\n\n"},{"metaData":{"title":"首屏加载","description":"首屏打开速度","tags":["首屏","优化"],"keywords":["首屏","优化"],"id":"首屏加载","create":1691551622242,"lastUpdate":1692153928601},"content":"# 首屏加载\n\n- 避免使用着陆页重定向 \n  避免额外的DNS查找、TCP握手、TLS协商\n- 启用压缩功能\n  这个需要服务端配合开启gzip\n- 缩短服务器响应用时\n\n- 使用浏览器缓存\n  主要是一些浏览器缓存策略，但是可能会涉及到新版本页面不能被正确呈现\n- 缩减资源大小\n  可用插件移除不必要的代码\n- 优化图片\n  图片压缩工具、svg icon\n- 优化 CSS 发送过程\n  如果外部 CSS 资源较小，您可将它们直接插入到 HTML 文档中，这称为“内嵌”。以这种方式内嵌较小的 CSS 文件可让浏览器顺畅无阻地呈现网页。 请注意，如果 CSS 文件较大，完全内嵌 CSS 则可能会导致 PageSpeed Insights 通过优先加载可见内容规则向您发出网页首屏部分体积过大的警告。 如果 CSS 文件较大，您便需要确定和内嵌用于呈现首屏内容的 CSS，并暂缓加载其余样式，直到首屏内容显示出来为止。\n- 优先加载可见内容\n- 移除会阻止内容呈现的 JavaScript\n\n\n- dns-prefetch\n- 请求合并\n  常见的就是第三方包合并\n\n\n[Make the Web Faster](https://developers.google.com/speed?hl=zh-cn)\n"},{"metaData":{"title":"友宝项目架构","description":"简单学习一下友宝的前端项目架构","tags":["架构"],"keywords":["架构"],"id":"友宝项目架构","create":1682416219038,"lastUpdate":1692153928599},"content":"# 友宝项目架构\n简单学习一下友宝的前端项目架构\n\n友宝的前端项目的整体架构底层技术栈选用的是PHP+React，使用PHP做为外壳，内部重定向web静态资源。web资源请求首先经过的是PHP接口,经过一系列的中间件处理(比如鉴权之类...)，最后将页面展示需要的数据通过window对象注入静态页面，然后再将静态页面返回给浏览器渲染。\n\n感觉整体架构的思路有点类似于服务端渲染的思想，每次页面请求都是经过的服务端接口，服务端再去决定返回什么资源，实际返回的是一个已经有数据的静态页面，但是没有经过渲染，只是有页面数据，还是需要客户端渲染。\n\n优点\n\n  * 前端开发不需要网络服务模块\n  * 服务端感知度低\n  * 将静态数据注入的方式，减小的客户端的压力\n  * 方便页面重定向，定制化页面(可以通过外壳统一做特定活动之类的)\n\n\n\n缺点\n\n  * 前端依赖的数据都是注入在window对象，如果window对象被后续修改将获取不到内容\n  * 应用场景少，只能应用于不经常变化的数据。\n  * 前端开发BUG定位调试变得困难，开发环境虽然可mock数据，但是如果需要针对特定bug，修复bug发布之后才能看到修复结果。\n  * 前后端耦合\n"},{"metaData":{"title":"快速排序","description":"快速排序","tags":["算法","排序"],"keywords":["算法","排序"],"id":"快速排序","create":1691743637451,"lastUpdate":1692153928599},"content":"\n# 快速排序\n\n  快速排序（Quick Sort）是一种常用的排序算法，其平均时间复杂度为O(nlogn)。在最坏情况下，时间复杂度为O(n^2)，但通过合理的选取主元 元素和随机化等方法，可以有效地避免最坏情况发生。\n\n\u003e 快速排序的基本思想是通过划分（Partition）将数组分为两个子数组，其中一个子数组所有元素都小于等于主元（pivot），另一个子数组所有元素都大于等于主元，然后递归地对这两个子数组进行排序，直到子数组的长度为1或为空。\n\n### 优化点\n在每次划分过程中，选择合适的主元元素对数组进行划分是影响快速排序性能的关键。通常采用以下几种方式来选择主元元素：\n\n- 选取首元素、尾元素或者中间元素作为主元。\n- 随机选择数组中的一个元素作为主元。\n- 三数取中法，选择首、尾和中间位置的元素中值作为主元。\n\n### 时间复杂度\n\n快速排序的平均时间复杂度为O(nlogn)，这是由于每次划分操作都将数组划分为大致相等的两个子数组（除非数组中有重复元素，导致划分不均匀）。而每轮划分需要O(n)的时间复杂度，递归调用的次数为O(logn)。\n\n然而，快速排序在最坏情况下的时间复杂度为O(n^2)，当数组已经有序或基本有序时，每次划分只能将规模减小1，此时快速排序退化为了一种冒泡排序。为了避免最坏情况的发生，可以通过随机选择主元、采用三数取中法等方法来提高算法的性能。\n\n总结起来，快速排序的平均时间复杂度为O(nlogn)，在最坏情况下的时间复杂度为O(n^2)，并且它是一种原地排序算法，不需要额外的存储空间。\n\n```ts:快速排序\n\n  let arr = [5,2,1,6,8,3,2,9,2]\n  function sort(arr:number[]){\n    if(arr.length\u003c=1) return arr;\n    const base = arr.pop();\n    let left = [];\n    let right = []\n    arr.forEach(item=\u003e{\n      if(item \u003c base){\n        left.push(item)\n      }else{\n        right.push(item)\n      }\n    })\n    return [...sort(left),base,...sort(right)]\n  }\n```\n"},{"metaData":{"title":"动态规划","description":"动态规划（Dynamic Programming）解决一些具有重叠子问题性质的问题。动态规划通常用于优化递归算法，通过将中间结果存储起来，避免重复计算同一个子问题","tags":["算法","动态规划"],"keywords":["算法","动态规划"],"id":"动态规划","create":1691979935551,"lastUpdate":1692153928598},"content":"\n# 动态规划\n\n动态规划最核心的思想，就在于拆分子问题，记住过往，减少重复计算。\n\n- A ： \"1+1+1+1+1+1+1+1 =？\"\n- A ： \"上面等式的值是多少\"\n- B ： 计算 \"8\"\n- A : 在上面等式的左边写上 \"1+\" 呢？\n- A : \"此时等式的值为多少\"\n- B : 很快得出答案 \"9\"\n- A : \"你怎么这么快就知道答案了\"\n- A : \"只要在8的基础上加1就行了\"\n- A : \"所以你不用重新计算，因为你记住了第一个等式的值为8!动态规划算法也可以说是 '记住求过的解来节省时间'\"\n\n### 斐波那契数列\n\n指的是这样一个数列：这个数列从第3项开始，每一项都等于前两项之和。\nF(0) = 0,F(1) = 1, F(n) = F(n - 1) + F(n - 2),\n\n```js:动态规划-斐波那契数列\n  function fibonacciDynamic(n) {\n    if(n \u003c= 1 ) return n;\n    let dp = [];\n    dp[0] = 0; dp[1] = 1;\n\n    for(let i = 2;i \u003c= n; i++){\n      dp[i] = dp[i-2]+dp[i-1]\n    }\n    return dp[n]\n  }\n```\n\n### 青蛙跳阶问题\n\n- 一只青蛙一次可以跳上1级台阶，也可以跳上2级台阶。求该青蛙跳上一个 n 级的台阶总共有多少种跳法。\n\u003e f(n) = f(n-1) + f(n-2)\n\n  对于一般情况的n，青蛙跳上第n级台阶有两种方式：\n  - 青蛙`从第n-1级台阶跳上来`：这种情况下，青蛙只需要从第n-1级台阶跳1级就能到达第n级台阶，所以这种方式的跳法数量为f(n-1)。\n  - 青蛙`从第n-2级台阶跳上来`：这种情况下，青蛙需要从第n-2级台阶跳2级才能到达第n级台阶，所以这种方式的跳法数量为f(n-2)。\n\n\n一只青蛙跳上n级的台阶有多少种跳法。\n\n\u003e f(n) = 2*f(n-1)  |  2^(n-1)\n\n### 下降路径最小和\n\n给你一个 n x n 整数矩阵 grid ，请你返回 非零偏移下降路径 数字和的最小值。\n\n输入：grid = [[1,2,3],[4,5,6],[7,8,9]]\n\n输出：13\n\n解释：\n所有非零偏移下降路径包括：\n\n[1,5,9], [1,5,7], [1,6,7], [1,6,8],\n\n[2,4,8], [2,4,9], [2,6,7], [2,6,8],\n\n[3,4,8], [3,4,9], [3,5,7], [3,5,9]\n\n下降路径中数字和最小的是 [1,5,7] ，所以答案是 13 。\n\n解题思路:\n\ndp[i][j] 表示 第i行第j个元素的最小路径和\n\ngrid[i[j] 下降路径第i行第j个元素\n\n\u003edp[i][j] = dp[i-1][j] + grid[i[j]\n\n```js:下降路径最小和\n\n/**\n * @param {number[][]} grid\n * @return {number}\n * dp[i][j] 表示 第i行第j个元素的最小路径和\n * dp[i][j] =min(dp[i-1][j])\n */\nfunction minFallingPathSum (grid) {\n\n    let dp = [[...grid[0]]]\n    for (let i = 1; i \u003c grid.length; i++) {\n        dp[i] = []\n        for (let j = 0; j \u003c grid[i].length; j++) {\n            let min;\n            for (let d = 0; d \u003c dp[i - 1].length; d++) {\n                if (d != j) {\n                    min = Math.min(min ?? dp[i - 1][d], dp[i - 1][d])\n                }\n            }\n            dp[i][j] = min+grid[i][j]\n        }\n    }\n    return Math.min(...dp.pop())\n};\n\n```\n\n\n\n\n\n  \n\n\n\n\n"},{"metaData":{"title":"友宝环境地址记录","description":"记录友宝开发环境地址，方便使用","tags":["友宝","杂项"],"keywords":["友宝","杂项"],"isPrivate":true,"id":"友宝环境地址整理","create":1684490856659,"lastUpdate":1692153928598},"content":"\n# 友宝环境地址记录\n\n记录友宝开发环境地址，方便使用\n\n- [IVM测试环境](http://ubox-ivm.dev.uboxol.com)\n\n- [Facility测试环境](http://facility.dev.uboxol.com/)\n\n- [Payout测试环境](http://payout.dev.uboxol.com/)\n\n- [ACL权限测试环境](https://ubox-acl.dev.uboxol.com)\n\n- [价格设置测试环境](https://h5.uboxol.com/price-setting/#/retail-price/base)\n\n- [建议零售价测试环境](https://h5.uboxol.com/price-setting/#/advice-retail-price/base)\n\n- [Dim数据移动端测试环境](http://m-dim.dev.uboxol.com/user/h)\n\n- [扫码支付混合支付深圳](https://h5.uboxol.com/price-setting/#/advice-retail-price/base)\n\n- [OA审批](https://oa.uboxol.com/sys/profile/index.jsp#portal/maintenance/)\n\n- [Ubox-Mail](https://mail.ubox.cn/)\n"},{"metaData":{"title":"凸包-地图围栏","description":"公司零售货柜机在地图上的点需要围栏圈起来，以便显示大致范围","tags":["算法"],"keywords":["算法"],"id":"凸包-地图围栏-二分算法","create":1682416219035,"lastUpdate":1692153928596},"content":"# 凸包算法-地图围栏\n\n公司零售货柜机在地图上的点需要围栏圈起来，以便显示大致范围\n\n```js\n\n/**\n *      p2\n *  p1\u003c\n *      p3\n * 叉积判断 p1p2 p1p3\n * | p2.x-p1.x | p2.y-p1.y |\n * | p3.x-p1.x | p3.y-p1.y |\n * @param {{x:number,y:number}} p1 \n * @param {{x:number,y:number}} p2 \n * @param {{x:number,y:number}} p3 \n */\nfunction crossProduct(p1, p2, p3) {\n  return (p2.x - p1.x) * (p3.y - p1.y) - (p2.y - p1.y) * (p3.x - p1.x);\n}\n\n/**\n * \n * @param {{x:number,y:number}[]} points \n */\nfunction getConvexHull(points) {\n\n  if (points.length \u003c= 1) { return points; }\n\n  //按照x坐标排序 \n  points.sort((a, b) =\u003e a.x - b.x || a.y - b.y);\n  let lowerHull = [];\n  for (let i = 0; i \u003c points.length; i++) {\n    //构建下凸包\n\n    // 遍历凸包数据集判断当前点Pi是否在 H(n-2)H(n-1)的内侧(叉积\u003c0)，如果在内侧就移除H(n-1) \n    while (\n      lowerHull.length \u003e= 2 \u0026\u0026 \n      crossProduct(lowerHull[lowerHull.length - 2], lowerHull[lowerHull.length - 1], points[i]) \u003c= 0\n    ) {\n      lowerHull.pop();\n    }\n    lowerHull.push(points[i]);\n  }\n  let upperHull = [];\n  for (let i = points.length - 1; i \u003e= 0; i--) {\n    //构建上凸包\n    while (\n      upperHull.length \u003e= 2 \u0026\u0026 \n      crossProduct(upperHull[upperHull.length - 2], upperHull[upperHull.length - 1], points[i]) \u003c= 0) {\n      upperHull.pop();\n    }\n    upperHull.push(points[i]);\n  }\n  //合并上下凸包 \n  upperHull.pop();\n  lowerHull.pop();\n  return lowerHull.concat(upperHull);\n}\n```\n"},{"metaData":{"title":"不能用作 JSX 组件","description":"使用tsx时vscode提示\"**不能用作 JSX 组件\"","tags":["tsx","React"],"keywords":["tsx","React"],"id":"不能用作JSX组件","create":1687688994186,"lastUpdate":1692153928595},"content":"\n# 不能用作 JSX 组件\n\n### 原因\n在代码没有问题的前提下多半原因是`@types/react`和本地`ts`版本冲突原因\n\n### 解决办法\n\n查询本地ts版本\n\u003e tsc --version\n\nnpm社区找到`@types/react`, 根据`ts`版本找到对应`@types/react`版本下载\n![不能用作JSX组件](/md-images/notUsedAsJsx.jpg)\n\n\n\n"},{"metaData":{"title":"vite打包白屏","description":"vue项目使用vite白屏问题","tags":["Vue3","vite"],"keywords":["Vue3","vite"],"id":"vite白屏","create":1686118659933,"lastUpdate":1692153928594},"content":"\n# vite打包白屏\n\n    白屏黑不黑人   囧\n\n## 可能造成的原因\n\n- 浏览器兼容\n\n    增加垫片\n```ts:vite.config.ts\n\nimport legacy from '@vitejs/plugin-legacy'\nexport default defineConfig(({ mode }) =\u003e {\n  return {\n    plugins: [\n    legacy({\n      targets: ['defaults', 'ie \u003e= 11', 'chrome 52'],  //需要兼容的目标列表，可以设置多个\n      additionalLegacyPolyfills: ['regenerator-runtime/runtime'],\n      renderLegacyChunks: true,\n      polyfills: [\n        'es.symbol',\n        'es.array.filter',\n        'es.promise',\n        'es.promise.finally',\n        'es/map',\n        'es/set',\n        'es.array.for-each',\n        'es.object.define-properties',\n        'es.object.define-property',\n        'es.object.get-own-property-descriptor',\n        'es.object.get-own-property-descriptors',\n        'es.object.keys',\n        'es.object.to-string',\n        'web.dom-collections.for-each',\n        'esnext.global-this',\n        'esnext.string.match-all'\n      ]\n    })\n    ]\n  }\n})\n\n```\n\n- 打包script标签设置defer\n  \n  项目`base`设置的是一个地址。然后每次进入页面都需要刷新一次才能加载资源,也就是资源没有正常加载。查看发现vite打包之后的文件\n  资源加载标签`\u003cscript type=\"module\" crossorigin src=\"**.js\"\u003e\u003c/script\u003e`,标签没有defer,导致页面加载完了，我们的js还没下载完,页面白屏。\n  \n"},{"metaData":{"title":"withCredentials","description":"withCredentials","tags":["xmlhttprequest"],"keywords":["xmlhttprequest"],"id":"withCredentials","create":1689054435676,"lastUpdate":1692153928594},"content":"\n# withCredentials\n\n\n### 背景\nH5接口本地开发环境正常运行，但是上到预发布环境不能收到response响应(有多个系统接口,所以接口统一走了nginx);经过排查之后发现是axios设置了withCredentials，所以来学习一下。\n\n\n### 什么是withCredentials\nXMLHttpRequest.withCredentials 属性是一个布尔值，它指示了`是否该使用`类似 `cookie、Authorization 标头或者 TLS 客户端证书等凭据`进行`跨站点访问控制`（Acess-Control）请求。设置 withCredentials `对同源请求是无效`的。\n\n此外，这个标志还用于`指示何时在响应中忽略 cookie`。默认值是 false。除非在发送 XMLHttpRequest 请求之前，将 withCredentials 设置为 true，否则来自不同域的 XMLHttpRequest 响应无法为自己的域设置 cookie 值。而通过设置 withCredentials 为 true 获得第三方 cookie，仍将遵循同源策略，因此请求的脚本无法通过 document.cookie 或者响应标头访问。\n\n### 小结\n简单来说就是:\n- 设置withCredentials为true时，当前请求为跨域类型时在请求中协带cookie,同时后端需要设置Access-Control-Allow-Origin(pass:不能设置为*)和Access-Control-Allow-Credentials;\n\n- 设置withCredentials为false时,跨域xmlhttprequest响应无法为自己的域设置 cookie 值\n"},{"metaData":{"title":"vite学习","description":"vite学习","tags":["vite"],"keywords":["vite"],"id":"vite学习","create":1687144350874,"lastUpdate":1692153928593},"content":"\n# vite学习\n\n    Vite（法语意为 \"快速的\"，发音 /vit/，发音同 \"veet\"）是一种新型前端构建工具，能够显著提升前端开发体验。它主要由两部分组成：\n    - 一个开发服务器，它基于 原生 ES 模块 提供了 丰富的内建功能，如速度快到惊人的 模块热更新（HMR）。\n    - 一套构建指令，它使用 Rollup 打包你的代码，并且它是预配置的，可输出用于生产环境的高度优化过的静态资源。\n\n[vite官网](https://cn.vitejs.dev/)\n\n### 社区模板初始化\n\u003e npm create vite@latest\n\n### vite.config.ts配置\n```typescript:vite.config.ts\nimport { defineConfig } from 'vite'\nimport react from '@vitejs/plugin-react'\n\n// https://vitejs.dev/config/\nexport default defineConfig({\n  plugins: [react()],\n})\n```\n### 路径别名\n```typescript:vite.config.ts\nimport { defineConfig } from 'vite'\nimport path from 'path'\nexport default defineConfig({\n  resolve: {\n    alias: {\n      '@': path.resolve(__dirname, 'src'),\n    },\n    extensions: ['.js', '.vue', '.json'], // vue项目配置\n  },\n})\n```\n\n配合typescript需要在tsconfig同步配置\n```json:tsconfig.json\n{\n  \"compilerOptions\": {\n    \"baseUrl\": \".\",\n    \"paths\": {\"@/*\":[\"src/*\"]},\n  },\n  \"include\": [\"src/**/*.ts\", \"src/**/*.d.ts\", \"src/**/*.tsx\", \"src/**/*.vue\",\"@types/*.d.ts\"],\n  \"references\": [{ \"path\": \"./tsconfig.node.json\" }]\n}\n```\n### 代码压缩\n```typescript:vite.config.ts\nimport { defineConfig } from 'vite'\nimport path from 'path'\nimport viteCompression from 'vite-plugin-compression'\nexport default defineConfig({\n  plugins: [viteCompression()],\n})\n```\n需要nginx配合\n```yaml\n# 开启gzip\ngzip on;\n\n# 启用gzip压缩的最小文件，小于设置值的文件将不会压缩\ngzip_min_length 1k;\n\n# gzip 压缩级别，1-9，数字越大压缩的越好，也越占用CPU时间，后面会有详细说明\ngzip_comp_level 1;\n\n# 进行压缩的文件类型。javascript有多种形式。其中的值可以在 mime.types 文件中找到。\ngzip_types text/plain application/javascript application/x-javascript text/css application/xml text/javascript application/x-httpd-php image/jpeg image/gif image/png application/vnd.ms-fontobject font/ttf font/opentype font/x-woff image/svg+xml;\n\n# 是否在http header中添加Vary: Accept-Encoding，建议开启\ngzip_vary on;\n\n# 禁用IE 6 gzip\ngzip_disable \"MSIE [1-6]\\.\";\n\n# 设置压缩所需要的缓冲区大小\ngzip_buffers 32 4k;\n```\n\n### 公共依赖打包成一个文件\n```typescript:vite.config.ts\n  import { defineConfig } from 'vite'\n  export default defineConfig({\n    build: {\n      outDir: \"../q/src/main/resources/static\",\n      manifest: true,\n      emptyOutDir: true,\n      minify:\"terser\",\n      terserOptions: {\n        compress: {\n          drop_console: true,\n          drop_debugger: true,\n        },\n      },\n      chunkSizeWarningLimit: 1000,\n      rollupOptions: {\n        output: {\n          entryFileNames: 'assets/entry/[name][hash].js',\n          chunkFileNames: 'assets/chunk/[name][hash].js',\n          assetFileNames: 'assets/file/[name][hash].[ext]',\n          manualChunks(id) {\n            const NODE_MODULES = 'node_modules'\n            if (id.includes(NODE_MODULES)) return 'vendor'\n          },\n        },\n      }\n    },\n  })\n```\n### server配置\n\n```typescript:vite.config.ts\n  import { defineConfig } from 'vite'\n  export default defineConfig({\n    server: {\n      host: \"0.0.0.0\",\n      port:\"3000\",// 默认5173\n      proxy: {\n        // 字符串简写写法：http://localhost:5173/foo -\u003e http://localhost:4567/foo\n        '/foo': 'http://localhost:4567',\n        // 带选项写法：http://localhost:5173/api/bar -\u003e http://jsonplaceholder.typicode.com/bar\n        '/api': {\n          target: 'http://jsonplaceholder.typicode.com',\n          changeOrigin: true,\n          rewrite: (path) =\u003e path.replace(/^\\/api/, ''),\n        },\n        // 正则表达式写法：http://localhost:5173/fallback/ -\u003e http://jsonplaceholder.typicode.com/\n        '^/fallback/.*': {\n          target: 'http://jsonplaceholder.typicode.com',\n          changeOrigin: true,\n          rewrite: (path) =\u003e path.replace(/^\\/fallback/, ''),\n        },\n        // 使用 proxy 实例\n        '/api': {\n          target: 'http://jsonplaceholder.typicode.com',\n          changeOrigin: true,\n          configure: (proxy, options) =\u003e {\n            // proxy 是 'http-proxy' 的实例\n          }\n        },\n        // 代理 websockets 或 socket.io 写法：ws://localhost:5173/socket.io -\u003e ws://localhost:5174/socket.io\n        '/socket.io': {\n          target: 'ws://localhost:5174',\n          ws: true,\n        },\n      },\n    }\n  })\n```\n\n### 浏览器兼容\n```typescript:vite.config.ts\nimport { defineConfig } from 'vite'\nimport vue from '@vitejs/plugin-vue'\nimport legacy from '@vitejs/plugin-legacy'\nexport default defineConfig({\n  plugins: [\n    vue(),\n    legacy({\n      targets: ['defaults', 'ie \u003e= 11', 'chrome 52'],  //需要兼容的目标列表，可以设置多个\n      additionalLegacyPolyfills: ['regenerator-runtime/runtime'],\n      renderLegacyChunks: true,\n      polyfills: [\n        'es.symbol',\n        'es.array.filter',\n        'es.promise',\n        'es.promise.finally',\n        'es/map',\n        'es/set',\n        'es.array.for-each',\n        'es.object.define-properties',\n        'es.object.define-property',\n        'es.object.get-own-property-descriptor',\n        'es.object.get-own-property-descriptors',\n        'es.object.keys',\n        'es.object.to-string',\n        'web.dom-collections.for-each',\n        'esnext.global-this',\n        'esnext.string.match-all'\n      ]\n    })\n  ],\n})\n\n```\n"},{"metaData":{"title":"vue3 学习","description":"vue3搭建一个小项目，项目用于公司零售柜价格设置。项目选型之所以选vue3，主要是用了我之前很久远的一个Vue2脚手架,写起来有点膈手，外加上vue3在国内火，想着是小项目就随便我折腾了。","tags":["Vue3"],"keywords":["Vue3"],"id":"vite-vue3","create":1682416219032,"lastUpdate":1692153928592},"content":"# vue3 学习\n\nvue3搭建一个小项目，项目用于公司零售柜价格设置。项目选型之所以选vue3，主要是用了我之前很久远的一个Vue2脚手架,写起来有点膈手，外加上vue3在国内火，想着是小项目就随便我折腾了\n\n首先去搜索引擎找了一个脚手架vite,一路enter就好了。对了vue3的全局状态管理推荐用**pinia**了，狗头保命...之前我都没听说这个玩意\n\u003e npm create vite@latest\n\n创建完了，跑起项目就 可以看到\"Hello World\"了。\n\n我这边是一个H5项目，需要做屏幕适配。所以 `postcss-pxtorem`+ `autoprefixer`+`amfe-flexible` install到项目里，然后按照demo配置一下。最主要的就是`rootValue`这个属性，设计稿除以10\n\n```JS:.postcssrc.cjs\n module.exports = {\n  plugins: {\n    autoprefixer: {\n      Browserslist: [\"Android \u003e= 4.0\", \"iOS \u003e= 7\"],\n    },\n    \"postcss-pxtorem\": {\n      rootValue: 37.5, //结果为：设计稿元素尺寸/37.5，比如元素宽375px,最终页面会换算成 10rem\n      propList: [\"*\"],\n      // 黑名单\n      // selectorBlackList: [\n      //   'van-'\n      // ],\n    },\n  },\n};\n```\n\nUI整的是`Vant`,为什么用这个，我也很纳闷，设计又不按照这个UI组件设计，领导又让用这个库，总之项目Ui自定义高就别用什么组件了,自己费尽整一套就好，\n\n最后整个`axios`和css预编译,框框就差不多了。\n\n接着就是看一下Vue APi 配方和以前大差不差。以前很讨厌vue整一个大对象，把所有的东西都塞里面，看起来很廉价。现在这个组合式的感觉像是那么回事了。\n\n* defineProps\n* defineEmit\n* defineProps\n* watch\n* watEffect\n* ref\n* reactive\n* computed\n* ...\n\n对了我的编辑器是vscode,如果要用vue3 就不要用`vuter`了提示支持不友好，新的插件`volar`，如果vscode下载不下来就需要去官网下载，把包里package.json vscode版本改的和自己编辑器的版本一眼,再手动安装,详细教程搜索引擎自取。\n\n中间碰到一个很恶心的事情,Vant的组件有很多自定义css样式,想全局修改。index.html修改失败，按照官网的:root:root也不行，最后就整了一个js文件在入口统一修改...囧\n```JS\n  export function updateVantCSSVar() {\n    let cssVar = [\n      ['--van-tabs-bottom-bar-color', '#FF7500'],\n      ['--van-tabs-nav-background', 'transparent'],\n      ['--van-field-label-width', '5.5em'],\n    ]\n\n    cssVar.forEach(item =\u003e {\n      document.documentElement.style.setProperty(item[0], item[1])\n    })\n  }\n```\n\n顺路又学了一下less定义全局变量\n```JS:VITE.CONFIG.JS\n// VITE.CONFIG.JS\nexport default defineConfig(({ mode }) =\u003e {\n  return {\n    css: {\n      preprocessorOptions: {\n        less: {\n          modifyVars: {\n            // 这个用来定义全局变量的\n            hack: `true; @import \"${path.resolve(__dirname, \"./src/assets/css/base.less\")}\"`\n            // '--van-field-label-width': '6.3em'\n          },\n          globalVars: {\n\n          },\n        }\n      }\n    }\n  }\n})\n\n  //base.less\n  @test-color: red;\n  @goods-img: 60px;\n  @yellow: #FF7500;\n\n```\n\n最后打包，默认的是`/`,建议配置 `base`为`./`,不然如果项目不是在根目录就找不到静态资源了。\n\n### 碰到的糟心问题\n\n  - 白屏\n\n    如果任何报错都没有,建议检查router的模式是否用的是`history`\n  * ts中引入Vue文件报错\n\n    ```ts:sfc.d.ts\n      //增加一个 sfc.d.ts\n      declare module '*.vue' {\n        import { ComponentOptions } from 'vue'\n        const componentOptions: ComponentOptions\n        export default componentOptions\n      }\n    ```\n  * vconsole引入\n    ```JS:main.ts\n      if (import.meta.env.MODE !== 'prod') {\n\n        // 网上的教程大多是下面这种引入，实际上会报错\n        app.use(new Vconsole())\n\n        // 以下引入可以正常使用\n        new Vconsole()\n\n        // 这种也可以\n        app.use(()=\u003enew Vconsole())\n      }\n    ```\n  * 部分浏览器黑屏兼容问题,版本较低的浏览器不支持ES6的语法和新API，而Babel默认只转换新的JavaScript句法，不转换新的API，比如Proxy、Symbol、Promise等全局对象，以及一些定义在全局对象上的方法都不会转码。\n    \u003e yarn add @vitejs/plugin-legacy terser\n    ```ts:vite.config.ts\n      import legacy from '@vitejs/plugin-legacy'\n      export default defineConfig(({ mode }) =\u003e {\n        return {\n          plugins: [\n            legacy({\n              targets: ['defaults', 'ie \u003e= 11', 'chrome 52'],  //需要兼容的目标列表，可以设置多个\n              additionalLegacyPolyfills: ['regenerator-runtime/runtime'],\n              renderLegacyChunks: true,\n              polyfills: [\n                'es.symbol',\n                'es.array.filter',\n                'es.promise',\n                'es.promise.finally',\n                'es/map',\n                'es/set',\n                'es.array.for-each',\n                'es.object.define-properties',\n                'es.object.define-property',\n                'es.object.get-own-property-descriptor',\n                'es.object.get-own-property-descriptors',\n                'es.object.keys',\n                'es.object.to-string',\n                'web.dom-collections.for-each',\n                'esnext.global-this',\n                'esnext.string.match-all'\n              ]\n            })\n          ],\n          resolve: {\n            alias: {\n              '@': path.resolve(__dirname, 'src'),\n            },\n          },\n          server: { },\n          css: { }\n        }\n      })\n    ```\n\n  \n  \n\n\n\n\n\n"},{"metaData":{"title":"Typescript类型学习","description":"Typescript类型定义","tags":["typescript"],"keywords":["typescript"],"id":"typescript类型","create":1689302190716,"lastUpdate":1692153928591},"content":"# Typescript类型学习\n\n### 枚举类型提取\n```ts\nenum NAME {\n  'xiaoming'='xiaoming',\n  'xiaozhang'='xiaozhang',\n}\ntype Name = keyof typeof Name// 'xiaoming'|'xiaozhang'\n```\n"},{"metaData":{"title":"Vite打包","description":"Vite 打包配置学习","tags":["Vite"],"keywords":["Vite"],"id":"vite-config","create":1682495747004,"lastUpdate":1692153928591},"content":"# Vite打包\n\nvite.config.js配置文件选项注释说明\n\n```ts:vite.config.ts\nimport { defineConfig } from \"vite\";\nimport vue from \"@vitejs/plugin-vue\";\nimport path from \"path\";\nexport default defineConfig({\n\n  //项目根目录\n  root: process.cwd(),\n  \n  //项目部署的基础路径\n  base: \"/\",\n  \n  //环境配置 'development'|'production'\n  mode: \"development\",\n  \n  //全局常量替换 Record\u003cstring, string\u003e\n  define: {\n    \"\": \"\",\n    user: \"users\",\n  },\n  \n  //插件\n  plugins: [vue()],\n  \n  //静态资源服务的文件夹\n  publicDir: \"public\",\n  \n  //存储缓存文件的目录\n  cacheDir: \"node_modules/.vite\",\n  \n  resolve: {\n    //别名\n    alias: {\n      \"@\": path.resolve(__dirname, \"/src\"),\n    },\n    dedupe: [],\n\n    //解决程序包中package.json配置中的exports 字段\n    conditions: [],\n    \n    //解析package.json中字段的优先级\n    mainFields: [\"module\", \"jsnext:main\", \"jsnext\"],\n    \n    //导入时想要省略的扩展名列表\n    extensions: [\".mjs\", \".js\", \".ts\", \".jsx\", \".tsx\", \".json\"],\n    \n    //使Vite通过原始文件路径而不是真正的文件路径确定文件身份\n    preserveSymlinks: false,\n  },\n  css: {\n    \n    //配置 CSS modules 的行为。选项将被传递给 postcss-modules。\n    modules: {},\n    \n    // PostCSS 配置（格式同 postcss.config.js）\n    // postcss-load-config 的插件配置\n    postcss: {},\n    \n    //指定传递给 CSS 预处理器的选项\n    preprocessorOptions: {\n      scss: {\n        additionalData: `$injectedColor: orange;`,\n      },\n    },\n    \n    //开发过程中是否启sourcemap\n    devSourcemap: false,\n  },\n  json: {\n   \n    //是否支持从 .json 文件中进行按名导入\n    namedExports: true,\n   \n    //若设置为 true，导入的 JSON 会被转换为 export default JSON.parse(\"...\") 会比转译成对象字面量性能更好，\n    stringify: false,\n  },\n  \n  //继承自 esbuild 转换选项。最常见的用例是自定义 JSX\n  esbuild: {\n    jsxFactory: \"h\",\n    jsxFragment: \"Fragment\",\n    jsxInject: `import React from 'react'`,\n  },\n  \n  //静态资源处理  字符串|正则表达式\n  assetsInclude: [\"**/*.gltf\"],\n  \n  //调整控制台输出的级别 'info' | 'warn' | 'error' | 'silent'\n  logLevel: \"info\",\n  \n  //设为 false 可以避免 Vite 清屏而错过在终端中打印某些关键信息\n  clearScreen: true,\n  \n  //加载 .env 文件的目录\n  envDir: \"\",\n  \n  //envPrefix开头的环境变量会通过import.meta.env暴露客户端源码\n  envPrefix: \"VITE_\",\n  \n  //设置'spa' | 'mpa' | 'custom'应用操作\n  appType: \"spa\",\n  \n  //服务\n  server: {\n  \n    //服务器主机名\n    host: \"localhost\",\n  \n    //端口号\n    port: \"5173\",\n  \n    //设为 true 时若端口已被占用则会直接退出，而不是尝试下一个可用端口\n    strictPort: true,\n  \n    //https.createServer()配置项\n    https: \"\",\n  \n    //服务器启动时自动在浏览器中打开应用程序。\n    open: \"/docs/index.html\",\n  \n    //自定义代理规则\n    proxy: {\n  \n      // 字符串简写写法\n      \"/foo\": \"http://localhost:4567\",\n  \n      // 选项写法\n      \"/api\": {\n        target: \"http://jsonplaceholder.typicode.com\",\n        changeOrigin: true,\n        rewrite: (path) =\u003e path.replace(/^\\/api/, \"\"),\n      },\n  \n      // 正则表达式写法\n      \"^/fallback/.*\": {\n        target: \"http://jsonplaceholder.typicode.com\",\n        changeOrigin: true,\n        rewrite: (path) =\u003e path.replace(/^\\/fallback/, \"\"),\n      },\n  \n      // 使用 proxy 实例\n      \"/api\": {\n        target: \"http://jsonplaceholder.typicode.com\",\n        changeOrigin: true,\n        configure: (proxy, options) =\u003e {\n          // proxy 是 'http-proxy' 的实例\n        },\n      },\n  \n      // Proxying websockets or socket.io\n  \n      \"/socket.io\": {\n        target: \"ws://localhost:3000\",\n        ws: true,\n      },\n    },\n  \n    //开发服务器配置 CORS\n    cors: {},\n  \n    //指定服务器响应的 header ,类型OutgoingHttpHeaders\n    header: {},\n  \n    //禁用或配置 HMR 连接\n    hmr: {},\n  \n    //传递给 chokidar 的文件系统监视器选项\n    watch: {},\n  \n    //中间件模式创建 Vite 服务器,'ssr' | 'html'\n    middlewareMode: \"ssr\",\n  \n    //HTTP请求中预留此文件夹，用于代理 Vite 作为子文件夹时使用。\n    base: \"\",\n  \n    fs: {\n      //限制为工作区 root 路径以外的文件的访问\n      strict: true,\n      //限制哪些文件可以通过 /@fs/ 路径提供服务\n      allow: [\n        // 搜索工作区的根目录\n        searchForWorkspaceRoot(process.cwd()),\n        // 自定义规则\n        \"/path/to/custom/allow\",\n      ],\n  \n      //限制Vite开发服务器提供敏感文件的黑名单\n      deny: [\".env\", \".env.*\", \"*.{pem,crt}\"],\n    },\n  \n    //定义开发调试阶段生成资产的url\n    origin: \"http://127.0.0.1:8080\",\n  },\n  \n  //构建\n  build: {\n  \n    //浏览器兼容性  \"esnext\"|\"modules\"\n    target: \"modules\",\n  \n    //否自动注入 module preload 的 polyfill\n    polyfillModulePreload: true,\n  \n    //输出路径\n    outDir: \"dist\",\n  \n    //生成静态资源的存放路径\n    assetsDir: \"assets\",\n  \n    //小于此阈值的导入或引用资源将内联为 base64 编码，以避免额外的 http 请求。设置为 0 可以完全禁用此项\n    assetsInlineLimit: 4096,\n  \n    //启用/禁用 CSS 代码拆分\n    cssCodeSplit: true,\n  \n    //不同的浏览器target设置CSS的压缩\n    cssTarget: \"\",\n  \n    //构建后是否生成 source map 文件\n    //boolean | 'inline' | 'hidden'\n    sourcemap: false,\n    \n    //自定义底层的 Rollup 打包配置\n    rollupOptions: {\n    \n      //要打包的文件路径\n      input: \"src/main.js\",\n    \n      //文件输出位置\n      output: {\n    \n        //打包生产文件路径\n        file: \"dist/index.js\",\n    \n        //打包输出格式\n        // \"amd\", \"cjs\", \"system\", \"es\", \"iife\" or \"umd\n        format: \"cjs\",\n\n        //包的全部变量名称\n        name: \"bundleName\",\n\n        //声明全局变量\n        globals: {\n          jquery: \"$\",\n        },\n      },\n\n      //插件\n      plugins: [],\n\n      //不需打包的文件\n      external: [\"lodash\"],\n    },\n\n    //@rollup/plugin-commonjs 插件的选项\n    commonjsOptions: {},\n\n    //@rollup/plugin-dynamic-import-vars 选项\n    dynamicImportVarsOptions: {},\n\n    //构建的库\n    lib: {\n      entry: path.resolve(__dirname, \"lib/main.js\"),\n\n      //暴露的全局变量\n      name: \"mylib\",\n\n      //'es' | 'cjs' | 'umd' | 'iife'\n      formats: \"es\",\n\n      //输出的包文件名\n      fileName: \"my-lib\",\n    },\n\n    //当设置为 true，构建后将会生成 manifest.json 文件\n    manifest: false,\n\n    //当设置为 true，构建后将会生成SSR的manifest.json 文件\n    ssrManifest: false,\n\n    //生成面向 SSR 的构建\n    ssr: \"undefined\",\n\n    //设置为 false 可以禁用最小化混淆，\n    //boolean | 'terser' | 'esbuild'\n    minify: \"esbuild\",\n\n    //传递给 Terser 的更多 minify 选项。\n    terserOptions: {},\n\n    //设置为 false 来禁用将构建后的文件写入磁盘\n    write: true,\n\n    //默认情况下，若 outDir 在 root 目录下，则 Vite 会在构建时清空该目录。\n    emptyOutDir: true,\n\n    //启用/禁用 gzip 压缩大小报告\n    reportCompressedSize: true,\n\n    //触发警告的 chunk 大小（以 kbs 为单位）\n    chunkSizeWarningLimit: 500,\n\n    //设置为 {} 则会启用 rollup 的监听器\n    watch: null,\n  },\n\n  //开发服务器\n  preview: {\n\n    //开发服务器主机名\n    host: \"localhost\",\n\n    //开发服务器端口号\n    port: \"5173\",\n\n    //设为 true 时若端口已被占用则会直接退出，而不是尝试下一个可用端口\n    strictPort: true,\n\n    //https.createServer()配置项\n    https: \"\",\n\n    //服务器启动时自动在浏览器中打开应用程序。\n    open: \"/docs/index.html\",\n\n    //开发服务器，自定义代理规则\n    proxy: {\n      // 字符串简写写法\n      \"/foo\": \"http://localhost:4567\",\n      // 选项写法\n      \"/api\": {\n        target: \"http://jsonplaceholder.typicode.com\",\n        changeOrigin: true,\n        rewrite: (path) =\u003e path.replace(/^\\/api/, \"\"),\n      },\n      // 正则表达式写法\n      \"^/fallback/.*\": {\n        target: \"http://jsonplaceholder.typicode.com\",\n        changeOrigin: true,\n        rewrite: (path) =\u003e path.replace(/^\\/fallback/, \"\"),\n      },\n      // 使用 proxy 实例\n      \"/api\": {\n        target: \"http://jsonplaceholder.typicode.com\",\n        changeOrigin: true,\n        configure: (proxy, options) =\u003e {\n          // proxy 是 'http-proxy' 的实例\n        },\n      },\n      // Proxying websockets or socket.io\n      \"/socket.io\": {\n        target: \"ws://localhost:3000\",\n        ws: true,\n      },\n    },\n    //开发服务器配置 CORS\n    cors: {},\n  },\n\n  //依赖优化选项\n  optimizeDeps: {\n\n    //检测需要预构建的依赖项\n    entries: [],\n\n    //预构建中强制排除的依赖项\n    exclude: [\"jquery\"],\n\n    //默认情况下，不在 node_modules 中的，链接的包不会被预构建。使用此选项可强制预构建链接的包。\n    include: [],\n\n    //部署扫描和优化过程中传递给EsBuild\n    esbuildOptions: {},\n\n    //设置为 true 可以强制依赖预构建，而忽略之前已经缓存过的、已经优化过的依赖\n    force: true,\n  },\n\n  //SSR 选项\n  ssr: {\n\n    //列出的是要为 SSR 强制外部化的依赖\n    external: [],\n\n    //列出的是防止被 SSR 外部化依赖项。\n    noExternal: [],\n\n    //SSR 服务器的构建目标\n    target: \"node\",\n\n    //SSR 服务器的构建语法格式 'esm' | 'cjs'\n    format: \"esm\",\n  },\n  worker: {\n\n    //worker 打包时的输出类型 'es' | 'iife'\n    format: \"iife\",\n\n    // worker 打包的 Vite 插件\n    plugins: [],\n\n    //打包 worker 的 Rollup 配置项\n    rollupOptions: {},\n  },\n});\n```\n"},{"metaData":{"title":"博客测试","description":"NextJS打包相关问题以及解决办法","tags":["NextJS"],"keywords":["NextJS"],"id":"test","create":1682416219030,"lastUpdate":1692153928590},"content":"# NextJS打包相关问题\n\nNextJS打包相关问题以及解决办法，更多参见[Next文档](https://www.nextjs.cn/)\n\n\u003eEslint、Ts类型校验关闭\n```js:next.config.js\n  const nextConfig = {\n  \n    eslint:{\n      ignoreDuringBuilds:true\n    },\n      typescript: {\n      // !! WARN !!\n      // Dangerously allow production builds to successfully complete even if\n      // your project has type errors.\n      // !! WARN !!\n      ignoreBuildErrors: true,\n    }\n  }\n```\n\n\n\n\u003e Image Optimization using Next.js' default loader is not compatible with `next export`.\n\n```JS\nmodule.exports = {\n  // https://github.com/vercel/next.js/issues/21079\n  // Remove this workaround whenever the issue is fixed\n  images: {\n    loader: 'imgix',\n    path: '',\n  },\n}\n```\n\n\u003e 图片加载不出来\n"},{"metaData":{"title":"ts定义全局变量","description":"ts定义全局变量，以及可以能碰到的问题","tags":["ts"],"keywords":["ts"],"id":"ts-定义全局变量","create":1682676637588,"lastUpdate":1692153928590},"content":"# ts定义全局变量\n\n日常开发中如果一些包是手动通过script标签引入，并且`@types`也没有包可以，就需要我们手动定义，如下:\n\n```ts:**.d.ts\n/**\n * 支付宝jssdk部分模块描述\n */\ndeclare namespace ap {\n  function alert(options: { content: string; buttonText?: string; title?: string }): void;\n}\ninterface Window {\n  uboxClient: {\n    getToken: (callback: (token: string) =\u003e void) =\u003e void\n  },\n  UBOX_TOKEN?: string\n}\n```\n\n### 可能会碰到的问题\n如果正常定义之后,编辑器仍然没有智能提示,排除编辑器自身的问题，最好检查`tsconfig.json`文件`include`配置,\n你自定义的`*.d.ts`文件是否在include规则下面。。。\n```ts:tsconfig.json\n{\n  \"compilerOptions\": {\n    \"baseUrl\": \".\",\n    \"target\": \"ES2020\",\n    \"useDefineForClassFields\": true,\n    \"module\": \"ESNext\",\n    \"lib\": [\"ES2020\", \"DOM\", \"DOM.Iterable\"],\n    \"skipLibCheck\": true,\n\n    /* Bundler mode */\n    \"moduleResolution\": \"bundler\",\n    \"allowImportingTsExtensions\": true,\n    \"resolveJsonModule\": true,\n    \"isolatedModules\": true,\n    \"noEmit\": true,\n    \"jsx\": \"preserve\",\n    \"paths\": {\"@/*\":[\"src/*\"]},\n\n    /* Linting */\n    \"strict\": true,\n    \"noUnusedLocals\": true,\n    \"noUnusedParameters\": true,\n    \"noFallthroughCasesInSwitch\": true\n  },\n  \"include\": [\"src/**/*.ts\", \"src/**/*.d.ts\", \"src/**/*.tsx\", \"src/**/*.vue\"],\n  \"references\": [{ \"path\": \"./tsconfig.node.json\" }]\n}\n```\n"},{"metaData":{"title":"ReactNative Put方式上传文件","description":"ReactNative Put方式上传文件","tags":["RN","PUT"],"keywords":["RN"],"id":"rn-putfile","create":1682419800709,"lastUpdate":1692153928589},"content":"# React Native Put方式文件上传\n\n之前项目一直采用的后端上传，RN将文件使用FormData的形式传递给后端，为了解决文件过大的原因，采用RN使用PUT直接将文件上传至图片服务器;\n\n```ts\n/**\n * 图片上传请求工具\n * @param beforeUpload \n * @param afterUpload \n * @returns \n */\nexport default async function UploadFileToOSS(\n    fileData: FileInfo,\n    beforeUpload: () =\u003e Promise\u003c{ uploadUrl: string, key: string }\u003e,\n    afterUpload: (key: string) =\u003e Promise\u003cstring\u003e) {\n\n    // 1. 获取上传地址和key\n    let { uploadUrl, key } = await beforeUpload();\n\n    // fetch 为React Native 系统api\n    await fetch(uploadUrl, {\n        method: 'PUT',\n        body: {\n            uri: fileData.uri\n        },\n        headers: {\n            'Content-Type': fileData.type\n        }\n    })\n\n    // 3. 使用key换取上传地址\n    if (typeof afterUpload === 'function') {\n        return await afterUpload(key)\n    }\n\n    return key;\n}\n\ntype FileInfo = {\n    name: string\n    uri: string\n    type: string\n    base64: string\n}\n```\n"},{"metaData":{"title":"NextJS","description":"NextJS打包相关问题以及解决办法","tags":["NextJS"],"keywords":["NextJS"],"id":"next打包相关问题","create":1682416219026,"lastUpdate":1692153928588},"content":"# NextJS打包相关问题\n\nNextJS打包相关问题以及解决办法，更多参见[Next文档](https://www.nextjs.cn/)\n\n\u003eEslint、Ts类型校验关闭\n```js:next.config.js\n  const nextConfig = {\n  \n    eslint:{\n      ignoreDuringBuilds:true\n    },\n      typescript: {\n      // !! WARN !!\n      // Dangerously allow production builds to successfully complete even if\n      // your project has type errors.\n      // !! WARN !!\n      ignoreBuildErrors: true,\n    }\n  }\n```\n\n\n\n\u003e Image Optimization using Next.js' default loader is not compatible with `next export`.\n\n```JS\nmodule.exports = {\n  // https://github.com/vercel/next.js/issues/21079\n  // Remove this workaround whenever the issue is fixed\n  images: {\n    loader: 'imgix',\n    path: '',\n  },\n}\n```\n\n\u003e 图片加载不出来\n"},{"metaData":{"title":"NextJS打包","description":"NextJS打包配置对应字段了解，进行简单的打包测试","tags":["NextJS"],"keywords":["NextJS"],"id":"next打包配置学习","create":1682416219028,"lastUpdate":1692153928588},"content":"NextJS打包配置对应字段了解，进行简单的打包测试\n\u003e `assetPrefix` 静态资源前缀\n```js\n  const nextConfig = {\n    assetPrefix:'/前缀'\n  }\n```\n\n\u003e `Redirects` 将source原路径重定向到destination新路径，访问的是destination路径;\n```JS\n// 最终访问的是/blog路径,浏览器显示的也是blog路径\nconst nextConfig = {\n  redirects() {\n    return [\n      {\n        source: \"/\",\n        destination: \"/blog\",\n        permanent: true\n      }\n    ]\n  },\n}\n```\n\u003e `Rewrites`  将原路径充当代理以此来屏蔽目标路径。浏览器显示的是destination路径，实际访问的是source路径；功能类似于**userRouter.push(path,as)**中 参数**as**的功能;\n```JS\n// 浏览器显示的是\"/blog\"，实际访问的是\"/\"路径\nconst nextConfig = {\n  async rewrites() {\n    return [\n      {\n        source: '/',\n        destination: '/blog'\n      }\n    ]\n  },\n}\n```\n"},{"metaData":{"title":"js计算精度","description":"js计算精度","tags":["typescript"],"keywords":["typescript"],"id":"js计算精度","create":1689302190703,"lastUpdate":1692153928587},"content":"# js计算精度问题整理\n\n### 问题\n线上的出现的一个问题：用户钱包余额显示有4.60元，但是无法进行支付，查看后端日志发现前端传给后端的值是459(pass:前端需要将元转换成分，即乘以100)\n\n### 原因\njavascript的浮点数运算采用了`IEEE 754 双精度（64位）浮点运算规则`，在浮点数转化成二进制的时候因为位数限制会舍弃部分值造成精度问题。\n\n#### 什么是IEEE754\n\nIEEE二进制浮点数算术标准IEEE 754是20世纪80年代以来最广泛使用的浮点数运算标准。\nIEEE 754规定了四种表示浮点数值的方式：单精确度（32位）、双精确度（64位）、延伸单精确度（43比特以上，很少使用）与延伸双精确度（79比特以上，通常以80位实现）。其中javascript采用的是 双精度（64位）浮点运算规则。\n\n### 解决方案\n\n- 小数转化为整数再进行计算(还是会有部分精度问题)。\n- 成熟的库（Decimaljs、 Bignumber）\n- 字符串自己实现计算逻辑\n"},{"metaData":{"title":"Gird布局","description":"Gird布局","tags":["grid"],"keywords":["grid"],"id":"grid布局学习","create":1691563501797,"lastUpdate":1692153928586},"content":"\n# Gird布局\n\n\n[MDN Grid](https://developer.mozilla.org/zh-CN/docs/Web/CSS/grid)\n\n### api\n  - grid-template-column\n\n    grid-template-columns 该属性是基于网格列的维度，去定义网格线的名称和网格轨道的尺寸大小。\n    ```css:CSS\n      /* Keyword value */\n      grid-template-columns: none;\n\n      /* \u003ctrack-list\u003e values */\n      grid-template-columns: 100px 1fr;\n      grid-template-columns: [linename] 100px;\n      grid-template-columns: [linename1] 100px [linename2 linename3];\n      grid-template-columns: minmax(100px, 1fr);\n      grid-template-columns: fit-content(40%);\n      grid-template-columns: repeat(3, 200px);\n      grid-template-columns: subgrid;\n      grid-template-columns: masonry;\n\n      /* \u003cauto-track-list\u003e values */\n      grid-template-columns: 200px repeat(auto-fill, 100px) 300px;\n      grid-template-columns:\n        minmax(100px, max-content)\n        repeat(auto-fill, 200px) 20%;\n      grid-template-columns:\n        [linename1] 100px [linename2]\n        repeat(auto-fit, [linename3 linename4] 300px)\n        100px;\n      grid-template-columns:\n        [linename1 linename2] 100px\n        repeat(auto-fit, [linename1] 300px) [linename3];\n\n      /* Global values */\n      grid-template-columns: inherit;\n      grid-template-columns: initial;\n      grid-template-columns: revert;\n      grid-template-columns: revert-layer;\n      grid-template-columns: unset;\n    ```\n  - grid-template-rows\n    ```css:CSS\n      /* Keyword value */\n      grid-template-rows: none;\n\n      /* \u003ctrack-list\u003e values */\n      grid-template-rows: 100px 1fr;\n      grid-template-rows: [linename] 100px;\n      grid-template-rows: [linename1] 100px [linename2 linename3];\n      grid-template-rows: minmax(100px, 1fr);\n      grid-template-rows: fit-content(40%);\n      grid-template-rows: repeat(3, 200px);\n      grid-template-rows: subgrid;\n      grid-template-rows: masonry;\n\n      /* \u003cauto-track-list\u003e values */\n      grid-template-rows: 200px repeat(auto-fill, 100px) 300px;\n      grid-template-rows:\n        minmax(100px, max-content)\n        repeat(auto-fill, 200px) 20%;\n      grid-template-rows:\n        [linename1] 100px [linename2]\n        repeat(auto-fit, [linename3 linename4] 300px)\n        100px;\n      grid-template-rows:\n        [linename1 linename2] 100px\n        repeat(auto-fit, [linename1] 300px) [linename3];\n\n      /* Global values */\n      grid-template-rows: inherit;\n      grid-template-rows: initial;\n      grid-template-rows: revert;\n      grid-template-rows: revert-layer;\n      grid-template-rows: unset;\n    ```\n  - grid\n\n    grid 是一个 CSS 简写属性，可以用来设置以下属性： 显式网格属性 grid-template-rows、grid-template-columns 和 grid-template-areas， 隐式网格属性 grid-auto-rows、grid-auto-columns 和 grid-auto-flow， 间距属性 grid-column-gap和 grid-row-gap。\n   \n    ```text:基本语法\n      grid = \n          \u003c'grid-template'\u003e                                   |\n          \u003c'grid-template-rows'\u003e / [ auto-flow \u0026\u0026 dense? ] \u003c'grid-auto-columns'\u003e?  |\n          [ auto-flow \u0026\u0026 dense? ] \u003c'grid-auto-rows'\u003e? / \u003c'grid-template-columns'\u003e  \n    ```\n\n    ```css:CSS\n      /* \u003c'grid-template'\u003e values */\n      grid: none;\n      grid: \"a\" 100px \"b\" 1fr;\n      grid: [linename1] \"a\" 100px [linename2];\n      grid: \"a\" 200px \"b\" min-content;\n      grid: \"a\" minmax(100px, max-content) \"b\" 20%;\n      grid: 100px / 200px;\n      grid: minmax(400px, min-content) / repeat(auto-fill, 50px);\n\n      /* \u003c'grid-template-rows'\u003e /\n        [ auto-flow \u0026\u0026 dense? ] \u003c'grid-auto-columns'\u003e? values */\n      grid: 200px / auto-flow;\n      grid: 30% / auto-flow dense;\n      grid: repeat(3, [line1 line2 line3] 200px) / auto-flow 300px;\n      grid: [line1] minmax(20em, max-content) / auto-flow dense 40%;\n\n      /* [ auto-flow \u0026\u0026 dense? ] \u003c'grid-auto-rows'\u003e? /\n        \u003c'grid-template-columns'\u003e values */\n      grid: auto-flow / 200px;\n      grid: auto-flow dense / 30%;\n      grid: auto-flow 300px / repeat(3, [line1 line2 line3] 200px);\n      grid: auto-flow dense 40% / [line1] minmax(20em, max-content);\n\n      /* Global values */\n      grid: inherit;\n      grid: initial;\n      grid: unset;\n    ```\n  - grid-area\n    ```css:CSS\n      /* Keyword values */\n      grid-area: auto;\n      grid-area: auto / auto;\n      grid-area: auto / auto / auto;\n      grid-area: auto / auto / auto / auto;\n\n      /* \u003ccustom-ident\u003e values */\n      grid-area: some-grid-area;\n      grid-area: some-grid-area / another-grid-area;\n\n      /* \u003cinteger\u003e \u0026\u0026 \u003ccustom-ident\u003e? values */\n      grid-area: some-grid-area 4;\n      grid-area: some-grid-area 4 / 2 another-grid-area;\n\n      /* span \u0026\u0026 [ \u003cinteger\u003e || \u003ccustom-ident\u003e ] values */\n      grid-area: span 3;\n      grid-area: span 3 / span some-grid-area;\n      grid-area: 2 span / another-grid-area span;\n\n      /* Global values */\n      grid-area: inherit;\n      grid-area: initial;\n      grid-area: unset;\n    ```\n\n  - grid-auto-columns\n    ```css:CSS\n      /* 以下是不同类型的属性值示例 */\n      /* Keyword values */\n      grid-auto-columns: min-content;\n      grid-auto-columns: max-content;\n      grid-auto-columns: auto;\n\n      /* \u003clength\u003e values */\n      grid-auto-columns: 100px;\n      grid-auto-columns: 20cm;\n      grid-auto-columns: 50vmax;\n\n      /* \u003cpercentage\u003e values */\n      grid-auto-columns: 10%;\n      grid-auto-columns: 33.3%;\n\n      /* \u003cflex\u003e values */\n      grid-auto-columns: 0.5fr;\n      grid-auto-columns: 3fr;\n\n      /* minmax() values */\n      grid-auto-columns: minmax(100px, auto);\n      grid-auto-columns: minmax(max-content, 2fr);\n      grid-auto-columns: minmax(20%, 80vmax);\n\n      /* fit-content() values */\n      grid-auto-columns: fit-content(400px);\n      grid-auto-columns: fit-content(5cm);\n      grid-auto-columns: fit-content(20%);\n\n      /* multiple track-size values */\n      grid-auto-columns: min-content max-content auto;\n      grid-auto-columns: 100px 150px 390px;\n      grid-auto-columns: 10% 33.3%;\n      grid-auto-columns: 0.5fr 3fr 1fr;\n      grid-auto-columns: minmax(100px, auto) minmax(max-content, 2fr) minmax(20%, 80vmax);\n      grid-auto-columns: 100px minmax(100px, auto) 10% 0.5fr fit-content(400px);\n\n      /* Global values */\n      grid-auto-columns: inherit;\n      grid-auto-columns: initial;\n      grid-auto-columns: unset;\n    ```\n  - grid-auto-flow\n    ```css:CSS\n      /* Keyword values */\n      grid-auto-flow: row;\n      grid-auto-flow: column;\n      grid-auto-flow: dense;\n      grid-auto-flow: row dense;\n      grid-auto-flow: column dense;\n\n      /* Global values */\n      grid-auto-flow: inherit;\n      grid-auto-flow: initial;\n      grid-auto-flow: unset;\n    ```\n  - grid-auto-rows\n    ```css:CSS\n      /* Keyword values */\n      grid-auto-rows: min-content;\n      grid-auto-rows: max-content;\n      grid-auto-rows: auto;\n\n      /* \u003clength\u003e values */\n      grid-auto-rows: 100px;\n      grid-auto-rows: 20cm;\n      grid-auto-rows: 50vmax;\n\n      /* \u003cpercentage\u003e values */\n      grid-auto-rows: 10%;\n      grid-auto-rows: 33.3%;\n\n      /* \u003cflex\u003e values */\n      grid-auto-rows: 0.5fr;\n      grid-auto-rows: 3fr;\n\n      /* minmax() values */\n      grid-auto-rows: minmax(100px, auto);\n      grid-auto-rows: minmax(max-content, 2fr);\n      grid-auto-rows: minmax(20%, 80vmax);\n\n      /* multiple track-size values */\n      grid-auto-rows: min-content max-content auto;\n      grid-auto-rows: 100px 150px 390px;\n      grid-auto-rows: 10% 33.3%;\n      grid-auto-rows: 0.5fr 3fr 1fr;\n      grid-auto-rows: minmax(100px, auto) minmax(max-content, 2fr) minmax(20%, 80vmax);\n      grid-auto-rows: 100px minmax(100px, auto) 10% 0.5fr fit-content(400px);\n\n      /* Global values */\n      grid-auto-rows: inherit;\n      grid-auto-rows: initial;\n      grid-auto-rows: unset;\n    ```\n  - grid-column\n    ```css:CSS\n    ```\n  - grid-column-end\n    ```css:CSS\n      /* Keyword value */\n      grid-column-end: auto;\n\n      /* \u003ccustom-ident\u003e values */\n      grid-column-end: somegridarea;\n\n      /* \u003cinteger\u003e + \u003ccustom-ident\u003e values */\n      grid-column-end: 2;\n      grid-column-end: somegridarea 4;\n\n      /* span + \u003cinteger\u003e + \u003ccustom-ident\u003e values */\n      grid-column-end: span 3;\n      grid-column-end: span somegridarea;\n      grid-column-end: 5 somegridarea span;\n\n      /* Global values */\n      grid-column-end: inherit;\n      grid-column-end: initial;\n      grid-column-end: revert;\n      grid-column-end: revert-layer;\n      grid-column-end: unset;\n    ```\n  - grid-column-start\n    ```css:CSS\n      /* Keyword value */\n      grid-column-start: auto;\n\n      /* \u003ccustom-ident\u003e value */\n      grid-column-start: somegridarea;\n\n      /* \u003cinteger\u003e + \u003ccustom-ident\u003e values */\n      grid-column-start: 2;\n      grid-column-start: somegridarea 4;\n\n      /* span + \u003cinteger\u003e + \u003ccustom-ident\u003e values */\n      grid-column-start: span 3;\n      grid-column-start: span somegridarea;\n      grid-column-start: span somegridarea 5;\n\n      /* Global values */\n      grid-column-start: inherit;\n      grid-column-start: initial;\n      grid-column-start: revert;\n      grid-column-start: revert-layer;\n      grid-column-start: unset;\n    ```\n  - grid-row\n    ```css:CSS\n      /* Keyword values */\n      grid-row: auto;\n      grid-row: auto / auto;\n\n      /* \u003ccustom-ident\u003e values */\n      grid-row: somegridarea;\n      grid-row: somegridarea / someothergridarea;\n\n      /* \u003cinteger\u003e + \u003ccustom-ident\u003e values */\n      grid-row: somegridarea 4;\n      grid-row: 4 somegridarea / 6;\n\n      /* span + \u003cinteger\u003e + \u003ccustom-ident\u003e values */\n      grid-row: span 3;\n      grid-row: span somegridarea;\n      grid-row: 5 somegridarea span;\n      grid-row: span 3 / 6;\n      grid-row: span somegridarea / span someothergridarea;\n      grid-row: 5 somegridarea span / 2 span;\n\n      /* Global values */\n      grid-row: inherit;\n      grid-row: initial;\n      grid-row: revert;\n      grid-row: revert-layer;\n      grid-row: unset;\n    ```\n  - grid-row-end\n    ```css:CSS\n      /* Keyword value */\n      grid-row-end: auto;\n\n      /* \u003ccustom-ident\u003e values */\n      grid-row-end: somegridarea;\n\n      /* \u003cinteger\u003e + \u003ccustom-ident\u003e values */\n      grid-row-end: 2;\n      grid-row-end: somegridarea 4;\n\n      /* span + \u003cinteger\u003e + \u003ccustom-ident\u003e values */\n      grid-row-end: span 3;\n      grid-row-end: span somegridarea;\n      grid-row-end: 5 somegridarea span;\n\n      /* Global values */\n      grid-row-end: inherit;\n      grid-row-end: initial;\n      grid-row-end: revert;\n      grid-row-end: revert-layer;\n      grid-row-end: unset;\n    ```\n  - grid-row-start\n    ```css:CSS\n      /* Keyword value */\n      grid-row-start: auto;\n\n      /* \u003ccustom-ident\u003e values */\n      grid-row-start: somegridarea;\n\n      /* \u003cinteger\u003e + \u003ccustom-ident\u003e values */\n      grid-row-start: 2;\n      grid-row-start: somegridarea 4;\n\n      /* span + \u003cinteger\u003e + \u003ccustom-ident\u003e values */\n      grid-row-start: span 3;\n      grid-row-start: span somegridarea;\n      grid-row-start: 5 somegridarea span;\n\n      /* Global values */\n      grid-row-start: inherit;\n      grid-row-start: initial;\n      grid-row-start: revert;\n      grid-row-start: revert-layer;\n      grid-row-start: unset;\n    ```\n  - grid-template\n    ```css:CSS\n      /* Keyword value */\n      grid-template: none;\n\n      /* grid-template-rows / grid-template-columns values */\n      grid-template: 100px 1fr / 50px 1fr;\n      grid-template: auto 1fr / auto 1fr auto;\n      grid-template: [linename] 100px / [columnname1] 30% [columnname2] 70%;\n      grid-template: fit-content(100px) / fit-content(40%);\n\n      /* grid-template-areas grid-template-rows / grid-template-column values */\n      grid-template:\n        \"a a a\"\n        \"b b b\";\n      grid-template:\n        \"a a a\" 20%\n        \"b b b\" auto;\n      grid-template:\n        [header-top] \"a a a\" [header-bottom]\n        [main-top] \"b b b\" 1fr [main-bottom]\n        / auto 1fr auto;\n\n      /* Global values */\n      grid-template: inherit;\n      grid-template: initial;\n      grid-template: revert;\n      grid-template: revert-layer;\n      grid-template: unset;\n    ```\n  - grid-template-areas\n    ```css:CSS\n      /* Keyword value */\n      grid-template-areas: none;\n\n      /* \u003cstring\u003e values */\n      grid-template-areas: \"a b\";\n      grid-template-areas:\n        \"a b b\"\n        \"a c d\";\n\n      /* Global values */\n      grid-template-areas: inherit;\n      grid-template-areas: initial;\n      grid-template-areas: revert;\n      grid-template-areas: revert-layer;\n      grid-template-areas: unset;\n    ```\n\n"},{"metaData":{"title":"Git-Workflow","description":"解决开发之后需要做的事，打包上线","tags":["Git"],"keywords":["Git"],"id":"gitworkflow","create":1682416219022,"lastUpdate":1692153928585},"content":"# Git Workflow\n解决开发之后需要做的事，打包上线\n\n在项目根目录添加 .github/workflows/integrate.yml\n\n真的是气死个人，这段yml是cv来的，别人就能正常运行，但是我拿过来就报错。首先就是报错NextJS包里有`appKey??**`,\n一开始我看到这个还以为是这个包里有ES6语法，编译出问题。就用babel.config配置去编译node_modules，我也不知道编译对了没有总之没有生效，想来是错了\n后来我用windows的node环境试了一下这个语法发现node是可以用的，于是我猜测会不会是workflows的node版本过低，升级了版本就好了。。。。\n\n```yml:.github/workflows/integrate.yml\nname: Build and Deploy\non: \n  push:\n    branches:\n      - blog-next\njobs:\n  build-and-deploy:\n    # 虚拟机环境 ubuntu-latest，ubuntu-18.04或ubuntu-16.04\n    # windows-latest，windows-2019或windows-2016\n    # macOS-latest或macOS-10.14\n    runs-on: ubuntu-latest\n    steps:\n      - name: Checkout\n        uses: actions/checkout@v2.3.1\n        with:\n          persist-credentials: false\n\n      - name: Cache\n        uses: actions/cache@v2\n        with:\n          path: ${{ github.workspace }}/.next/cache\n          key: ${{ runner.os }}-nextjs-${{ hashFiles('**/package-lock.json') }}\n\n      - name: Install and Build\n        uses: actions/setup-node@v3\n        with:\n          node-version: 16\n      - run: npm install\n      - run: npm run transMD\n      - run: npm run build\n      - run: npm run export\n        env:\n            CI: true\n      - run: touch out/.nojekyll\n\n      - name: Deploy\n        uses: JamesIves/github-pages-deploy-action@3.7.1\n        with:\n          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}\n          BRANCH: lj-pages\n          FOLDER: out # The folder the action should deploy.\n          CLEAN: true # Automatically remove deleted files from the deploy branch\n```\n"},{"metaData":{"title":"Git","description":"git常用命令记录，主要是容易忘","tags":["Git"],"keywords":["Git"],"id":"git使用","create":1682416219024,"lastUpdate":1692153928585},"content":"# Git常用操作\n\ngit常用命令记录，主要是容易忘\n\n\n\u003e`git pull -f origin master:master`\n  如果远程分支和本地分支代码相差太大，可以考虑用远程的覆盖本地代码\n\u003e`git remote add longjiang ******`\n  添加远程地址\n\u003e`git remote set-url longjiang ******`\n  修改远程地址\n"},{"metaData":{"title":"Axios重试","description":"基于Axios封装接口重试","tags":["Axios"],"keywords":["H5","Vue","Android"],"id":"axios_retry","create":1686903407603,"lastUpdate":1692153928583},"content":"\n# Axios重试封装\n\n```typescript\nimport Axios from 'axios'\nimport { getToken } from '@/util/token'\n\nconst http = Axios.create({\n  timeout: 1000 * 15,\n  timeoutErrorMessage: '服务器繁忙,稍候重试',\n})\n\nhttp.interceptors.response.use(async (data) =\u003e {\n  if (data?.data?.code != 200) throw new Error(data?.data?.message ?? '服务器异常')\n  return data.data\n}, async (error) =\u003e {\n  let config = error?.config;\n  // 防止retry被intercept.request中配置覆盖，造成死循环\n  let retry = error?.config?.headers?.retry;\n  let __retry__ = error?.config?.headers?.__retry__;\n\n  if(!!retry \u0026\u0026 __retry__ == undefined){\n    error?.config?.headers?.__retry__ = --retry\n    return http(error.config)\n  }\n\n  if(__retry__){\n    error?.config?.headers?.__retry__ = --__retry__\n    return http(error.config)\n  }\n  return Promise.reject(error)\n})\n```\n"},{"metaData":{"title":"NextJS script引入","description":"在nextjs 如何使用script","tags":["NextJS"],"keywords":["NextJS"],"create":1683697866995,"lastUpdate":1692153928582,"id":"NextJS使用script引入"},"content":"# NextJS 使用script引入\n\n  如今模块化的前端，开发过程中的所需要的模块一般都可以使用`npm`来进行管理,`npm`不仅能够方便我们管理资源的版本，同时还能解决手动script引入顺序等诸多问题。\n\n\n  如果在`nextjs`中我们想手动引入一个脚本要如何做？\n\n\n一般前端项目都是通过入口文件将我们所有的前端文件打成一个或者多个js文件然后在html文件引入，在nextjs中也是一样,我们只需要在`_app.tsx`文件中引入就可以。\n部分脚手架搭建的next项目可能没有该文件，在root下创建该文件\n\n\n以下是nextjs手动引入`vconsole`示例\n```tsx:_app.tsx\nimport type { AppProps } from \"next/app\"\nimport Script from \"next/script\"\nexport default function App({ Component, pageProps }: AppProps) {\n  return (\n    \u003c\u003e\n      \u003cComponent {...pageProps} /\u003e\n      \u003cScript\n        src=\"https://unpkg.com/vconsole@latest/dist/vconsole.min.js\"\n        // strategy=\"beforeInteractive\"\n        onLoad={() =\u003e {\n          new window.VConsole()\n        }}\n      /\u003e\n    \u003c/\u003e\n  )\n}\n\n```\n\n"},{"metaData":{"title":"Vue生命周期中，Android不能正常调用JS代码","description":"Vue生命周期中，Android不能正常调用JS代码","tags":["H5","Vue","Android"],"keywords":["H5","Vue","Android"],"id":"android调用js不执行","create":1686902973329,"lastUpdate":1692153928582},"content":"\n# Vue生命周期中，Android不能正常调用JS代码\n\n  嵌入App的H5 Vue项目需要获取Token,App提供了方法供H5调用,在Vue生命周期中，Android不能正常调用JS代码\n\n```vue\n  onMounted(()=\u003e{\n    // uboxClient.getToken 为App注入的方法\n    window.uboxClient.getToken(function (token) {\n      // 回调不能被正常执行\n    })\n  })\n```\n"},{"metaData":{"title":"Koa 中间件","description":"主要是简单看一下源码","tags":["Koa"],"keywords":["Koa"],"id":"Koa-middlewarer","create":1682651966530,"lastUpdate":1692153928581},"content":"# Koa 中间件\n\n搜索引擎一搜索koa中间件，大多都会谈及洋葱模型、next移交控制权。洋葱模型还能理解，可是next移交控制权听起来就很懵，所以抽空看了一下源码，看看怎么个移交法。\n\n首先看了一下简单的执行顺序\n1. createServer:创建服务的时候,将callback的执行结果作为createServer的入参。\n2. callback: 返回一个新的函数， 通过createContext将res和resp封装成context对象作为第一参数,并将compose的执行结果作为第二参数\n3. compose函数第一个参数是callback创建的context,第二个参数一般都叫next,其实它就是`第i+1个中间件`，所以不要问为什么不执行next后面的中间件就不执行了\n\n```js:koa/lib/application.js\nclass Application extends Emitter {\n  use(fn) {\n    this.middleware.push(fn);\n    return this;\n  }\n  callback() {\n    const fn = compose(this.middleware);\n\n    if (!this.listenerCount('error')) this.on('error', this.onerror);\n\n    const handleRequest = (req, res) =\u003e {\n      const ctx = this.createContext(req, res);\n      if (!this.ctxStorage) {\n        return this.handleRequest(ctx, fn);\n      }\n      return this.ctxStorage.run(ctx, async() =\u003e {\n        return await this.handleRequest(ctx, fn);\n      });\n    };\n    return handleRequest;\n  }\n  listen(...args) {\n    debug('listen');\n    const server = http.createServer(this.callback());\n    return server.listen(...args);\n  }\n}\n```\n\n然后通过compose函数将各个中间件串联起来,compose函数会返回一个新的函数，入参为Context和Next，\n\n```JS:koa-compose/index.js\n/**\n * Compose `middleware` returning\n * a fully valid middleware comprised\n * of all those which are passed.\n *\n * @param {Array} middleware\n * @return {Function}\n * @api public\n */\nfunction compose (middleware) {\n  return function (context, next) {\n    // last called middleware #\n    let index = -1\n    return dispatch(0)\n    function dispatch (i) {\n      if (i \u003c= index) return Promise.reject(new Error('next() called multiple times'))\n      index = i\n      let fn = middleware[i]\n      if (i === middleware.length) fn = next\n      if (!fn) return Promise.resolve()\n      try {\n        return Promise.resolve(fn(context, dispatch.bind(null, i + 1)));\n      } catch (err) {\n        return Promise.reject(err)\n      }\n    }\n  }\n}\n```\n\n### 总结\n   中间件的next就是中间件(通过compose将中间件串联起来的)就是按照注册顺序，当前中间的下一个中间件,所有的中间件的执行顺序可以参照asyncawait代码执行顺序。所以你要想你下一个中间件正常执行，你记得要调用下一个中间件(也就是next)\n\n[更多中间件](https://github.com/koajs/koa/wiki#middleware)\n\n\n\n\n\n\n\n"},{"metaData":{"title":"Axios response status 0","description":"在IOS12.*版本,Axios发起的请求status为0","tags":["H5","IOS","Axios","Cros"],"keywords":["H5","IOS","Axios","Cros"],"id":"InIOS12AxiosStatus0","create":1686901605093,"lastUpdate":1692153928580},"content":"\n# 在IOS12.*版本,Axios发起的请求status为0\n\n  在公司H5项目测试，接口请求只有在IOS12.*版本无法正常请求，返回status 0。\n  问题原因:浏览器内核触发了cors拦截，拦截了[非简单请求](https://developer.mozilla.org/zh-CN/docs/Glossary/Simple_response_header)\n\n\u003e 解决方式：服务端把需要跨域的请求头设置给Access-Control-Allow-Headers，不用通配符*； \n\n\n[更多解决办法](https://github.com/axios/axios/issues/1598)\n"},{"metaData":{"title":"ios拍照上传，照片被旋转","description":"ios,h5使用input拍照上传，上传之后的照片被旋转","tags":["ios","h5","exif"],"keywords":["ios","h5","exif"],"id":"IOS拍照上传内容被翻转","create":1689056521119,"lastUpdate":1692153928578},"content":"\n# ios拍照,本地预览正常，上传之后被旋转\n\n\n### 背景\nH5使用input文件上传,本地预览正常，但是ios上传到后端之后，图片被旋转。搜索引擎一搜索，才知道这个涉及到到一个叫`exif`(可交换图像文件格式)的东西\n\n\n### 什么是exif\nExif（Exchangeable image file format）也就是可交换图像文件格式。是专门用来`记录数码照片属性信息和拍摄数据`。Exif信息包含了非常多的元数据，比如：\n- 图像相关的有：图像ID、分辨率、分辨率单位、图像方向、图像宽高等\n- 相机相关的有：相机制造商、相机型号、光圈值、焦距、物距、光圈值等\n- 其他一些： 饱和度、亮度、清晰度、EXIF版本等\n\n### 可能的问题\n- 本地预览正常，上传被旋转\n- 本地预览已经被旋转\n\n### 解决方案\n- 本地预览正常，上传被旋转\n使用canvas重画照片(pass:本质就是去掉exif信息)\n```typescript\nasync function redrawImage(\n  image: HTMLImageElement,\n  fileName: string,\n  fileType: string\n): Promise\u003cFile\u003e {\n  const canvasDom = document.createElement(\"canvas\")\n  canvasDom.width = image.width\n  canvasDom.height = image.height\n  const context = canvasDom.getContext(\"2d\")\n  if (!context) throw new Error(\"canvas is null\")\n  context.drawImage(image, 0, 0, image.naturalWidth, image.naturalHeight)\n  const canvasDataURL = canvasDom.toDataURL(fileType, 0.7)\n  return url2File(canvasDataURL, `${new Date().getTime()}${fileName}`)\n}\n```\n\n- 本地预览图片已经被旋转\n修改exif中图像方向信息\n```typescript\nimport piexif from \"piexifjs\"\n/**\n * 文件转dataUrl\n */\nfunction file2DataUrl(file: File) {\n  return new Promise\u003cstring\u003e(s =\u003e {\n    let reader = new FileReader()\n    reader.readAsDataURL(file)\n    reader.onload = function (_e) {\n      s(reader.result as string)\n    }\n  })\n}\n\nasync function url2File(url: string, fileName: string):Promise\u003cFile\u003e {\n  const blob = await (await fetch(url)).blob()\n  return new File([blob], fileName, { type: blob.type })\n}\n\nasync function updateOrient(file: File) {\n  const dataUrl = await file2DataUrl(file)\n  let originExif = piexif.load(dataUrl) // 获取exif信息\n  const orientation = originExif[\"0th\"][piexif.ImageIFD.Orientation] // orientation\n  if (orientation \u0026\u0026 orientation != 1) {\n    let exif = {}\n    exif[piexif.ImageIFD.Orientation] = 3 // 设置orientation 这里需要根据实际情况将图片调整至你预期方向\n    let exifObj = { \"0th\": exif }\n    let exifbytes = piexif.dump(exifObj)\n    let inserted = piexif.insert(exifbytes, dataUrl) // 写入新的exif\n    return await url2File(inserted, `${new Date().getTime()}_${file.name}`)\n  } else {\n    return file\n  }\n}\n\n```\n### 小结\n\n"},{"metaData":{"title":"H5开发问题汇总","description":"H5开发问题汇总","tags":["H5"],"keywords":["H5"],"id":"H5开发碰到的问题","create":1686045386016,"lastUpdate":1692153928577},"content":"\n# H5开发问题汇总\n\n- 使用px2rem类似转换包之后,圆点变形\n\n  结合transform和scale使用\n\n```css\n  .test{\n    width:1px;\n    height:1px;\n    transform:scale(10)\n  }\n```\n\n- 部分输入框文字不展示，但是有占位。造成的原因大概率是系统的护眼模式等类似的主题造成的\n\n  全局增加字体颜色\n\n- 全局设置标签颜色，不然手机主题可能导致颜色显示问题\n"},{"metaData":{"title":"The request client is not a secure context and the resource is in more-private address space 'private'","description":"浏览器安全策略","tags":["安全","浏览器"],"keywords":["安全","浏览器"],"id":"CORS-policy","create":1682416219017,"lastUpdate":1692153928573},"content":"# CORS policy\n\nAccess to XMLHttpRequest at '\\*\\*' from origin '\\*\\*' has been blocked by CORS policy: The request client is not a secure context and the resource is in more-private address space \\`private`.\n\n![The request client is not a secure context and the resource is in more-private address space 'private'](/md-images/pna.jpg)\n\n\n## 原因\n  与第三方相关。访问私有IP地址时，Chrome 会请求安全连接。Chrome 将弃用从非安全网站访问专用网络端点访问（以前称为 CORS-RFC1918）规范的一部分\n\n\n- [What is Private Network Access](https://developer.chrome.com/blog/private-network-access-update/#what-is-private-network-access)\n- [Chrome's plans to enable CORS-RFC1918](https://developer.chrome.com/articles/cors-rfc1918-feedback/#chrome's-plans-to-enable-cors-rfc1918)\n\n## 解决方法\n\n  前端接口和后端接口统一都用`https`\n\n\n### 什么是IP\n\n  在网络中，每台计算机都有一个唯一的地址，方便别人找到它，这个地址称为IP地址。IP地址是一个网络编码，用来确定网络中的一个节点，是由`32位的二进制`组成\n\n### IP地址的组成 \n\n  IP地址由`网络部分`和`主机部分`两部分组成\n  网络部分标示不同的网络\n  主机部分标示在一个网络中特定的主机\n\n### IP分类\n\n  IP地址的网络部分是由internet地址分配机构来统一分配的，这样可以保证IP的唯一性\n  IP地址中全为1的IP即255.255.255.255 它标示限制广播地址，如果将其作为数据包的目标地址可以理解为发送到所有网络的所有主机\n  IP地址全为0的IP即0.0.0.0 表示启动时的IP地址 含义尚未未分配的IP地址\n  127是用来进行本机测试的，除了127.255.255.255外，其他的`127开头的地址都代表本机`\n\n### 公有IP和私有IP\n私有IP\n  - A类 1-126 每个网络中可以有2的24次方-2台的主机\n  - B类 128-191 最大的主机数为 2的16次方减2\n  - C类 192-223 最大的主机数量是2的8次方减2\n\n其他范围的IP均为公有IP地址\n\n### 区别\n  公有IP地址：\n\n  组建一个企业级网络，需要去向“电信运营商ISP”申请一个接入Internet的宽带，同时ISP还会给我们分配一个或多个IP地址，这些IP地址可以供我们企业内部上网，这些ISP分配给我们的IP，就是公有IP。\n\n  公有地址（Public address，也可称为公网地址）由Internet NIC（Internet Network Information Center因特网信息中心）负责。这些IP地址分配给注册并向Internet NIC提出申请的组织机构。通过它直接访问因特网，它是广域网范畴内的。\n\n  私有IP地址：\n\n  我们企业或家庭内部组建局域网用的IP，一般都会用私有IP。\n  私有地址（Private address，也可称为专网地址）属于非注册地址，专门为组织机构内部使用，它是局域网范畴内的，私有IP禁止出现在Internet中，在ISP连接用户的地方，将来自于私有IP的流量全部都会阻止并丢掉。\n  《如果在企业内部的电脑要访问Internet，则需要在企业边界上用“NAT技术”将私网IP转成公网IP才能正常的上网。》\n"}]},"__N_SSG":true},"page":"/blog","query":{},"buildId":"MRl_9JcFNETdeZDdTz9TL","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>