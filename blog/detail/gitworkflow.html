<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><title>(*^▽^*)</title><meta name="next-head-count" content="3"/><link rel="preload" href="/_next/static/css/80a95484ea2876e6.css" as="style"/><link rel="stylesheet" href="/_next/static/css/80a95484ea2876e6.css" data-n-g=""/><link rel="preload" href="/_next/static/css/f8f6338530cfd437.css" as="style"/><link rel="stylesheet" href="/_next/static/css/f8f6338530cfd437.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/_next/static/chunks/webpack-ee7e63bc15b31913.js" defer=""></script><script src="/_next/static/chunks/framework-2c79e2a64abdb08b.js" defer=""></script><script src="/_next/static/chunks/main-7477d36a73a3487c.js" defer=""></script><script src="/_next/static/chunks/pages/_app-d15f243f6b85624f.js" defer=""></script><script src="/_next/static/chunks/171-0943d13a71220321.js" defer=""></script><script src="/_next/static/chunks/pages/blog/detail/%5Bid%5D-0499978da9bd8e44.js" defer=""></script><script src="/_next/static/c357VijpmtsGzoX5JAqmr/_buildManifest.js" defer=""></script><script src="/_next/static/c357VijpmtsGzoX5JAqmr/_ssgManifest.js" defer=""></script><style id="__jsx-1471609662">.file-name-container.jsx-1471609662{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;width:100%;max-width:100%;background-color:#1d2b35d9;padding:-webkit-calc(.5rem + .2vw);padding:-moz-calc(.5rem + .2vw);padding:calc(.5rem + .2vw);-webkit-border-top-left-radius:5px;-moz-border-radius-topleft:5px;border-top-left-radius:5px;-webkit-border-top-right-radius:5px;-moz-border-radius-topright:5px;border-top-right-radius:5px;margin-top:1vh;white-space:pre-wrap;word-wrap:break-word;overflow-wrap:break-word}.file-name.jsx-1471609662{font-family:"Share Tech Mono",monospace;font-size:-webkit-calc(.9rem + .1vw);font-size:-moz-calc(.9rem + .1vw);font-size:calc(.9rem + .1vw);color:#fffecbf2}</style></head><body><div id="__next"><div class="layout_main-container__jR90l"><main class="layout_main__E22hH"><div style="width:15em"><nav class="sidebar_nav__EFmKd"><div class="Avatar_container__egCID"><div class="Avatar_image-container__9WrGh"><img src="/images/avatar.png" alt="mingjianglong" class="Avatar_avatar__oORu6"/><h2>龙江</h2><h3 style="font-weight:normal;padding-top:.6em;color:grey">Jiang Long</h3><h4 style="padding-top:1.3em">等风也等你~</h4><span class="Avatar_my-face__hbhE_">ღゝ◡╹)ノ♡</span></div><div></div></div><a style="color:black" href="/">开心☺</a><a style="color:black" href="/blog">Blog</a><a style="color:black" href="/archive">归档</a><a style="color:black" href="/resume">简介</a></nav></div><div style="flex:1;height:100vh;display:flex;flex-direction:column;overflow-y:hidden"><div style="height:100%;padding:7em;overflow:scroll"><h1 style="font-family:&#x27;Ubuntu&#x27;, sans-serif;font-size:calc(1rem + 1.5vw);color:#1d2b35;padding:1em 0;overflow-wrap:break-word">Git Workflow</h1>
<p style="font-family:&#x27;Source Sans Pro&#x27;, sans-serif;font-size:calc(1rem + 0.1vw);color:#071013f2;margin:0vh 0 1vh 0;overflow-wrap:break-word">解决开发之后需要做的事，打包上线</p>
<p style="font-family:&#x27;Source Sans Pro&#x27;, sans-serif;font-size:calc(1rem + 0.1vw);color:#071013f2;margin:0vh 0 1vh 0;overflow-wrap:break-word">在项目根目录添加 .github/workflows/integrate.yml</p>
<p style="font-family:&#x27;Source Sans Pro&#x27;, sans-serif;font-size:calc(1rem + 0.1vw);color:#071013f2;margin:0vh 0 1vh 0;overflow-wrap:break-word">真的是气死个人，这段yml是cv来的，别人就能正常运行，但是我拿过来就报错。首先就是报错NextJS包里有<span class="SyntaxHighlighter_key-words__9bKIe">appKey??**</span>,
一开始我看到这个还以为是这个包里有ES6语法，编译出问题。就用babel.config配置去编译node_modules，我也不知道编译对了没有总之没有生效，想来是错了
后来我用windows的node环境试了一下这个语法发现node是可以用的，于是我猜测会不会是workflows的node版本过低，升级了版本就好了。。。。</p>
<pre><div class="jsx-1471609662"><div class="jsx-1471609662 file-name-container"><p class="jsx-1471609662 file-name">.github/workflows/integrate.yml</p></div><pre class="language-yml:.github/workflows/integrate.yml" style="color:#1d2b35;font-size:13px;text-shadow:none;font-family:Menlo, Monaco, Consolas, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, &quot;Courier New&quot;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.2;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:0px;overflow:auto;background:#1e1e1e;background-color:#071013f2;padding-bottom:1em;margin-bottom:1vh;border-bottom-left-radius:5px;border-bottom-right-radius:5px"><code class="language-yml" style="color:#d4d4d4;font-size:calc(0.8rem + 0.1vw);text-shadow:none;font-family:Menlo, Monaco, Consolas, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, &quot;Courier New&quot;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.2;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token key" style="color:#ce9178">name</span><span class="token" style="color:#d4d4d4">:</span><span> Build and Deploy
</span><span></span><span class="token key" style="color:#ce9178">on</span><span class="token" style="color:#d4d4d4">:</span><span> 
</span><span>  </span><span class="token key" style="color:#ce9178">push</span><span class="token" style="color:#d4d4d4">:</span><span>
</span><span>    </span><span class="token key" style="color:#ce9178">branches</span><span class="token" style="color:#d4d4d4">:</span><span>
</span><span>      </span><span class="token" style="color:#d4d4d4">-</span><span> blog</span><span class="token" style="color:#d4d4d4">-</span><span>next
</span><span></span><span class="token key" style="color:#ce9178">jobs</span><span class="token" style="color:#d4d4d4">:</span><span>
</span><span>  </span><span class="token key" style="color:#ce9178">build-and-deploy</span><span class="token" style="color:#d4d4d4">:</span><span>
</span><span>    </span><span class="token" style="color:#6a9955"># 虚拟机环境 ubuntu-latest，ubuntu-18.04或ubuntu-16.04</span><span>
</span><span>    </span><span class="token" style="color:#6a9955"># windows-latest，windows-2019或windows-2016</span><span>
</span><span>    </span><span class="token" style="color:#6a9955"># macOS-latest或macOS-10.14</span><span>
</span><span>    </span><span class="token key" style="color:#ce9178">runs-on</span><span class="token" style="color:#d4d4d4">:</span><span> ubuntu</span><span class="token" style="color:#d4d4d4">-</span><span>latest
</span><span>    </span><span class="token key" style="color:#ce9178">steps</span><span class="token" style="color:#d4d4d4">:</span><span>
</span><span>      </span><span class="token" style="color:#d4d4d4">-</span><span> </span><span class="token key" style="color:#ce9178">name</span><span class="token" style="color:#d4d4d4">:</span><span> Checkout
</span><span>        </span><span class="token key" style="color:#ce9178">uses</span><span class="token" style="color:#d4d4d4">:</span><span> actions/checkout@v2.3.1
</span><span>        </span><span class="token key" style="color:#ce9178">with</span><span class="token" style="color:#d4d4d4">:</span><span>
</span><span>          </span><span class="token key" style="color:#ce9178">persist-credentials</span><span class="token" style="color:#d4d4d4">:</span><span> </span><span class="token" style="color:#569cd6">false</span><span>
</span>
<span>      </span><span class="token" style="color:#d4d4d4">-</span><span> </span><span class="token key" style="color:#ce9178">name</span><span class="token" style="color:#d4d4d4">:</span><span> Cache
</span><span>        </span><span class="token key" style="color:#ce9178">uses</span><span class="token" style="color:#d4d4d4">:</span><span> actions/cache@v2
</span><span>        </span><span class="token key" style="color:#ce9178">with</span><span class="token" style="color:#d4d4d4">:</span><span>
</span><span>          </span><span class="token key" style="color:#ce9178">path</span><span class="token" style="color:#d4d4d4">:</span><span> $</span><span class="token" style="color:#d4d4d4">{</span><span class="token" style="color:#d4d4d4">{</span><span> github.workspace </span><span class="token" style="color:#d4d4d4">}</span><span class="token" style="color:#d4d4d4">}</span><span>/.next/cache
</span><span>          </span><span class="token key" style="color:#ce9178">key</span><span class="token" style="color:#d4d4d4">:</span><span> $</span><span class="token" style="color:#d4d4d4">{</span><span class="token" style="color:#d4d4d4">{</span><span> runner.os </span><span class="token" style="color:#d4d4d4">}</span><span class="token" style="color:#d4d4d4">}</span><span class="token" style="color:#d4d4d4">-</span><span>nextjs</span><span class="token" style="color:#d4d4d4">-</span><span>$</span><span class="token" style="color:#d4d4d4">{</span><span class="token" style="color:#d4d4d4">{</span><span> hashFiles(&#x27;</span><span class="token" style="color:#569cd6">**/package-lock.json&#x27;)</span><span> </span><span class="token" style="color:#d4d4d4">}</span><span class="token" style="color:#d4d4d4">}</span><span>
</span>
<span>      </span><span class="token" style="color:#d4d4d4">-</span><span> </span><span class="token key" style="color:#ce9178">name</span><span class="token" style="color:#d4d4d4">:</span><span> Install and Build
</span><span>        </span><span class="token key" style="color:#ce9178">uses</span><span class="token" style="color:#d4d4d4">:</span><span> actions/setup</span><span class="token" style="color:#d4d4d4">-</span><span>node@v3
</span><span>        </span><span class="token key" style="color:#ce9178">with</span><span class="token" style="color:#d4d4d4">:</span><span>
</span><span>          </span><span class="token key" style="color:#ce9178">node-version</span><span class="token" style="color:#d4d4d4">:</span><span> </span><span class="token" style="color:#b5cea8">16</span><span>
</span><span>      </span><span class="token" style="color:#d4d4d4">-</span><span> </span><span class="token key" style="color:#ce9178">run</span><span class="token" style="color:#d4d4d4">:</span><span> npm install
</span><span>      </span><span class="token" style="color:#d4d4d4">-</span><span> </span><span class="token key" style="color:#ce9178">run</span><span class="token" style="color:#d4d4d4">:</span><span> npm run transMD
</span><span>      </span><span class="token" style="color:#d4d4d4">-</span><span> </span><span class="token key" style="color:#ce9178">run</span><span class="token" style="color:#d4d4d4">:</span><span> npm run build
</span><span>      </span><span class="token" style="color:#d4d4d4">-</span><span> </span><span class="token key" style="color:#ce9178">run</span><span class="token" style="color:#d4d4d4">:</span><span> npm run export
</span><span>        </span><span class="token key" style="color:#ce9178">env</span><span class="token" style="color:#d4d4d4">:</span><span>
</span><span>            </span><span class="token key" style="color:#ce9178">CI</span><span class="token" style="color:#d4d4d4">:</span><span> </span><span class="token" style="color:#569cd6">true</span><span>
</span><span>      </span><span class="token" style="color:#d4d4d4">-</span><span> </span><span class="token key" style="color:#ce9178">run</span><span class="token" style="color:#d4d4d4">:</span><span> touch out/.nojekyll
</span>
<span>      </span><span class="token" style="color:#d4d4d4">-</span><span> </span><span class="token key" style="color:#ce9178">name</span><span class="token" style="color:#d4d4d4">:</span><span> Deploy
</span><span>        </span><span class="token key" style="color:#ce9178">uses</span><span class="token" style="color:#d4d4d4">:</span><span> JamesIves/github</span><span class="token" style="color:#d4d4d4">-</span><span>pages</span><span class="token" style="color:#d4d4d4">-</span><span>deploy</span><span class="token" style="color:#d4d4d4">-</span><span>action@3.7.1
</span><span>        </span><span class="token key" style="color:#ce9178">with</span><span class="token" style="color:#d4d4d4">:</span><span>
</span><span>          </span><span class="token key" style="color:#ce9178">GITHUB_TOKEN</span><span class="token" style="color:#d4d4d4">:</span><span> $</span><span class="token" style="color:#d4d4d4">{</span><span class="token" style="color:#d4d4d4">{</span><span> secrets.GITHUB_TOKEN </span><span class="token" style="color:#d4d4d4">}</span><span class="token" style="color:#d4d4d4">}</span><span>
</span><span>          </span><span class="token key" style="color:#ce9178">BRANCH</span><span class="token" style="color:#d4d4d4">:</span><span> lj</span><span class="token" style="color:#d4d4d4">-</span><span>pages
</span><span>          </span><span class="token key" style="color:#ce9178">FOLDER</span><span class="token" style="color:#d4d4d4">:</span><span> out </span><span class="token" style="color:#6a9955"># The folder the action should deploy.</span><span>
</span><span>          </span><span class="token key" style="color:#ce9178">CLEAN</span><span class="token" style="color:#d4d4d4">:</span><span> </span><span class="token" style="color:#569cd6">true</span><span> </span><span class="token" style="color:#6a9955"># Automatically remove deleted files from the deploy branch</span><span>
</span></code></pre></div></pre></div></div></main></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"metaData":{"title":"Git-Workflow","description":"解决开发之后需要做的事，打包上线","tags":["Git"],"keywords":["Git"],"id":"gitworkflow","create":1682416219022,"lastUpdate":1691563143950},"content":{"compiledSource":"/*@jsxRuntime automatic @jsxImportSource react*/\nconst {Fragment: _Fragment, jsx: _jsx, jsxs: _jsxs} = arguments[0];\nconst {useMDXComponents: _provideComponents} = arguments[0];\nfunction _createMdxContent(props) {\n  const _components = Object.assign({\n    h1: \"h1\",\n    p: \"p\",\n    code: \"code\",\n    pre: \"pre\"\n  }, _provideComponents(), props.components);\n  return _jsxs(_Fragment, {\n    children: [_jsx(_components.h1, {\n      children: \"Git Workflow\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"解决开发之后需要做的事，打包上线\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"在项目根目录添加 .github/workflows/integrate.yml\"\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"真的是气死个人，这段yml是cv来的，别人就能正常运行，但是我拿过来就报错。首先就是报错NextJS包里有\", _jsx(_components.code, {\n        children: \"appKey??**\"\n      }), \",\\n一开始我看到这个还以为是这个包里有ES6语法，编译出问题。就用babel.config配置去编译node_modules，我也不知道编译对了没有总之没有生效，想来是错了\\n后来我用windows的node环境试了一下这个语法发现node是可以用的，于是我猜测会不会是workflows的node版本过低，升级了版本就好了。。。。\"]\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsx(_components.code, {\n        className: \"language-yml:.github/workflows/integrate.yml\",\n        children: \"name: Build and Deploy\\non: \\n  push:\\n    branches:\\n      - blog-next\\njobs:\\n  build-and-deploy:\\n    # 虚拟机环境 ubuntu-latest，ubuntu-18.04或ubuntu-16.04\\n    # windows-latest，windows-2019或windows-2016\\n    # macOS-latest或macOS-10.14\\n    runs-on: ubuntu-latest\\n    steps:\\n      - name: Checkout\\n        uses: actions/checkout@v2.3.1\\n        with:\\n          persist-credentials: false\\n\\n      - name: Cache\\n        uses: actions/cache@v2\\n        with:\\n          path: ${{ github.workspace }}/.next/cache\\n          key: ${{ runner.os }}-nextjs-${{ hashFiles('**/package-lock.json') }}\\n\\n      - name: Install and Build\\n        uses: actions/setup-node@v3\\n        with:\\n          node-version: 16\\n      - run: npm install\\n      - run: npm run transMD\\n      - run: npm run build\\n      - run: npm run export\\n        env:\\n            CI: true\\n      - run: touch out/.nojekyll\\n\\n      - name: Deploy\\n        uses: JamesIves/github-pages-deploy-action@3.7.1\\n        with:\\n          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}\\n          BRANCH: lj-pages\\n          FOLDER: out # The folder the action should deploy.\\n          CLEAN: true # Automatically remove deleted files from the deploy branch\\n\"\n      })\n    })]\n  });\n}\nfunction MDXContent(props = {}) {\n  const {wrapper: MDXLayout} = Object.assign({}, _provideComponents(), props.components);\n  return MDXLayout ? _jsx(MDXLayout, Object.assign({}, props, {\n    children: _jsx(_createMdxContent, props)\n  })) : _createMdxContent(props);\n}\nreturn {\n  default: MDXContent\n};\n","frontmatter":{},"scope":{}}},"__N_SSG":true},"page":"/blog/detail/[id]","query":{"id":"gitworkflow"},"buildId":"c357VijpmtsGzoX5JAqmr","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>