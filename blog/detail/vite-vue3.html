<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><title>(*^▽^*)</title><meta name="next-head-count" content="3"/><link rel="preload" href="/_next/static/css/80a95484ea2876e6.css" as="style"/><link rel="stylesheet" href="/_next/static/css/80a95484ea2876e6.css" data-n-g=""/><link rel="preload" href="/_next/static/css/f8f6338530cfd437.css" as="style"/><link rel="stylesheet" href="/_next/static/css/f8f6338530cfd437.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/_next/static/chunks/webpack-ee7e63bc15b31913.js" defer=""></script><script src="/_next/static/chunks/framework-2c79e2a64abdb08b.js" defer=""></script><script src="/_next/static/chunks/main-7477d36a73a3487c.js" defer=""></script><script src="/_next/static/chunks/pages/_app-d15f243f6b85624f.js" defer=""></script><script src="/_next/static/chunks/171-0943d13a71220321.js" defer=""></script><script src="/_next/static/chunks/pages/blog/detail/%5Bid%5D-0499978da9bd8e44.js" defer=""></script><script src="/_next/static/HP81LP17NPlwa6Lp7DH3o/_buildManifest.js" defer=""></script><script src="/_next/static/HP81LP17NPlwa6Lp7DH3o/_ssgManifest.js" defer=""></script><style id="__jsx-1471609662">.file-name-container.jsx-1471609662{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;width:100%;max-width:100%;background-color:#1d2b35d9;padding:-webkit-calc(.5rem + .2vw);padding:-moz-calc(.5rem + .2vw);padding:calc(.5rem + .2vw);-webkit-border-top-left-radius:5px;-moz-border-radius-topleft:5px;border-top-left-radius:5px;-webkit-border-top-right-radius:5px;-moz-border-radius-topright:5px;border-top-right-radius:5px;margin-top:1vh;white-space:pre-wrap;word-wrap:break-word;overflow-wrap:break-word}.file-name.jsx-1471609662{font-family:"Share Tech Mono",monospace;font-size:-webkit-calc(.9rem + .1vw);font-size:-moz-calc(.9rem + .1vw);font-size:calc(.9rem + .1vw);color:#fffecbf2}</style></head><body><div id="__next"><div class="layout_main-container__jR90l"><main class="layout_main__E22hH"><div style="width:15em"><nav class="sidebar_nav__EFmKd"><div class="Avatar_container__egCID"><div class="Avatar_image-container__9WrGh"><img src="/images/avatar.png" alt="mingjianglong" class="Avatar_avatar__oORu6"/><h2>龙江</h2><h3 style="font-weight:normal;padding-top:.6em;color:grey">Jiang Long</h3><h4 style="padding-top:1.3em">等风也等你~</h4><span class="Avatar_my-face__hbhE_">ღゝ◡╹)ノ♡</span></div><div></div></div><a style="color:black" href="/">开心☺</a><a style="color:black" href="/blog">Blog</a><a style="color:black" href="/archive">归档</a><a style="color:black" href="/resume">简介</a></nav></div><div style="flex:1;height:100vh;display:flex;flex-direction:column;overflow-y:hidden"><div style="height:100%;padding:7em;overflow:scroll"><h1 style="font-family:&#x27;Ubuntu&#x27;, sans-serif;font-size:calc(1rem + 1.5vw);color:#1d2b35;padding:1em 0;overflow-wrap:break-word">vue3 学习</h1>
<p style="font-family:&#x27;Source Sans Pro&#x27;, sans-serif;font-size:calc(1rem + 0.1vw);color:#071013f2;margin:0vh 0 1vh 0;overflow-wrap:break-word">vue3搭建一个小项目，项目用于公司零售柜价格设置。项目选型之所以选vue3，主要是用了我之前很久远的一个Vue2脚手架,写起来有点膈手，外加上vue3在国内火，想着是小项目就随便我折腾了</p>
<p style="font-family:&#x27;Source Sans Pro&#x27;, sans-serif;font-size:calc(1rem + 0.1vw);color:#071013f2;margin:0vh 0 1vh 0;overflow-wrap:break-word">首先去搜索引擎找了一个脚手架vite,一路enter就好了。对了vue3的全局状态管理推荐用<strong style="font-family:&#x27;Source Sans Pro&#x27;, sans-serif;font-size:calc(1rem + 0.1vw);font-style:normal;font-weight:bold;color:#1d2b35f2;margin:0vh 0 1vh 0;overflow-wrap:break-word">pinia</strong>了，狗头保命...之前我都没听说这个玩意</p>
<blockquote style="font-style:italic;background-color:#20a4f326;padding:10px;margin:1vh 0 1vh 0;border-left:5px solid #20a4f3e6">
<p style="font-family:&#x27;Source Sans Pro&#x27;, sans-serif;font-size:calc(1rem + 0.1vw);color:#071013f2;margin:0vh 0 1vh 0;overflow-wrap:break-word">npm create vite@latest</p>
</blockquote>
<p style="font-family:&#x27;Source Sans Pro&#x27;, sans-serif;font-size:calc(1rem + 0.1vw);color:#071013f2;margin:0vh 0 1vh 0;overflow-wrap:break-word">创建完了，跑起项目就 可以看到&quot;Hello World&quot;了。</p>
<p style="font-family:&#x27;Source Sans Pro&#x27;, sans-serif;font-size:calc(1rem + 0.1vw);color:#071013f2;margin:0vh 0 1vh 0;overflow-wrap:break-word">我这边是一个H5项目，需要做屏幕适配。所以 <span class="SyntaxHighlighter_key-words__9bKIe">postcss-pxtorem</span>+ <span class="SyntaxHighlighter_key-words__9bKIe">autoprefixer</span>+<span class="SyntaxHighlighter_key-words__9bKIe">amfe-flexible</span> install到项目里，然后按照demo配置一下。最主要的就是<span class="SyntaxHighlighter_key-words__9bKIe">rootValue</span>这个属性，设计稿除以10</p>
<pre><div class="jsx-1471609662"><div class="jsx-1471609662 file-name-container"><p class="jsx-1471609662 file-name">.postcssrc.cjs</p></div><pre class="language-JS:.postcssrc.cjs" style="color:#1d2b35;font-size:13px;text-shadow:none;font-family:Menlo, Monaco, Consolas, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, &quot;Courier New&quot;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.2;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:0px;overflow:auto;background:#1e1e1e;background-color:#071013f2;padding-bottom:1em;margin-bottom:1vh;border-bottom-left-radius:5px;border-bottom-right-radius:5px"><code class="language-js" style="color:#d4d4d4;font-size:calc(0.8rem + 0.1vw);text-shadow:none;font-family:Menlo, Monaco, Consolas, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, &quot;Courier New&quot;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.2;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span> module</span><span class="token" style="color:#d4d4d4">.</span><span class="token property-access">exports</span><span> </span><span class="token" style="color:#d4d4d4">=</span><span> </span><span class="token" style="color:#d4d4d4">{</span><span>
</span><span>  </span><span class="token literal-property" style="color:#9cdcfe">plugins</span><span class="token" style="color:#d4d4d4">:</span><span> </span><span class="token" style="color:#d4d4d4">{</span><span>
</span><span>    </span><span class="token literal-property" style="color:#9cdcfe">autoprefixer</span><span class="token" style="color:#d4d4d4">:</span><span> </span><span class="token" style="color:#d4d4d4">{</span><span>
</span><span>      </span><span class="token literal-property" style="color:#9cdcfe">Browserslist</span><span class="token" style="color:#d4d4d4">:</span><span> </span><span class="token" style="color:#d4d4d4">[</span><span class="token" style="color:#ce9178">&quot;Android &gt;= 4.0&quot;</span><span class="token" style="color:#d4d4d4">,</span><span> </span><span class="token" style="color:#ce9178">&quot;iOS &gt;= 7&quot;</span><span class="token" style="color:#d4d4d4">]</span><span class="token" style="color:#d4d4d4">,</span><span>
</span><span>    </span><span class="token" style="color:#d4d4d4">}</span><span class="token" style="color:#d4d4d4">,</span><span>
</span><span>    </span><span class="token string-property" style="color:#9cdcfe">&quot;postcss-pxtorem&quot;</span><span class="token" style="color:#d4d4d4">:</span><span> </span><span class="token" style="color:#d4d4d4">{</span><span>
</span><span>      </span><span class="token literal-property" style="color:#9cdcfe">rootValue</span><span class="token" style="color:#d4d4d4">:</span><span> </span><span class="token" style="color:#b5cea8">37.5</span><span class="token" style="color:#d4d4d4">,</span><span> </span><span class="token" style="color:#6a9955">//结果为：设计稿元素尺寸/37.5，比如元素宽375px,最终页面会换算成 10rem</span><span>
</span><span>      </span><span class="token literal-property" style="color:#9cdcfe">propList</span><span class="token" style="color:#d4d4d4">:</span><span> </span><span class="token" style="color:#d4d4d4">[</span><span class="token" style="color:#ce9178">&quot;*&quot;</span><span class="token" style="color:#d4d4d4">]</span><span class="token" style="color:#d4d4d4">,</span><span>
</span><span>      </span><span class="token" style="color:#6a9955">// 黑名单</span><span>
</span><span>      </span><span class="token" style="color:#6a9955">// selectorBlackList: [</span><span>
</span><span>      </span><span class="token" style="color:#6a9955">//   &#x27;van-&#x27;</span><span>
</span><span>      </span><span class="token" style="color:#6a9955">// ],</span><span>
</span><span>    </span><span class="token" style="color:#d4d4d4">}</span><span class="token" style="color:#d4d4d4">,</span><span>
</span><span>  </span><span class="token" style="color:#d4d4d4">}</span><span class="token" style="color:#d4d4d4">,</span><span>
</span><span></span><span class="token" style="color:#d4d4d4">}</span><span class="token" style="color:#d4d4d4">;</span><span>
</span></code></pre></div></pre>
<p style="font-family:&#x27;Source Sans Pro&#x27;, sans-serif;font-size:calc(1rem + 0.1vw);color:#071013f2;margin:0vh 0 1vh 0;overflow-wrap:break-word">UI整的是<span class="SyntaxHighlighter_key-words__9bKIe">Vant</span>,为什么用这个，我也很纳闷，设计又不按照这个UI组件设计，领导又让用这个库，总之项目Ui自定义高就别用什么组件了,自己费尽整一套就好，</p>
<p style="font-family:&#x27;Source Sans Pro&#x27;, sans-serif;font-size:calc(1rem + 0.1vw);color:#071013f2;margin:0vh 0 1vh 0;overflow-wrap:break-word">最后整个<span class="SyntaxHighlighter_key-words__9bKIe">axios</span>和css预编译,框框就差不多了。</p>
<p style="font-family:&#x27;Source Sans Pro&#x27;, sans-serif;font-size:calc(1rem + 0.1vw);color:#071013f2;margin:0vh 0 1vh 0;overflow-wrap:break-word">接着就是看一下Vue APi 配方和以前大差不差。以前很讨厌vue整一个大对象，把所有的东西都塞里面，看起来很廉价。现在这个组合式的感觉像是那么回事了。</p>
<ul style="font-family:&#x27;Source Sans Pro&#x27;, sans-serif;font-size:calc(1rem + 0.1vw);color:#071013e6;margin:1vh 0 1vh calc(2vw);overflow-wrap:break-word">
<li>defineProps</li>
<li>defineEmit</li>
<li>defineProps</li>
<li>watch</li>
<li>watEffect</li>
<li>ref</li>
<li>reactive</li>
<li>computed</li>
<li>...</li>
</ul>
<p style="font-family:&#x27;Source Sans Pro&#x27;, sans-serif;font-size:calc(1rem + 0.1vw);color:#071013f2;margin:0vh 0 1vh 0;overflow-wrap:break-word">对了我的编辑器是vscode,如果要用vue3 就不要用<span class="SyntaxHighlighter_key-words__9bKIe">vuter</span>了提示支持不友好，新的插件<span class="SyntaxHighlighter_key-words__9bKIe">volar</span>，如果vscode下载不下来就需要去官网下载，把包里package.json vscode版本改的和自己编辑器的版本一眼,再手动安装,详细教程搜索引擎自取。</p>
<p style="font-family:&#x27;Source Sans Pro&#x27;, sans-serif;font-size:calc(1rem + 0.1vw);color:#071013f2;margin:0vh 0 1vh 0;overflow-wrap:break-word">中间碰到一个很恶心的事情,Vant的组件有很多自定义css样式,想全局修改。index.html修改失败，按照官网的:root:root也不行，最后就整了一个js文件在入口统一修改...囧</p>
<pre><pre class="language-JS" style="color:#d4d4d4;font-size:calc(0.9rem + 0.1vw);text-shadow:none;font-family:Menlo, Monaco, Consolas, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, &quot;Courier New&quot;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.2;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto;background:#1e1e1e;background-color:#071013f2;margin-top:1vh;margin-bottom:1vh;border-radius:5px;padding-bottom:1em"><code class="language-js" style="color:#d4d4d4;font-size:calc(0.8rem + 0.1vw);text-shadow:none;font-family:Menlo, Monaco, Consolas, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, &quot;Courier New&quot;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.2;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span>  </span><span class="token" style="color:#c586c0">export</span><span> </span><span class="token" style="color:#569CD6">function</span><span> </span><span class="token" style="color:#dcdcaa">updateVantCSSVar</span><span class="token" style="color:#d4d4d4">(</span><span class="token" style="color:#d4d4d4">)</span><span> </span><span class="token" style="color:#d4d4d4">{</span><span>
</span><span>    </span><span class="token" style="color:#569CD6">let</span><span> cssVar </span><span class="token" style="color:#d4d4d4">=</span><span> </span><span class="token" style="color:#d4d4d4">[</span><span>
</span><span>      </span><span class="token" style="color:#d4d4d4">[</span><span class="token" style="color:#ce9178">&#x27;--van-tabs-bottom-bar-color&#x27;</span><span class="token" style="color:#d4d4d4">,</span><span> </span><span class="token" style="color:#ce9178">&#x27;#FF7500&#x27;</span><span class="token" style="color:#d4d4d4">]</span><span class="token" style="color:#d4d4d4">,</span><span>
</span><span>      </span><span class="token" style="color:#d4d4d4">[</span><span class="token" style="color:#ce9178">&#x27;--van-tabs-nav-background&#x27;</span><span class="token" style="color:#d4d4d4">,</span><span> </span><span class="token" style="color:#ce9178">&#x27;transparent&#x27;</span><span class="token" style="color:#d4d4d4">]</span><span class="token" style="color:#d4d4d4">,</span><span>
</span><span>      </span><span class="token" style="color:#d4d4d4">[</span><span class="token" style="color:#ce9178">&#x27;--van-field-label-width&#x27;</span><span class="token" style="color:#d4d4d4">,</span><span> </span><span class="token" style="color:#ce9178">&#x27;5.5em&#x27;</span><span class="token" style="color:#d4d4d4">]</span><span class="token" style="color:#d4d4d4">,</span><span>
</span><span>    </span><span class="token" style="color:#d4d4d4">]</span><span>
</span>
<span>    cssVar</span><span class="token" style="color:#d4d4d4">.</span><span class="token method property-access" style="color:#dcdcaa">forEach</span><span class="token" style="color:#d4d4d4">(</span><span class="token" style="color:#9cdcfe">item</span><span> </span><span class="token" style="color:#569CD6">=&gt;</span><span> </span><span class="token" style="color:#d4d4d4">{</span><span>
</span><span>      </span><span class="token dom" style="color:#9cdcfe">document</span><span class="token" style="color:#d4d4d4">.</span><span class="token property-access">documentElement</span><span class="token" style="color:#d4d4d4">.</span><span class="token property-access">style</span><span class="token" style="color:#d4d4d4">.</span><span class="token method property-access" style="color:#dcdcaa">setProperty</span><span class="token" style="color:#d4d4d4">(</span><span>item</span><span class="token" style="color:#d4d4d4">[</span><span class="token" style="color:#b5cea8">0</span><span class="token" style="color:#d4d4d4">]</span><span class="token" style="color:#d4d4d4">,</span><span> item</span><span class="token" style="color:#d4d4d4">[</span><span class="token" style="color:#b5cea8">1</span><span class="token" style="color:#d4d4d4">]</span><span class="token" style="color:#d4d4d4">)</span><span>
</span><span>    </span><span class="token" style="color:#d4d4d4">}</span><span class="token" style="color:#d4d4d4">)</span><span>
</span><span>  </span><span class="token" style="color:#d4d4d4">}</span><span>
</span></code></pre></pre>
<p style="font-family:&#x27;Source Sans Pro&#x27;, sans-serif;font-size:calc(1rem + 0.1vw);color:#071013f2;margin:0vh 0 1vh 0;overflow-wrap:break-word">顺路又学了一下less定义全局变量</p>
<pre><div class="jsx-1471609662"><div class="jsx-1471609662 file-name-container"><p class="jsx-1471609662 file-name">VITE.CONFIG.JS</p></div><pre class="language-JS:VITE.CONFIG.JS" style="color:#1d2b35;font-size:13px;text-shadow:none;font-family:Menlo, Monaco, Consolas, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, &quot;Courier New&quot;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.2;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:0px;overflow:auto;background:#1e1e1e;background-color:#071013f2;padding-bottom:1em;margin-bottom:1vh;border-bottom-left-radius:5px;border-bottom-right-radius:5px"><code class="language-js" style="color:#d4d4d4;font-size:calc(0.8rem + 0.1vw);text-shadow:none;font-family:Menlo, Monaco, Consolas, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, &quot;Courier New&quot;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.2;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:#6a9955">// VITE.CONFIG.JS</span><span>
</span><span></span><span class="token" style="color:#c586c0">export</span><span> </span><span class="token" style="color:#c586c0">default</span><span> </span><span class="token" style="color:#dcdcaa">defineConfig</span><span class="token" style="color:#d4d4d4">(</span><span class="token" style="color:#d4d4d4">(</span><span class="token" style="color:#d4d4d4">{</span><span class="token" style="color:#9cdcfe"> mode </span><span class="token" style="color:#d4d4d4">}</span><span class="token" style="color:#d4d4d4">)</span><span> </span><span class="token" style="color:#569CD6">=&gt;</span><span> </span><span class="token" style="color:#d4d4d4">{</span><span>
</span><span>  </span><span class="token" style="color:#c586c0">return</span><span> </span><span class="token" style="color:#d4d4d4">{</span><span>
</span><span>    </span><span class="token literal-property" style="color:#9cdcfe">css</span><span class="token" style="color:#d4d4d4">:</span><span> </span><span class="token" style="color:#d4d4d4">{</span><span>
</span><span>      </span><span class="token literal-property" style="color:#9cdcfe">preprocessorOptions</span><span class="token" style="color:#d4d4d4">:</span><span> </span><span class="token" style="color:#d4d4d4">{</span><span>
</span><span>        </span><span class="token literal-property" style="color:#9cdcfe">less</span><span class="token" style="color:#d4d4d4">:</span><span> </span><span class="token" style="color:#d4d4d4">{</span><span>
</span><span>          </span><span class="token literal-property" style="color:#9cdcfe">modifyVars</span><span class="token" style="color:#d4d4d4">:</span><span> </span><span class="token" style="color:#d4d4d4">{</span><span>
</span><span>            </span><span class="token" style="color:#6a9955">// 这个用来定义全局变量的</span><span>
</span><span>            </span><span class="token literal-property" style="color:#9cdcfe">hack</span><span class="token" style="color:#d4d4d4">:</span><span> </span><span class="token template-string template-punctuation" style="color:#ce9178">`</span><span class="token template-string" style="color:#ce9178">true; @import &quot;</span><span class="token template-string" style="color:#569cd6">${</span><span class="token template-string" style="color:#9cdcfe">path</span><span class="token template-string" style="color:#d4d4d4">.</span><span class="token template-string method property-access" style="color:#dcdcaa">resolve</span><span class="token template-string" style="color:#d4d4d4">(</span><span class="token template-string" style="color:#9cdcfe">__dirname</span><span class="token template-string" style="color:#d4d4d4">,</span><span class="token template-string" style="color:#9cdcfe"> </span><span class="token template-string" style="color:#ce9178">&quot;./src/assets/css/base.less&quot;</span><span class="token template-string" style="color:#d4d4d4">)</span><span class="token template-string" style="color:#569cd6">}</span><span class="token template-string" style="color:#ce9178">&quot;</span><span class="token template-string template-punctuation" style="color:#ce9178">`</span><span>
</span><span>            </span><span class="token" style="color:#6a9955">// &#x27;--van-field-label-width&#x27;: &#x27;6.3em&#x27;</span><span>
</span><span>          </span><span class="token" style="color:#d4d4d4">}</span><span class="token" style="color:#d4d4d4">,</span><span>
</span><span>          </span><span class="token literal-property" style="color:#9cdcfe">globalVars</span><span class="token" style="color:#d4d4d4">:</span><span> </span><span class="token" style="color:#d4d4d4">{</span><span>
</span>
<span>          </span><span class="token" style="color:#d4d4d4">}</span><span class="token" style="color:#d4d4d4">,</span><span>
</span><span>        </span><span class="token" style="color:#d4d4d4">}</span><span>
</span><span>      </span><span class="token" style="color:#d4d4d4">}</span><span>
</span><span>    </span><span class="token" style="color:#d4d4d4">}</span><span>
</span><span>  </span><span class="token" style="color:#d4d4d4">}</span><span>
</span><span></span><span class="token" style="color:#d4d4d4">}</span><span class="token" style="color:#d4d4d4">)</span><span>
</span>
<span>  </span><span class="token" style="color:#6a9955">//base.less</span><span>
</span><span>  @test</span><span class="token" style="color:#d4d4d4">-</span><span>color</span><span class="token" style="color:#d4d4d4">:</span><span> red</span><span class="token" style="color:#d4d4d4">;</span><span>
</span><span>  @goods</span><span class="token" style="color:#d4d4d4">-</span><span>img</span><span class="token" style="color:#d4d4d4">:</span><span> 60px</span><span class="token" style="color:#d4d4d4">;</span><span>
</span><span>  @yellow</span><span class="token" style="color:#d4d4d4">:</span><span> #</span><span class="token" style="color:#9cdcfe">FF7500</span><span class="token" style="color:#d4d4d4">;</span><span>
</span>
</code></pre></div></pre>
<p style="font-family:&#x27;Source Sans Pro&#x27;, sans-serif;font-size:calc(1rem + 0.1vw);color:#071013f2;margin:0vh 0 1vh 0;overflow-wrap:break-word">最后打包，默认的是<span class="SyntaxHighlighter_key-words__9bKIe">/</span>,建议配置 <span class="SyntaxHighlighter_key-words__9bKIe">base</span>为<span class="SyntaxHighlighter_key-words__9bKIe">./</span>,不然如果项目不是在根目录就找不到静态资源了。</p>
<h3 style="font-family:&#x27;Maven Pro&#x27;, sans-serif;font-size:calc(1rem + 0.5vw);color:#1d2b35;padding:.6em 0;overflow-wrap:break-word">碰到的糟心问题</h3>
<ul style="font-family:&#x27;Source Sans Pro&#x27;, sans-serif;font-size:calc(1rem + 0.1vw);color:#071013e6;margin:1vh 0 1vh calc(2vw);overflow-wrap:break-word">
<li>
<p style="font-family:&#x27;Source Sans Pro&#x27;, sans-serif;font-size:calc(1rem + 0.1vw);color:#071013f2;margin:0vh 0 1vh 0;overflow-wrap:break-word">白屏</p>
<p style="font-family:&#x27;Source Sans Pro&#x27;, sans-serif;font-size:calc(1rem + 0.1vw);color:#071013f2;margin:0vh 0 1vh 0;overflow-wrap:break-word">如果任何报错都没有,建议检查router的模式是否用的是<span class="SyntaxHighlighter_key-words__9bKIe">history</span></p>
</li>
</ul>
<ul style="font-family:&#x27;Source Sans Pro&#x27;, sans-serif;font-size:calc(1rem + 0.1vw);color:#071013e6;margin:1vh 0 1vh calc(2vw);overflow-wrap:break-word">
<li>
<p style="font-family:&#x27;Source Sans Pro&#x27;, sans-serif;font-size:calc(1rem + 0.1vw);color:#071013f2;margin:0vh 0 1vh 0;overflow-wrap:break-word">ts中引入Vue文件报错</p>
<pre><div class="jsx-1471609662"><div class="jsx-1471609662 file-name-container"><p class="jsx-1471609662 file-name">sfc.d.ts</p></div><pre class="language-ts:sfc.d.ts" style="color:#1d2b35;font-size:13px;text-shadow:none;font-family:Menlo, Monaco, Consolas, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, &quot;Courier New&quot;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.2;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:0px;overflow:auto;background:#1e1e1e;background-color:#071013f2;padding-bottom:1em;margin-bottom:1vh;border-bottom-left-radius:5px;border-bottom-right-radius:5px"><code class="language-ts" style="color:#d4d4d4;font-size:calc(0.8rem + 0.1vw);text-shadow:none;font-family:Menlo, Monaco, Consolas, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, &quot;Courier New&quot;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.2;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span>  </span><span class="token" style="color:#6a9955">//增加一个 sfc.d.ts</span><span>
</span><span>  </span><span class="token" style="color:#569CD6">declare</span><span> </span><span class="token" style="color:#569CD6">module</span><span> </span><span class="token" style="color:#ce9178">&#x27;*.vue&#x27;</span><span> </span><span class="token" style="color:#d4d4d4">{</span><span>
</span><span>    </span><span class="token" style="color:#c586c0">import</span><span> </span><span class="token" style="color:#d4d4d4">{</span><span class="token"> </span><span class="token" style="color:#9cdcfe">ComponentOptions</span><span class="token"> </span><span class="token" style="color:#d4d4d4">}</span><span> </span><span class="token" style="color:#c586c0">from</span><span> </span><span class="token" style="color:#ce9178">&#x27;vue&#x27;</span><span>
</span><span>    </span><span class="token" style="color:#569CD6">const</span><span> componentOptions</span><span class="token" style="color:#d4d4d4">:</span><span> </span><span class="token" style="color:#4ec9b0">ComponentOptions</span><span>
</span><span>    </span><span class="token" style="color:#c586c0">export</span><span> </span><span class="token" style="color:#c586c0">default</span><span> componentOptions
</span><span>  </span><span class="token" style="color:#d4d4d4">}</span><span>
</span></code></pre></div></pre>
</li>
<li>
<p style="font-family:&#x27;Source Sans Pro&#x27;, sans-serif;font-size:calc(1rem + 0.1vw);color:#071013f2;margin:0vh 0 1vh 0;overflow-wrap:break-word">vconsole引入</p>
<pre><div class="jsx-1471609662"><div class="jsx-1471609662 file-name-container"><p class="jsx-1471609662 file-name">main.ts</p></div><pre class="language-JS:main.ts" style="color:#1d2b35;font-size:13px;text-shadow:none;font-family:Menlo, Monaco, Consolas, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, &quot;Courier New&quot;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.2;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:0px;overflow:auto;background:#1e1e1e;background-color:#071013f2;padding-bottom:1em;margin-bottom:1vh;border-bottom-left-radius:5px;border-bottom-right-radius:5px"><code class="language-js" style="color:#d4d4d4;font-size:calc(0.8rem + 0.1vw);text-shadow:none;font-family:Menlo, Monaco, Consolas, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, &quot;Courier New&quot;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.2;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span>  </span><span class="token" style="color:#c586c0">if</span><span> </span><span class="token" style="color:#d4d4d4">(</span><span class="token" style="color:#c586c0">import</span><span class="token" style="color:#d4d4d4">.</span><span class="token property-access">meta</span><span class="token" style="color:#d4d4d4">.</span><span class="token property-access">env</span><span class="token" style="color:#d4d4d4">.</span><span class="token" style="color:#9cdcfe">MODE</span><span> </span><span class="token" style="color:#d4d4d4">!==</span><span> </span><span class="token" style="color:#ce9178">&#x27;prod&#x27;</span><span class="token" style="color:#d4d4d4">)</span><span> </span><span class="token" style="color:#d4d4d4">{</span><span>
</span>
<span>    </span><span class="token" style="color:#6a9955">// 网上的教程大多是下面这种引入，实际上会报错</span><span>
</span><span>    app</span><span class="token" style="color:#d4d4d4">.</span><span class="token method property-access" style="color:#dcdcaa">use</span><span class="token" style="color:#d4d4d4">(</span><span class="token" style="color:#569CD6">new</span><span> </span><span class="token" style="color:#4ec9b0">Vconsole</span><span class="token" style="color:#d4d4d4">(</span><span class="token" style="color:#d4d4d4">)</span><span class="token" style="color:#d4d4d4">)</span><span>
</span>
<span>    </span><span class="token" style="color:#6a9955">// 以下引入可以正常使用</span><span>
</span><span>    </span><span class="token" style="color:#569CD6">new</span><span> </span><span class="token" style="color:#4ec9b0">Vconsole</span><span class="token" style="color:#d4d4d4">(</span><span class="token" style="color:#d4d4d4">)</span><span>
</span>
<span>    </span><span class="token" style="color:#6a9955">// 这种也可以</span><span>
</span><span>    app</span><span class="token" style="color:#d4d4d4">.</span><span class="token method property-access" style="color:#dcdcaa">use</span><span class="token" style="color:#d4d4d4">(</span><span class="token" style="color:#d4d4d4">(</span><span class="token" style="color:#d4d4d4">)</span><span class="token" style="color:#569CD6">=&gt;</span><span class="token" style="color:#569CD6">new</span><span> </span><span class="token" style="color:#4ec9b0">Vconsole</span><span class="token" style="color:#d4d4d4">(</span><span class="token" style="color:#d4d4d4">)</span><span class="token" style="color:#d4d4d4">)</span><span>
</span><span>  </span><span class="token" style="color:#d4d4d4">}</span><span>
</span></code></pre></div></pre>
</li>
<li>
<p style="font-family:&#x27;Source Sans Pro&#x27;, sans-serif;font-size:calc(1rem + 0.1vw);color:#071013f2;margin:0vh 0 1vh 0;overflow-wrap:break-word">部分浏览器黑屏兼容问题,版本较低的浏览器不支持ES6的语法和新API，而Babel默认只转换新的JavaScript句法，不转换新的API，比如Proxy、Symbol、Promise等全局对象，以及一些定义在全局对象上的方法都不会转码。</p>
<blockquote style="font-style:italic;background-color:#20a4f326;padding:10px;margin:1vh 0 1vh 0;border-left:5px solid #20a4f3e6">
<p style="font-family:&#x27;Source Sans Pro&#x27;, sans-serif;font-size:calc(1rem + 0.1vw);color:#071013f2;margin:0vh 0 1vh 0;overflow-wrap:break-word">yarn add @vitejs/plugin-legacy terser</p>
</blockquote>
<pre><div class="jsx-1471609662"><div class="jsx-1471609662 file-name-container"><p class="jsx-1471609662 file-name">vite.config.ts</p></div><pre class="language-ts:vite.config.ts" style="color:#1d2b35;font-size:13px;text-shadow:none;font-family:Menlo, Monaco, Consolas, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, &quot;Courier New&quot;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.2;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:0px;overflow:auto;background:#1e1e1e;background-color:#071013f2;padding-bottom:1em;margin-bottom:1vh;border-bottom-left-radius:5px;border-bottom-right-radius:5px"><code class="language-ts" style="color:#d4d4d4;font-size:calc(0.8rem + 0.1vw);text-shadow:none;font-family:Menlo, Monaco, Consolas, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, &quot;Courier New&quot;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.2;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span>  </span><span class="token" style="color:#c586c0">import</span><span> </span><span class="token">legacy</span><span> </span><span class="token" style="color:#c586c0">from</span><span> </span><span class="token" style="color:#ce9178">&#x27;@vitejs/plugin-legacy&#x27;</span><span>
</span><span>  </span><span class="token" style="color:#c586c0">export</span><span> </span><span class="token" style="color:#c586c0">default</span><span> </span><span class="token" style="color:#dcdcaa">defineConfig</span><span class="token" style="color:#d4d4d4">(</span><span class="token" style="color:#d4d4d4">(</span><span class="token" style="color:#d4d4d4">{</span><span> mode </span><span class="token" style="color:#d4d4d4">}</span><span class="token" style="color:#d4d4d4">)</span><span> </span><span class="token" style="color:#569CD6">=&gt;</span><span> </span><span class="token" style="color:#d4d4d4">{</span><span>
</span><span>    </span><span class="token" style="color:#c586c0">return</span><span> </span><span class="token" style="color:#d4d4d4">{</span><span>
</span><span>      plugins</span><span class="token" style="color:#d4d4d4">:</span><span> </span><span class="token" style="color:#d4d4d4">[</span><span>
</span><span>        </span><span class="token" style="color:#dcdcaa">legacy</span><span class="token" style="color:#d4d4d4">(</span><span class="token" style="color:#d4d4d4">{</span><span>
</span><span>          targets</span><span class="token" style="color:#d4d4d4">:</span><span> </span><span class="token" style="color:#d4d4d4">[</span><span class="token" style="color:#ce9178">&#x27;defaults&#x27;</span><span class="token" style="color:#d4d4d4">,</span><span> </span><span class="token" style="color:#ce9178">&#x27;ie &gt;= 11&#x27;</span><span class="token" style="color:#d4d4d4">,</span><span> </span><span class="token" style="color:#ce9178">&#x27;chrome 52&#x27;</span><span class="token" style="color:#d4d4d4">]</span><span class="token" style="color:#d4d4d4">,</span><span>  </span><span class="token" style="color:#6a9955">//需要兼容的目标列表，可以设置多个</span><span>
</span><span>          additionalLegacyPolyfills</span><span class="token" style="color:#d4d4d4">:</span><span> </span><span class="token" style="color:#d4d4d4">[</span><span class="token" style="color:#ce9178">&#x27;regenerator-runtime/runtime&#x27;</span><span class="token" style="color:#d4d4d4">]</span><span class="token" style="color:#d4d4d4">,</span><span>
</span><span>          renderLegacyChunks</span><span class="token" style="color:#d4d4d4">:</span><span> </span><span class="token" style="color:#569cd6">true</span><span class="token" style="color:#d4d4d4">,</span><span>
</span><span>          polyfills</span><span class="token" style="color:#d4d4d4">:</span><span> </span><span class="token" style="color:#d4d4d4">[</span><span>
</span><span>            </span><span class="token" style="color:#ce9178">&#x27;es.symbol&#x27;</span><span class="token" style="color:#d4d4d4">,</span><span>
</span><span>            </span><span class="token" style="color:#ce9178">&#x27;es.array.filter&#x27;</span><span class="token" style="color:#d4d4d4">,</span><span>
</span><span>            </span><span class="token" style="color:#ce9178">&#x27;es.promise&#x27;</span><span class="token" style="color:#d4d4d4">,</span><span>
</span><span>            </span><span class="token" style="color:#ce9178">&#x27;es.promise.finally&#x27;</span><span class="token" style="color:#d4d4d4">,</span><span>
</span><span>            </span><span class="token" style="color:#ce9178">&#x27;es/map&#x27;</span><span class="token" style="color:#d4d4d4">,</span><span>
</span><span>            </span><span class="token" style="color:#ce9178">&#x27;es/set&#x27;</span><span class="token" style="color:#d4d4d4">,</span><span>
</span><span>            </span><span class="token" style="color:#ce9178">&#x27;es.array.for-each&#x27;</span><span class="token" style="color:#d4d4d4">,</span><span>
</span><span>            </span><span class="token" style="color:#ce9178">&#x27;es.object.define-properties&#x27;</span><span class="token" style="color:#d4d4d4">,</span><span>
</span><span>            </span><span class="token" style="color:#ce9178">&#x27;es.object.define-property&#x27;</span><span class="token" style="color:#d4d4d4">,</span><span>
</span><span>            </span><span class="token" style="color:#ce9178">&#x27;es.object.get-own-property-descriptor&#x27;</span><span class="token" style="color:#d4d4d4">,</span><span>
</span><span>            </span><span class="token" style="color:#ce9178">&#x27;es.object.get-own-property-descriptors&#x27;</span><span class="token" style="color:#d4d4d4">,</span><span>
</span><span>            </span><span class="token" style="color:#ce9178">&#x27;es.object.keys&#x27;</span><span class="token" style="color:#d4d4d4">,</span><span>
</span><span>            </span><span class="token" style="color:#ce9178">&#x27;es.object.to-string&#x27;</span><span class="token" style="color:#d4d4d4">,</span><span>
</span><span>            </span><span class="token" style="color:#ce9178">&#x27;web.dom-collections.for-each&#x27;</span><span class="token" style="color:#d4d4d4">,</span><span>
</span><span>            </span><span class="token" style="color:#ce9178">&#x27;esnext.global-this&#x27;</span><span class="token" style="color:#d4d4d4">,</span><span>
</span><span>            </span><span class="token" style="color:#ce9178">&#x27;esnext.string.match-all&#x27;</span><span>
</span><span>          </span><span class="token" style="color:#d4d4d4">]</span><span>
</span><span>        </span><span class="token" style="color:#d4d4d4">}</span><span class="token" style="color:#d4d4d4">)</span><span>
</span><span>      </span><span class="token" style="color:#d4d4d4">]</span><span class="token" style="color:#d4d4d4">,</span><span>
</span><span>      resolve</span><span class="token" style="color:#d4d4d4">:</span><span> </span><span class="token" style="color:#d4d4d4">{</span><span>
</span><span>        alias</span><span class="token" style="color:#d4d4d4">:</span><span> </span><span class="token" style="color:#d4d4d4">{</span><span>
</span><span>          </span><span class="token string-property" style="color:#9cdcfe">&#x27;@&#x27;</span><span class="token" style="color:#d4d4d4">:</span><span> path</span><span class="token" style="color:#d4d4d4">.</span><span class="token method property-access" style="color:#dcdcaa">resolve</span><span class="token" style="color:#d4d4d4">(</span><span>__dirname</span><span class="token" style="color:#d4d4d4">,</span><span> </span><span class="token" style="color:#ce9178">&#x27;src&#x27;</span><span class="token" style="color:#d4d4d4">)</span><span class="token" style="color:#d4d4d4">,</span><span>
</span><span>        </span><span class="token" style="color:#d4d4d4">}</span><span class="token" style="color:#d4d4d4">,</span><span>
</span><span>      </span><span class="token" style="color:#d4d4d4">}</span><span class="token" style="color:#d4d4d4">,</span><span>
</span><span>      server</span><span class="token" style="color:#d4d4d4">:</span><span> </span><span class="token" style="color:#d4d4d4">{</span><span> </span><span class="token" style="color:#d4d4d4">}</span><span class="token" style="color:#d4d4d4">,</span><span>
</span><span>      css</span><span class="token" style="color:#d4d4d4">:</span><span> </span><span class="token" style="color:#d4d4d4">{</span><span> </span><span class="token" style="color:#d4d4d4">}</span><span>
</span><span>    </span><span class="token" style="color:#d4d4d4">}</span><span>
</span><span>  </span><span class="token" style="color:#d4d4d4">}</span><span class="token" style="color:#d4d4d4">)</span><span>
</span></code></pre></div></pre>
</li>
</ul></div></div></main></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"metaData":{"title":"vue3 学习","description":"vue3搭建一个小项目，项目用于公司零售柜价格设置。项目选型之所以选vue3，主要是用了我之前很久远的一个Vue2脚手架,写起来有点膈手，外加上vue3在国内火，想着是小项目就随便我折腾了。","tags":["Vue3"],"keywords":["Vue3"],"id":"vite-vue3","create":1705631674815,"lastUpdate":1705650397304},"content":{"compiledSource":"/*@jsxRuntime automatic @jsxImportSource react*/\nconst {Fragment: _Fragment, jsx: _jsx, jsxs: _jsxs} = arguments[0];\nconst {useMDXComponents: _provideComponents} = arguments[0];\nfunction _createMdxContent(props) {\n  const _components = Object.assign({\n    h1: \"h1\",\n    p: \"p\",\n    strong: \"strong\",\n    blockquote: \"blockquote\",\n    code: \"code\",\n    pre: \"pre\",\n    ul: \"ul\",\n    li: \"li\",\n    h3: \"h3\"\n  }, _provideComponents(), props.components);\n  return _jsxs(_Fragment, {\n    children: [_jsx(_components.h1, {\n      children: \"vue3 学习\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"vue3搭建一个小项目，项目用于公司零售柜价格设置。项目选型之所以选vue3，主要是用了我之前很久远的一个Vue2脚手架,写起来有点膈手，外加上vue3在国内火，想着是小项目就随便我折腾了\"\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"首先去搜索引擎找了一个脚手架vite,一路enter就好了。对了vue3的全局状态管理推荐用\", _jsx(_components.strong, {\n        children: \"pinia\"\n      }), \"了，狗头保命...之前我都没听说这个玩意\"]\n    }), \"\\n\", _jsxs(_components.blockquote, {\n      children: [\"\\n\", _jsx(_components.p, {\n        children: \"npm create vite@latest\"\n      }), \"\\n\"]\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"创建完了，跑起项目就 可以看到\\\"Hello World\\\"了。\"\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"我这边是一个H5项目，需要做屏幕适配。所以 \", _jsx(_components.code, {\n        children: \"postcss-pxtorem\"\n      }), \"+ \", _jsx(_components.code, {\n        children: \"autoprefixer\"\n      }), \"+\", _jsx(_components.code, {\n        children: \"amfe-flexible\"\n      }), \" install到项目里，然后按照demo配置一下。最主要的就是\", _jsx(_components.code, {\n        children: \"rootValue\"\n      }), \"这个属性，设计稿除以10\"]\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsx(_components.code, {\n        className: \"language-JS:.postcssrc.cjs\",\n        children: \" module.exports = {\\n  plugins: {\\n    autoprefixer: {\\n      Browserslist: [\\\"Android \u003e= 4.0\\\", \\\"iOS \u003e= 7\\\"],\\n    },\\n    \\\"postcss-pxtorem\\\": {\\n      rootValue: 37.5, //结果为：设计稿元素尺寸/37.5，比如元素宽375px,最终页面会换算成 10rem\\n      propList: [\\\"*\\\"],\\n      // 黑名单\\n      // selectorBlackList: [\\n      //   'van-'\\n      // ],\\n    },\\n  },\\n};\\n\"\n      })\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"UI整的是\", _jsx(_components.code, {\n        children: \"Vant\"\n      }), \",为什么用这个，我也很纳闷，设计又不按照这个UI组件设计，领导又让用这个库，总之项目Ui自定义高就别用什么组件了,自己费尽整一套就好，\"]\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"最后整个\", _jsx(_components.code, {\n        children: \"axios\"\n      }), \"和css预编译,框框就差不多了。\"]\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"接着就是看一下Vue APi 配方和以前大差不差。以前很讨厌vue整一个大对象，把所有的东西都塞里面，看起来很廉价。现在这个组合式的感觉像是那么回事了。\"\n    }), \"\\n\", _jsxs(_components.ul, {\n      children: [\"\\n\", _jsx(_components.li, {\n        children: \"defineProps\"\n      }), \"\\n\", _jsx(_components.li, {\n        children: \"defineEmit\"\n      }), \"\\n\", _jsx(_components.li, {\n        children: \"defineProps\"\n      }), \"\\n\", _jsx(_components.li, {\n        children: \"watch\"\n      }), \"\\n\", _jsx(_components.li, {\n        children: \"watEffect\"\n      }), \"\\n\", _jsx(_components.li, {\n        children: \"ref\"\n      }), \"\\n\", _jsx(_components.li, {\n        children: \"reactive\"\n      }), \"\\n\", _jsx(_components.li, {\n        children: \"computed\"\n      }), \"\\n\", _jsx(_components.li, {\n        children: \"...\"\n      }), \"\\n\"]\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"对了我的编辑器是vscode,如果要用vue3 就不要用\", _jsx(_components.code, {\n        children: \"vuter\"\n      }), \"了提示支持不友好，新的插件\", _jsx(_components.code, {\n        children: \"volar\"\n      }), \"，如果vscode下载不下来就需要去官网下载，把包里package.json vscode版本改的和自己编辑器的版本一眼,再手动安装,详细教程搜索引擎自取。\"]\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"中间碰到一个很恶心的事情,Vant的组件有很多自定义css样式,想全局修改。index.html修改失败，按照官网的:root:root也不行，最后就整了一个js文件在入口统一修改...囧\"\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsx(_components.code, {\n        className: \"language-JS\",\n        children: \"  export function updateVantCSSVar() {\\n    let cssVar = [\\n      ['--van-tabs-bottom-bar-color', '#FF7500'],\\n      ['--van-tabs-nav-background', 'transparent'],\\n      ['--van-field-label-width', '5.5em'],\\n    ]\\n\\n    cssVar.forEach(item =\u003e {\\n      document.documentElement.style.setProperty(item[0], item[1])\\n    })\\n  }\\n\"\n      })\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"顺路又学了一下less定义全局变量\"\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsx(_components.code, {\n        className: \"language-JS:VITE.CONFIG.JS\",\n        children: \"// VITE.CONFIG.JS\\nexport default defineConfig(({ mode }) =\u003e {\\n  return {\\n    css: {\\n      preprocessorOptions: {\\n        less: {\\n          modifyVars: {\\n            // 这个用来定义全局变量的\\n            hack: `true; @import \\\"${path.resolve(__dirname, \\\"./src/assets/css/base.less\\\")}\\\"`\\n            // '--van-field-label-width': '6.3em'\\n          },\\n          globalVars: {\\n\\n          },\\n        }\\n      }\\n    }\\n  }\\n})\\n\\n  //base.less\\n  @test-color: red;\\n  @goods-img: 60px;\\n  @yellow: #FF7500;\\n\\n\"\n      })\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"最后打包，默认的是\", _jsx(_components.code, {\n        children: \"/\"\n      }), \",建议配置 \", _jsx(_components.code, {\n        children: \"base\"\n      }), \"为\", _jsx(_components.code, {\n        children: \"./\"\n      }), \",不然如果项目不是在根目录就找不到静态资源了。\"]\n    }), \"\\n\", _jsx(_components.h3, {\n      children: \"碰到的糟心问题\"\n    }), \"\\n\", _jsxs(_components.ul, {\n      children: [\"\\n\", _jsxs(_components.li, {\n        children: [\"\\n\", _jsx(_components.p, {\n          children: \"白屏\"\n        }), \"\\n\", _jsxs(_components.p, {\n          children: [\"如果任何报错都没有,建议检查router的模式是否用的是\", _jsx(_components.code, {\n            children: \"history\"\n          })]\n        }), \"\\n\"]\n      }), \"\\n\"]\n    }), \"\\n\", _jsxs(_components.ul, {\n      children: [\"\\n\", _jsxs(_components.li, {\n        children: [\"\\n\", _jsx(_components.p, {\n          children: \"ts中引入Vue文件报错\"\n        }), \"\\n\", _jsx(_components.pre, {\n          children: _jsx(_components.code, {\n            className: \"language-ts:sfc.d.ts\",\n            children: \"  //增加一个 sfc.d.ts\\n  declare module '*.vue' {\\n    import { ComponentOptions } from 'vue'\\n    const componentOptions: ComponentOptions\\n    export default componentOptions\\n  }\\n\"\n          })\n        }), \"\\n\"]\n      }), \"\\n\", _jsxs(_components.li, {\n        children: [\"\\n\", _jsx(_components.p, {\n          children: \"vconsole引入\"\n        }), \"\\n\", _jsx(_components.pre, {\n          children: _jsx(_components.code, {\n            className: \"language-JS:main.ts\",\n            children: \"  if (import.meta.env.MODE !== 'prod') {\\n\\n    // 网上的教程大多是下面这种引入，实际上会报错\\n    app.use(new Vconsole())\\n\\n    // 以下引入可以正常使用\\n    new Vconsole()\\n\\n    // 这种也可以\\n    app.use(()=\u003enew Vconsole())\\n  }\\n\"\n          })\n        }), \"\\n\"]\n      }), \"\\n\", _jsxs(_components.li, {\n        children: [\"\\n\", _jsx(_components.p, {\n          children: \"部分浏览器黑屏兼容问题,版本较低的浏览器不支持ES6的语法和新API，而Babel默认只转换新的JavaScript句法，不转换新的API，比如Proxy、Symbol、Promise等全局对象，以及一些定义在全局对象上的方法都不会转码。\"\n        }), \"\\n\", _jsxs(_components.blockquote, {\n          children: [\"\\n\", _jsx(_components.p, {\n            children: \"yarn add @vitejs/plugin-legacy terser\"\n          }), \"\\n\"]\n        }), \"\\n\", _jsx(_components.pre, {\n          children: _jsx(_components.code, {\n            className: \"language-ts:vite.config.ts\",\n            children: \"  import legacy from '@vitejs/plugin-legacy'\\n  export default defineConfig(({ mode }) =\u003e {\\n    return {\\n      plugins: [\\n        legacy({\\n          targets: ['defaults', 'ie \u003e= 11', 'chrome 52'],  //需要兼容的目标列表，可以设置多个\\n          additionalLegacyPolyfills: ['regenerator-runtime/runtime'],\\n          renderLegacyChunks: true,\\n          polyfills: [\\n            'es.symbol',\\n            'es.array.filter',\\n            'es.promise',\\n            'es.promise.finally',\\n            'es/map',\\n            'es/set',\\n            'es.array.for-each',\\n            'es.object.define-properties',\\n            'es.object.define-property',\\n            'es.object.get-own-property-descriptor',\\n            'es.object.get-own-property-descriptors',\\n            'es.object.keys',\\n            'es.object.to-string',\\n            'web.dom-collections.for-each',\\n            'esnext.global-this',\\n            'esnext.string.match-all'\\n          ]\\n        })\\n      ],\\n      resolve: {\\n        alias: {\\n          '@': path.resolve(__dirname, 'src'),\\n        },\\n      },\\n      server: { },\\n      css: { }\\n    }\\n  })\\n\"\n          })\n        }), \"\\n\"]\n      }), \"\\n\"]\n    })]\n  });\n}\nfunction MDXContent(props = {}) {\n  const {wrapper: MDXLayout} = Object.assign({}, _provideComponents(), props.components);\n  return MDXLayout ? _jsx(MDXLayout, Object.assign({}, props, {\n    children: _jsx(_createMdxContent, props)\n  })) : _createMdxContent(props);\n}\nreturn {\n  default: MDXContent\n};\n","frontmatter":{},"scope":{}}},"__N_SSG":true},"page":"/blog/detail/[id]","query":{"id":"vite-vue3"},"buildId":"HP81LP17NPlwa6Lp7DH3o","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>