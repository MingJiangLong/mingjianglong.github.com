<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><title>(*^▽^*)</title><meta name="next-head-count" content="3"/><link rel="preload" href="/_next/static/css/3bf46ada9988a1ba.css" as="style"/><link rel="stylesheet" href="/_next/static/css/3bf46ada9988a1ba.css" data-n-g=""/><link rel="preload" href="/_next/static/css/f8f6338530cfd437.css" as="style"/><link rel="stylesheet" href="/_next/static/css/f8f6338530cfd437.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/_next/static/chunks/webpack-ee7e63bc15b31913.js" defer=""></script><script src="/_next/static/chunks/framework-2c79e2a64abdb08b.js" defer=""></script><script src="/_next/static/chunks/main-7477d36a73a3487c.js" defer=""></script><script src="/_next/static/chunks/pages/_app-d4a67795baa53afd.js" defer=""></script><script src="/_next/static/chunks/171-0943d13a71220321.js" defer=""></script><script src="/_next/static/chunks/pages/blog/detail/%5Bid%5D-2986708b1a1679eb.js" defer=""></script><script src="/_next/static/Rb0y7oK5AW-ds3C_tW37q/_buildManifest.js" defer=""></script><script src="/_next/static/Rb0y7oK5AW-ds3C_tW37q/_ssgManifest.js" defer=""></script><style id="__jsx-1471609662">.file-name-container.jsx-1471609662{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;width:100%;max-width:100%;background-color:#1d2b35d9;padding:-webkit-calc(.5rem + .2vw);padding:-moz-calc(.5rem + .2vw);padding:calc(.5rem + .2vw);-webkit-border-top-left-radius:5px;-moz-border-radius-topleft:5px;border-top-left-radius:5px;-webkit-border-top-right-radius:5px;-moz-border-radius-topright:5px;border-top-right-radius:5px;margin-top:1vh;white-space:pre-wrap;word-wrap:break-word;overflow-wrap:break-word}.file-name.jsx-1471609662{font-family:"Share Tech Mono",monospace;font-size:-webkit-calc(.9rem + .1vw);font-size:-moz-calc(.9rem + .1vw);font-size:calc(.9rem + .1vw);color:#fffecbf2}</style></head><body><div id="__next"><div class="layout_main-container__jR90l"><main class="layout_main__E22hH"><div style="width:15em"><nav class="sidebar_nav__EFmKd"><div class="Avatar_container__egCID"><div class="Avatar_image-container__9WrGh"><img src="/images/avatar.png" alt="mingjianglong" class="Avatar_avatar__oORu6"/><h2>龙江</h2><h3 style="font-weight:normal;padding-top:.6em;color:grey">Jiang Long</h3><h4 style="padding-top:1.3em">等风也等你~</h4><span class="Avatar_my-face__hbhE_">ღゝ◡╹)ノ♡</span></div><div></div></div><a style="color:black" href="/">开心☺</a><a style="color:black" href="/blog">Blog</a><a style="color:black" href="/archive">归档</a><a style="color:black" href="/resume">简介</a></nav></div><div style="flex:1;height:100vh;display:flex;flex-direction:column;overflow-y:hidden"><div style="height:100%;padding:7em;overflow:scroll"><h1 style="font-family:&#x27;Ubuntu&#x27;, sans-serif;font-size:calc(1rem + 1.5vw);color:#1d2b35;padding:1em 0;overflow-wrap:break-word">vite学习</h1>
<p style="font-family:&#x27;Source Sans Pro&#x27;, sans-serif;font-size:calc(1rem + 0.1vw);color:#071013f2;margin:0vh 0 1vh 0;overflow-wrap:break-word">Vite（法语意为 &quot;快速的&quot;，发音 /vit/，发音同 &quot;veet&quot;）是一种新型前端构建工具，能够显著提升前端开发体验。它主要由两部分组成：</p>
<ul style="font-family:&#x27;Source Sans Pro&#x27;, sans-serif;font-size:calc(1rem + 0.1vw);color:#071013e6;margin:1vh 0 1vh calc(2vw);overflow-wrap:break-word">
<li>一个开发服务器，它基于 原生 ES 模块 提供了 丰富的内建功能，如速度快到惊人的 模块热更新（HMR）。</li>
<li>一套构建指令，它使用 Rollup 打包你的代码，并且它是预配置的，可输出用于生产环境的高度优化过的静态资源。</li>
</ul>
<p style="font-family:&#x27;Source Sans Pro&#x27;, sans-serif;font-size:calc(1rem + 0.1vw);color:#071013f2;margin:0vh 0 1vh 0;overflow-wrap:break-word"><a style="color:#071013;text-decoration:none;cursor:pointer;border-bottom:1px dashed #fb232e;font-size:calc(1rem + 0.1vw);font-weight:bold;overflow-wrap:break-word" target="_blank" rel="noreferrer" href="https://cn.vitejs.dev/">vite官网</a></p>
<h3 style="font-family:&#x27;Maven Pro&#x27;, sans-serif;font-size:calc(1rem + 0.5vw);color:#1d2b35;padding:.6em 0;overflow-wrap:break-word">社区模板初始化</h3>
<blockquote style="font-style:italic;background-color:#20a4f326;padding:10px;margin:1vh 0 1vh 0;border-left:5px solid #20a4f3e6">
<p style="font-family:&#x27;Source Sans Pro&#x27;, sans-serif;font-size:calc(1rem + 0.1vw);color:#071013f2;margin:0vh 0 1vh 0;overflow-wrap:break-word">npm create vite@latest</p>
</blockquote>
<h3 style="font-family:&#x27;Maven Pro&#x27;, sans-serif;font-size:calc(1rem + 0.5vw);color:#1d2b35;padding:.6em 0;overflow-wrap:break-word">vite.config.ts配置</h3>
<pre><div class="jsx-1471609662"><div class="jsx-1471609662 file-name-container"><p class="jsx-1471609662 file-name">vite.config.ts</p></div><pre class="language-typescript:vite.config.ts" style="color:#1d2b35;font-size:13px;text-shadow:none;font-family:Menlo, Monaco, Consolas, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, &quot;Courier New&quot;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.2;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:0px;overflow:auto;background:#1e1e1e;background-color:#071013f2;padding-bottom:1em;margin-bottom:1vh;border-bottom-left-radius:5px;border-bottom-right-radius:5px"><code class="language-typescript" style="color:#9cdcfe;font-size:calc(0.8rem + 0.1vw);text-shadow:none;font-family:Menlo, Monaco, Consolas, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, &quot;Courier New&quot;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.2;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:#c586c0">import</span><span> </span><span class="token" style="color:#d4d4d4">{</span><span class="token"> defineConfig </span><span class="token" style="color:#d4d4d4">}</span><span> </span><span class="token" style="color:#c586c0">from</span><span> </span><span class="token" style="color:#ce9178">&#x27;vite&#x27;</span><span>
</span><span></span><span class="token" style="color:#c586c0">import</span><span> </span><span class="token">react</span><span> </span><span class="token" style="color:#c586c0">from</span><span> </span><span class="token" style="color:#ce9178">&#x27;@vitejs/plugin-react&#x27;</span><span>
</span>
<span></span><span class="token" style="color:#6a9955">// https://vitejs.dev/config/</span><span>
</span><span></span><span class="token" style="color:#c586c0">export</span><span> </span><span class="token" style="color:#c586c0">default</span><span> </span><span class="token" style="color:#dcdcaa">defineConfig</span><span class="token" style="color:#d4d4d4">(</span><span class="token" style="color:#d4d4d4">{</span><span>
</span><span>  plugins</span><span class="token" style="color:#d4d4d4">:</span><span> </span><span class="token" style="color:#d4d4d4">[</span><span class="token" style="color:#dcdcaa">react</span><span class="token" style="color:#d4d4d4">(</span><span class="token" style="color:#d4d4d4">)</span><span class="token" style="color:#d4d4d4">]</span><span class="token" style="color:#d4d4d4">,</span><span>
</span><span></span><span class="token" style="color:#d4d4d4">}</span><span class="token" style="color:#d4d4d4">)</span><span>
</span></code></pre></div></pre>
<h3 style="font-family:&#x27;Maven Pro&#x27;, sans-serif;font-size:calc(1rem + 0.5vw);color:#1d2b35;padding:.6em 0;overflow-wrap:break-word">路径别名</h3>
<pre><div class="jsx-1471609662"><div class="jsx-1471609662 file-name-container"><p class="jsx-1471609662 file-name">vite.config.ts</p></div><pre class="language-typescript:vite.config.ts" style="color:#1d2b35;font-size:13px;text-shadow:none;font-family:Menlo, Monaco, Consolas, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, &quot;Courier New&quot;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.2;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:0px;overflow:auto;background:#1e1e1e;background-color:#071013f2;padding-bottom:1em;margin-bottom:1vh;border-bottom-left-radius:5px;border-bottom-right-radius:5px"><code class="language-typescript" style="color:#9cdcfe;font-size:calc(0.8rem + 0.1vw);text-shadow:none;font-family:Menlo, Monaco, Consolas, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, &quot;Courier New&quot;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.2;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:#c586c0">import</span><span> </span><span class="token" style="color:#d4d4d4">{</span><span class="token"> defineConfig </span><span class="token" style="color:#d4d4d4">}</span><span> </span><span class="token" style="color:#c586c0">from</span><span> </span><span class="token" style="color:#ce9178">&#x27;vite&#x27;</span><span>
</span><span></span><span class="token" style="color:#c586c0">import</span><span> </span><span class="token">path</span><span> </span><span class="token" style="color:#c586c0">from</span><span> </span><span class="token" style="color:#ce9178">&#x27;path&#x27;</span><span>
</span><span></span><span class="token" style="color:#c586c0">export</span><span> </span><span class="token" style="color:#c586c0">default</span><span> </span><span class="token" style="color:#dcdcaa">defineConfig</span><span class="token" style="color:#d4d4d4">(</span><span class="token" style="color:#d4d4d4">{</span><span>
</span><span>  resolve</span><span class="token" style="color:#d4d4d4">:</span><span> </span><span class="token" style="color:#d4d4d4">{</span><span>
</span><span>    alias</span><span class="token" style="color:#d4d4d4">:</span><span> </span><span class="token" style="color:#d4d4d4">{</span><span>
</span><span>      </span><span class="token string-property" style="color:#9cdcfe">&#x27;@&#x27;</span><span class="token" style="color:#d4d4d4">:</span><span> path</span><span class="token" style="color:#d4d4d4">.</span><span class="token method property-access" style="color:#dcdcaa">resolve</span><span class="token" style="color:#d4d4d4">(</span><span>__dirname</span><span class="token" style="color:#d4d4d4">,</span><span> </span><span class="token" style="color:#ce9178">&#x27;src&#x27;</span><span class="token" style="color:#d4d4d4">)</span><span class="token" style="color:#d4d4d4">,</span><span>
</span><span>    </span><span class="token" style="color:#d4d4d4">}</span><span class="token" style="color:#d4d4d4">,</span><span>
</span><span>    extensions</span><span class="token" style="color:#d4d4d4">:</span><span> </span><span class="token" style="color:#d4d4d4">[</span><span class="token" style="color:#ce9178">&#x27;.js&#x27;</span><span class="token" style="color:#d4d4d4">,</span><span> </span><span class="token" style="color:#ce9178">&#x27;.vue&#x27;</span><span class="token" style="color:#d4d4d4">,</span><span> </span><span class="token" style="color:#ce9178">&#x27;.json&#x27;</span><span class="token" style="color:#d4d4d4">]</span><span class="token" style="color:#d4d4d4">,</span><span> </span><span class="token" style="color:#6a9955">// vue项目配置</span><span>
</span><span>  </span><span class="token" style="color:#d4d4d4">}</span><span class="token" style="color:#d4d4d4">,</span><span>
</span><span></span><span class="token" style="color:#d4d4d4">}</span><span class="token" style="color:#d4d4d4">)</span><span>
</span></code></pre></div></pre>
<p style="font-family:&#x27;Source Sans Pro&#x27;, sans-serif;font-size:calc(1rem + 0.1vw);color:#071013f2;margin:0vh 0 1vh 0;overflow-wrap:break-word">配合typescript需要在tsconfig同步配置</p>
<pre><div class="jsx-1471609662"><div class="jsx-1471609662 file-name-container"><p class="jsx-1471609662 file-name">tsconfig.json</p></div><pre class="language-json:tsconfig.json" style="color:#1d2b35;font-size:13px;text-shadow:none;font-family:Menlo, Monaco, Consolas, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, &quot;Courier New&quot;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.2;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:0px;overflow:auto;background:#1e1e1e;background-color:#071013f2;padding-bottom:1em;margin-bottom:1vh;border-bottom-left-radius:5px;border-bottom-right-radius:5px"><code class="language-json" style="color:#d4d4d4;font-size:calc(0.8rem + 0.1vw);text-shadow:none;font-family:Menlo, Monaco, Consolas, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, &quot;Courier New&quot;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.2;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:#d4d4d4">{</span><span>
</span><span>  </span><span class="token" style="color:#9cdcfe">&quot;compilerOptions&quot;</span><span class="token" style="color:#d4d4d4">:</span><span> </span><span class="token" style="color:#d4d4d4">{</span><span>
</span><span>    </span><span class="token" style="color:#9cdcfe">&quot;baseUrl&quot;</span><span class="token" style="color:#d4d4d4">:</span><span> </span><span class="token" style="color:#ce9178">&quot;.&quot;</span><span class="token" style="color:#d4d4d4">,</span><span>
</span><span>    </span><span class="token" style="color:#9cdcfe">&quot;paths&quot;</span><span class="token" style="color:#d4d4d4">:</span><span> </span><span class="token" style="color:#d4d4d4">{</span><span class="token" style="color:#9cdcfe">&quot;@/*&quot;</span><span class="token" style="color:#d4d4d4">:</span><span class="token" style="color:#d4d4d4">[</span><span class="token" style="color:#ce9178">&quot;src/*&quot;</span><span class="token" style="color:#d4d4d4">]</span><span class="token" style="color:#d4d4d4">}</span><span class="token" style="color:#d4d4d4">,</span><span>
</span><span>  </span><span class="token" style="color:#d4d4d4">}</span><span class="token" style="color:#d4d4d4">,</span><span>
</span><span>  </span><span class="token" style="color:#9cdcfe">&quot;include&quot;</span><span class="token" style="color:#d4d4d4">:</span><span> </span><span class="token" style="color:#d4d4d4">[</span><span class="token" style="color:#ce9178">&quot;src/**/*.ts&quot;</span><span class="token" style="color:#d4d4d4">,</span><span> </span><span class="token" style="color:#ce9178">&quot;src/**/*.d.ts&quot;</span><span class="token" style="color:#d4d4d4">,</span><span> </span><span class="token" style="color:#ce9178">&quot;src/**/*.tsx&quot;</span><span class="token" style="color:#d4d4d4">,</span><span> </span><span class="token" style="color:#ce9178">&quot;src/**/*.vue&quot;</span><span class="token" style="color:#d4d4d4">,</span><span class="token" style="color:#ce9178">&quot;@types/*.d.ts&quot;</span><span class="token" style="color:#d4d4d4">]</span><span class="token" style="color:#d4d4d4">,</span><span>
</span><span>  </span><span class="token" style="color:#9cdcfe">&quot;references&quot;</span><span class="token" style="color:#d4d4d4">:</span><span> </span><span class="token" style="color:#d4d4d4">[</span><span class="token" style="color:#d4d4d4">{</span><span> </span><span class="token" style="color:#9cdcfe">&quot;path&quot;</span><span class="token" style="color:#d4d4d4">:</span><span> </span><span class="token" style="color:#ce9178">&quot;./tsconfig.node.json&quot;</span><span> </span><span class="token" style="color:#d4d4d4">}</span><span class="token" style="color:#d4d4d4">]</span><span>
</span><span></span><span class="token" style="color:#d4d4d4">}</span><span>
</span></code></pre></div></pre>
<h3 style="font-family:&#x27;Maven Pro&#x27;, sans-serif;font-size:calc(1rem + 0.5vw);color:#1d2b35;padding:.6em 0;overflow-wrap:break-word">代码压缩</h3>
<pre><div class="jsx-1471609662"><div class="jsx-1471609662 file-name-container"><p class="jsx-1471609662 file-name">vite.config.ts</p></div><pre class="language-typescript:vite.config.ts" style="color:#1d2b35;font-size:13px;text-shadow:none;font-family:Menlo, Monaco, Consolas, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, &quot;Courier New&quot;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.2;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:0px;overflow:auto;background:#1e1e1e;background-color:#071013f2;padding-bottom:1em;margin-bottom:1vh;border-bottom-left-radius:5px;border-bottom-right-radius:5px"><code class="language-typescript" style="color:#9cdcfe;font-size:calc(0.8rem + 0.1vw);text-shadow:none;font-family:Menlo, Monaco, Consolas, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, &quot;Courier New&quot;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.2;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:#c586c0">import</span><span> </span><span class="token" style="color:#d4d4d4">{</span><span class="token"> defineConfig </span><span class="token" style="color:#d4d4d4">}</span><span> </span><span class="token" style="color:#c586c0">from</span><span> </span><span class="token" style="color:#ce9178">&#x27;vite&#x27;</span><span>
</span><span></span><span class="token" style="color:#c586c0">import</span><span> </span><span class="token">path</span><span> </span><span class="token" style="color:#c586c0">from</span><span> </span><span class="token" style="color:#ce9178">&#x27;path&#x27;</span><span>
</span><span></span><span class="token" style="color:#c586c0">import</span><span> </span><span class="token">viteCompression</span><span> </span><span class="token" style="color:#c586c0">from</span><span> </span><span class="token" style="color:#ce9178">&#x27;vite-plugin-compression&#x27;</span><span>
</span><span></span><span class="token" style="color:#c586c0">export</span><span> </span><span class="token" style="color:#c586c0">default</span><span> </span><span class="token" style="color:#dcdcaa">defineConfig</span><span class="token" style="color:#d4d4d4">(</span><span class="token" style="color:#d4d4d4">{</span><span>
</span><span>  plugins</span><span class="token" style="color:#d4d4d4">:</span><span> </span><span class="token" style="color:#d4d4d4">[</span><span class="token" style="color:#dcdcaa">viteCompression</span><span class="token" style="color:#d4d4d4">(</span><span class="token" style="color:#d4d4d4">)</span><span class="token" style="color:#d4d4d4">]</span><span class="token" style="color:#d4d4d4">,</span><span>
</span><span></span><span class="token" style="color:#d4d4d4">}</span><span class="token" style="color:#d4d4d4">)</span><span>
</span></code></pre></div></pre>
<p style="font-family:&#x27;Source Sans Pro&#x27;, sans-serif;font-size:calc(1rem + 0.1vw);color:#071013f2;margin:0vh 0 1vh 0;overflow-wrap:break-word">需要nginx配合</p>
<pre><pre class="language-yaml" style="color:#d4d4d4;font-size:calc(0.9rem + 0.1vw);text-shadow:none;font-family:Menlo, Monaco, Consolas, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, &quot;Courier New&quot;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.2;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto;background:#1e1e1e;background-color:#071013f2;margin-top:1vh;margin-bottom:1vh;border-radius:5px;padding-bottom:1em"><code class="language-yaml" style="color:#d4d4d4;font-size:calc(0.8rem + 0.1vw);text-shadow:none;font-family:Menlo, Monaco, Consolas, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, &quot;Courier New&quot;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.2;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:#6a9955"># 开启gzip</span><span>
</span>gzip on;
<!-- -->
<span></span><span class="token" style="color:#6a9955"># 启用gzip压缩的最小文件，小于设置值的文件将不会压缩</span><span>
</span>gzip_min_length 1k;
<!-- -->
<span></span><span class="token" style="color:#6a9955"># gzip 压缩级别，1-9，数字越大压缩的越好，也越占用CPU时间，后面会有详细说明</span><span>
</span>gzip_comp_level 1;
<!-- -->
<span></span><span class="token" style="color:#6a9955"># 进行压缩的文件类型。javascript有多种形式。其中的值可以在 mime.types 文件中找到。</span><span>
</span><span>gzip_types text/plain application/javascript application/x</span><span class="token" style="color:#d4d4d4">-</span><span>javascript text/css application/xml text/javascript application/x</span><span class="token" style="color:#d4d4d4">-</span><span>httpd</span><span class="token" style="color:#d4d4d4">-</span><span>php image/jpeg image/gif image/png application/vnd.ms</span><span class="token" style="color:#d4d4d4">-</span><span>fontobject font/ttf font/opentype font/x</span><span class="token" style="color:#d4d4d4">-</span><span>woff image/svg+xml;
</span>
<span></span><span class="token" style="color:#6a9955"># 是否在http header中添加Vary: Accept-Encoding，建议开启</span><span>
</span>gzip_vary on;
<!-- -->
<span></span><span class="token" style="color:#6a9955"># 禁用IE 6 gzip</span><span>
</span><span>gzip_disable &quot;MSIE </span><span class="token" style="color:#d4d4d4">[</span><span>1</span><span class="token" style="color:#d4d4d4">-</span><span class="token" style="color:#b5cea8">6</span><span class="token" style="color:#d4d4d4">]</span><span>\.&quot;;
</span>
<span></span><span class="token" style="color:#6a9955"># 设置压缩所需要的缓冲区大小</span><span>
</span>gzip_buffers 32 4k;
</code></pre></pre>
<h3 style="font-family:&#x27;Maven Pro&#x27;, sans-serif;font-size:calc(1rem + 0.5vw);color:#1d2b35;padding:.6em 0;overflow-wrap:break-word">公共依赖打包成一个文件</h3>
<pre><div class="jsx-1471609662"><div class="jsx-1471609662 file-name-container"><p class="jsx-1471609662 file-name">vite.config.ts</p></div><pre class="language-typescript:vite.config.ts" style="color:#1d2b35;font-size:13px;text-shadow:none;font-family:Menlo, Monaco, Consolas, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, &quot;Courier New&quot;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.2;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:0px;overflow:auto;background:#1e1e1e;background-color:#071013f2;padding-bottom:1em;margin-bottom:1vh;border-bottom-left-radius:5px;border-bottom-right-radius:5px"><code class="language-typescript" style="color:#9cdcfe;font-size:calc(0.8rem + 0.1vw);text-shadow:none;font-family:Menlo, Monaco, Consolas, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, &quot;Courier New&quot;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.2;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span>  </span><span class="token" style="color:#c586c0">import</span><span> </span><span class="token" style="color:#d4d4d4">{</span><span class="token"> defineConfig </span><span class="token" style="color:#d4d4d4">}</span><span> </span><span class="token" style="color:#c586c0">from</span><span> </span><span class="token" style="color:#ce9178">&#x27;vite&#x27;</span><span>
</span><span>  </span><span class="token" style="color:#c586c0">export</span><span> </span><span class="token" style="color:#c586c0">default</span><span> </span><span class="token" style="color:#dcdcaa">defineConfig</span><span class="token" style="color:#d4d4d4">(</span><span class="token" style="color:#d4d4d4">{</span><span>
</span><span>    build</span><span class="token" style="color:#d4d4d4">:</span><span> </span><span class="token" style="color:#d4d4d4">{</span><span>
</span><span>      outDir</span><span class="token" style="color:#d4d4d4">:</span><span> </span><span class="token" style="color:#ce9178">&quot;../q/src/main/resources/static&quot;</span><span class="token" style="color:#d4d4d4">,</span><span>
</span><span>      manifest</span><span class="token" style="color:#d4d4d4">:</span><span> </span><span class="token" style="color:#569cd6">true</span><span class="token" style="color:#d4d4d4">,</span><span>
</span><span>      emptyOutDir</span><span class="token" style="color:#d4d4d4">:</span><span> </span><span class="token" style="color:#569cd6">true</span><span class="token" style="color:#d4d4d4">,</span><span>
</span><span>      minify</span><span class="token" style="color:#d4d4d4">:</span><span class="token" style="color:#ce9178">&quot;terser&quot;</span><span class="token" style="color:#d4d4d4">,</span><span>
</span><span>      terserOptions</span><span class="token" style="color:#d4d4d4">:</span><span> </span><span class="token" style="color:#d4d4d4">{</span><span>
</span><span>        compress</span><span class="token" style="color:#d4d4d4">:</span><span> </span><span class="token" style="color:#d4d4d4">{</span><span>
</span><span>          drop_console</span><span class="token" style="color:#d4d4d4">:</span><span> </span><span class="token" style="color:#569cd6">true</span><span class="token" style="color:#d4d4d4">,</span><span>
</span><span>          drop_debugger</span><span class="token" style="color:#d4d4d4">:</span><span> </span><span class="token" style="color:#569cd6">true</span><span class="token" style="color:#d4d4d4">,</span><span>
</span><span>        </span><span class="token" style="color:#d4d4d4">}</span><span class="token" style="color:#d4d4d4">,</span><span>
</span><span>      </span><span class="token" style="color:#d4d4d4">}</span><span class="token" style="color:#d4d4d4">,</span><span>
</span><span>      chunkSizeWarningLimit</span><span class="token" style="color:#d4d4d4">:</span><span> </span><span class="token" style="color:#b5cea8">1000</span><span class="token" style="color:#d4d4d4">,</span><span>
</span><span>      rollupOptions</span><span class="token" style="color:#d4d4d4">:</span><span> </span><span class="token" style="color:#d4d4d4">{</span><span>
</span><span>        output</span><span class="token" style="color:#d4d4d4">:</span><span> </span><span class="token" style="color:#d4d4d4">{</span><span>
</span><span>          entryFileNames</span><span class="token" style="color:#d4d4d4">:</span><span> </span><span class="token" style="color:#ce9178">&#x27;assets/entry/[name][hash].js&#x27;</span><span class="token" style="color:#d4d4d4">,</span><span>
</span><span>          chunkFileNames</span><span class="token" style="color:#d4d4d4">:</span><span> </span><span class="token" style="color:#ce9178">&#x27;assets/chunk/[name][hash].js&#x27;</span><span class="token" style="color:#d4d4d4">,</span><span>
</span><span>          assetFileNames</span><span class="token" style="color:#d4d4d4">:</span><span> </span><span class="token" style="color:#ce9178">&#x27;assets/file/[name][hash].[ext]&#x27;</span><span class="token" style="color:#d4d4d4">,</span><span>
</span><span>          </span><span class="token" style="color:#dcdcaa">manualChunks</span><span class="token" style="color:#d4d4d4">(</span><span>id</span><span class="token" style="color:#d4d4d4">)</span><span> </span><span class="token" style="color:#d4d4d4">{</span><span>
</span><span>            </span><span class="token" style="color:#569CD6">const</span><span> </span><span class="token" style="color:#9cdcfe">NODE_MODULES</span><span> </span><span class="token" style="color:#d4d4d4">=</span><span> </span><span class="token" style="color:#ce9178">&#x27;node_modules&#x27;</span><span>
</span><span>            </span><span class="token" style="color:#c586c0">if</span><span> </span><span class="token" style="color:#d4d4d4">(</span><span>id</span><span class="token" style="color:#d4d4d4">.</span><span class="token method property-access" style="color:#dcdcaa">includes</span><span class="token" style="color:#d4d4d4">(</span><span class="token" style="color:#9cdcfe">NODE_MODULES</span><span class="token" style="color:#d4d4d4">)</span><span class="token" style="color:#d4d4d4">)</span><span> </span><span class="token" style="color:#c586c0">return</span><span> </span><span class="token" style="color:#ce9178">&#x27;vendor&#x27;</span><span>
</span><span>          </span><span class="token" style="color:#d4d4d4">}</span><span class="token" style="color:#d4d4d4">,</span><span>
</span><span>        </span><span class="token" style="color:#d4d4d4">}</span><span class="token" style="color:#d4d4d4">,</span><span>
</span><span>      </span><span class="token" style="color:#d4d4d4">}</span><span>
</span><span>    </span><span class="token" style="color:#d4d4d4">}</span><span class="token" style="color:#d4d4d4">,</span><span>
</span><span>  </span><span class="token" style="color:#d4d4d4">}</span><span class="token" style="color:#d4d4d4">)</span><span>
</span></code></pre></div></pre>
<h3 style="font-family:&#x27;Maven Pro&#x27;, sans-serif;font-size:calc(1rem + 0.5vw);color:#1d2b35;padding:.6em 0;overflow-wrap:break-word">server配置</h3>
<pre><div class="jsx-1471609662"><div class="jsx-1471609662 file-name-container"><p class="jsx-1471609662 file-name">vite.config.ts</p></div><pre class="language-typescript:vite.config.ts" style="color:#1d2b35;font-size:13px;text-shadow:none;font-family:Menlo, Monaco, Consolas, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, &quot;Courier New&quot;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.2;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:0px;overflow:auto;background:#1e1e1e;background-color:#071013f2;padding-bottom:1em;margin-bottom:1vh;border-bottom-left-radius:5px;border-bottom-right-radius:5px"><code class="language-typescript" style="color:#9cdcfe;font-size:calc(0.8rem + 0.1vw);text-shadow:none;font-family:Menlo, Monaco, Consolas, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, &quot;Courier New&quot;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.2;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span>  </span><span class="token" style="color:#c586c0">import</span><span> </span><span class="token" style="color:#d4d4d4">{</span><span class="token"> defineConfig </span><span class="token" style="color:#d4d4d4">}</span><span> </span><span class="token" style="color:#c586c0">from</span><span> </span><span class="token" style="color:#ce9178">&#x27;vite&#x27;</span><span>
</span><span>  </span><span class="token" style="color:#c586c0">export</span><span> </span><span class="token" style="color:#c586c0">default</span><span> </span><span class="token" style="color:#dcdcaa">defineConfig</span><span class="token" style="color:#d4d4d4">(</span><span class="token" style="color:#d4d4d4">{</span><span>
</span><span>    server</span><span class="token" style="color:#d4d4d4">:</span><span> </span><span class="token" style="color:#d4d4d4">{</span><span>
</span><span>      host</span><span class="token" style="color:#d4d4d4">:</span><span> </span><span class="token" style="color:#ce9178">&quot;0.0.0.0&quot;</span><span class="token" style="color:#d4d4d4">,</span><span>
</span><span>      port</span><span class="token" style="color:#d4d4d4">:</span><span class="token" style="color:#ce9178">&quot;3000&quot;</span><span class="token" style="color:#d4d4d4">,</span><span class="token" style="color:#6a9955">// 默认5173</span><span>
</span><span>      proxy</span><span class="token" style="color:#d4d4d4">:</span><span> </span><span class="token" style="color:#d4d4d4">{</span><span>
</span><span>        </span><span class="token" style="color:#6a9955">// 字符串简写写法：http://localhost:5173/foo -&gt; http://localhost:4567/foo</span><span>
</span><span>        </span><span class="token string-property" style="color:#9cdcfe">&#x27;/foo&#x27;</span><span class="token" style="color:#d4d4d4">:</span><span> </span><span class="token" style="color:#ce9178">&#x27;http://localhost:4567&#x27;</span><span class="token" style="color:#d4d4d4">,</span><span>
</span><span>        </span><span class="token" style="color:#6a9955">// 带选项写法：http://localhost:5173/api/bar -&gt; http://jsonplaceholder.typicode.com/bar</span><span>
</span><span>        </span><span class="token string-property" style="color:#9cdcfe">&#x27;/api&#x27;</span><span class="token" style="color:#d4d4d4">:</span><span> </span><span class="token" style="color:#d4d4d4">{</span><span>
</span><span>          target</span><span class="token" style="color:#d4d4d4">:</span><span> </span><span class="token" style="color:#ce9178">&#x27;http://jsonplaceholder.typicode.com&#x27;</span><span class="token" style="color:#d4d4d4">,</span><span>
</span><span>          changeOrigin</span><span class="token" style="color:#d4d4d4">:</span><span> </span><span class="token" style="color:#569cd6">true</span><span class="token" style="color:#d4d4d4">,</span><span>
</span><span>          </span><span class="token function-variable" style="color:#dcdcaa">rewrite</span><span class="token" style="color:#d4d4d4">:</span><span> </span><span class="token" style="color:#d4d4d4">(</span><span>path</span><span class="token" style="color:#d4d4d4">)</span><span> </span><span class="token" style="color:#569CD6">=&gt;</span><span> path</span><span class="token" style="color:#d4d4d4">.</span><span class="token method property-access" style="color:#dcdcaa">replace</span><span class="token" style="color:#d4d4d4">(</span><span class="token regex-delimiter" style="color:#d16969">/</span><span class="token regex-source language-regex" style="color:#d16969">^\/api</span><span class="token regex-delimiter" style="color:#d16969">/</span><span class="token" style="color:#d4d4d4">,</span><span> </span><span class="token" style="color:#ce9178">&#x27;&#x27;</span><span class="token" style="color:#d4d4d4">)</span><span class="token" style="color:#d4d4d4">,</span><span>
</span><span>        </span><span class="token" style="color:#d4d4d4">}</span><span class="token" style="color:#d4d4d4">,</span><span>
</span><span>        </span><span class="token" style="color:#6a9955">// 正则表达式写法：http://localhost:5173/fallback/ -&gt; http://jsonplaceholder.typicode.com/</span><span>
</span><span>        </span><span class="token string-property" style="color:#9cdcfe">&#x27;^/fallback/.*&#x27;</span><span class="token" style="color:#d4d4d4">:</span><span> </span><span class="token" style="color:#d4d4d4">{</span><span>
</span><span>          target</span><span class="token" style="color:#d4d4d4">:</span><span> </span><span class="token" style="color:#ce9178">&#x27;http://jsonplaceholder.typicode.com&#x27;</span><span class="token" style="color:#d4d4d4">,</span><span>
</span><span>          changeOrigin</span><span class="token" style="color:#d4d4d4">:</span><span> </span><span class="token" style="color:#569cd6">true</span><span class="token" style="color:#d4d4d4">,</span><span>
</span><span>          </span><span class="token function-variable" style="color:#dcdcaa">rewrite</span><span class="token" style="color:#d4d4d4">:</span><span> </span><span class="token" style="color:#d4d4d4">(</span><span>path</span><span class="token" style="color:#d4d4d4">)</span><span> </span><span class="token" style="color:#569CD6">=&gt;</span><span> path</span><span class="token" style="color:#d4d4d4">.</span><span class="token method property-access" style="color:#dcdcaa">replace</span><span class="token" style="color:#d4d4d4">(</span><span class="token regex-delimiter" style="color:#d16969">/</span><span class="token regex-source language-regex" style="color:#d16969">^\/fallback</span><span class="token regex-delimiter" style="color:#d16969">/</span><span class="token" style="color:#d4d4d4">,</span><span> </span><span class="token" style="color:#ce9178">&#x27;&#x27;</span><span class="token" style="color:#d4d4d4">)</span><span class="token" style="color:#d4d4d4">,</span><span>
</span><span>        </span><span class="token" style="color:#d4d4d4">}</span><span class="token" style="color:#d4d4d4">,</span><span>
</span><span>        </span><span class="token" style="color:#6a9955">// 使用 proxy 实例</span><span>
</span><span>        </span><span class="token string-property" style="color:#9cdcfe">&#x27;/api&#x27;</span><span class="token" style="color:#d4d4d4">:</span><span> </span><span class="token" style="color:#d4d4d4">{</span><span>
</span><span>          target</span><span class="token" style="color:#d4d4d4">:</span><span> </span><span class="token" style="color:#ce9178">&#x27;http://jsonplaceholder.typicode.com&#x27;</span><span class="token" style="color:#d4d4d4">,</span><span>
</span><span>          changeOrigin</span><span class="token" style="color:#d4d4d4">:</span><span> </span><span class="token" style="color:#569cd6">true</span><span class="token" style="color:#d4d4d4">,</span><span>
</span><span>          </span><span class="token function-variable" style="color:#dcdcaa">configure</span><span class="token" style="color:#d4d4d4">:</span><span> </span><span class="token" style="color:#d4d4d4">(</span><span>proxy</span><span class="token" style="color:#d4d4d4">,</span><span> options</span><span class="token" style="color:#d4d4d4">)</span><span> </span><span class="token" style="color:#569CD6">=&gt;</span><span> </span><span class="token" style="color:#d4d4d4">{</span><span>
</span><span>            </span><span class="token" style="color:#6a9955">// proxy 是 &#x27;http-proxy&#x27; 的实例</span><span>
</span><span>          </span><span class="token" style="color:#d4d4d4">}</span><span>
</span><span>        </span><span class="token" style="color:#d4d4d4">}</span><span class="token" style="color:#d4d4d4">,</span><span>
</span><span>        </span><span class="token" style="color:#6a9955">// 代理 websockets 或 socket.io 写法：ws://localhost:5173/socket.io -&gt; ws://localhost:5174/socket.io</span><span>
</span><span>        </span><span class="token string-property" style="color:#9cdcfe">&#x27;/socket.io&#x27;</span><span class="token" style="color:#d4d4d4">:</span><span> </span><span class="token" style="color:#d4d4d4">{</span><span>
</span><span>          target</span><span class="token" style="color:#d4d4d4">:</span><span> </span><span class="token" style="color:#ce9178">&#x27;ws://localhost:5174&#x27;</span><span class="token" style="color:#d4d4d4">,</span><span>
</span><span>          ws</span><span class="token" style="color:#d4d4d4">:</span><span> </span><span class="token" style="color:#569cd6">true</span><span class="token" style="color:#d4d4d4">,</span><span>
</span><span>        </span><span class="token" style="color:#d4d4d4">}</span><span class="token" style="color:#d4d4d4">,</span><span>
</span><span>      </span><span class="token" style="color:#d4d4d4">}</span><span class="token" style="color:#d4d4d4">,</span><span>
</span><span>    </span><span class="token" style="color:#d4d4d4">}</span><span>
</span><span>  </span><span class="token" style="color:#d4d4d4">}</span><span class="token" style="color:#d4d4d4">)</span><span>
</span></code></pre></div></pre>
<h3 style="font-family:&#x27;Maven Pro&#x27;, sans-serif;font-size:calc(1rem + 0.5vw);color:#1d2b35;padding:.6em 0;overflow-wrap:break-word">浏览器兼容</h3>
<pre><div class="jsx-1471609662"><div class="jsx-1471609662 file-name-container"><p class="jsx-1471609662 file-name">vite.config.ts</p></div><pre class="language-typescript:vite.config.ts" style="color:#1d2b35;font-size:13px;text-shadow:none;font-family:Menlo, Monaco, Consolas, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, &quot;Courier New&quot;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.2;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:0px;overflow:auto;background:#1e1e1e;background-color:#071013f2;padding-bottom:1em;margin-bottom:1vh;border-bottom-left-radius:5px;border-bottom-right-radius:5px"><code class="language-typescript" style="color:#9cdcfe;font-size:calc(0.8rem + 0.1vw);text-shadow:none;font-family:Menlo, Monaco, Consolas, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, &quot;Courier New&quot;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.2;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:#c586c0">import</span><span> </span><span class="token" style="color:#d4d4d4">{</span><span class="token"> defineConfig </span><span class="token" style="color:#d4d4d4">}</span><span> </span><span class="token" style="color:#c586c0">from</span><span> </span><span class="token" style="color:#ce9178">&#x27;vite&#x27;</span><span>
</span><span></span><span class="token" style="color:#c586c0">import</span><span> </span><span class="token">vue</span><span> </span><span class="token" style="color:#c586c0">from</span><span> </span><span class="token" style="color:#ce9178">&#x27;@vitejs/plugin-vue&#x27;</span><span>
</span><span></span><span class="token" style="color:#c586c0">import</span><span> </span><span class="token">legacy</span><span> </span><span class="token" style="color:#c586c0">from</span><span> </span><span class="token" style="color:#ce9178">&#x27;@vitejs/plugin-legacy&#x27;</span><span>
</span><span></span><span class="token" style="color:#c586c0">export</span><span> </span><span class="token" style="color:#c586c0">default</span><span> </span><span class="token" style="color:#dcdcaa">defineConfig</span><span class="token" style="color:#d4d4d4">(</span><span class="token" style="color:#d4d4d4">{</span><span>
</span><span>  plugins</span><span class="token" style="color:#d4d4d4">:</span><span> </span><span class="token" style="color:#d4d4d4">[</span><span>
</span><span>    </span><span class="token" style="color:#dcdcaa">vue</span><span class="token" style="color:#d4d4d4">(</span><span class="token" style="color:#d4d4d4">)</span><span class="token" style="color:#d4d4d4">,</span><span>
</span><span>    </span><span class="token" style="color:#dcdcaa">legacy</span><span class="token" style="color:#d4d4d4">(</span><span class="token" style="color:#d4d4d4">{</span><span>
</span><span>      targets</span><span class="token" style="color:#d4d4d4">:</span><span> </span><span class="token" style="color:#d4d4d4">[</span><span class="token" style="color:#ce9178">&#x27;defaults&#x27;</span><span class="token" style="color:#d4d4d4">,</span><span> </span><span class="token" style="color:#ce9178">&#x27;ie &gt;= 11&#x27;</span><span class="token" style="color:#d4d4d4">,</span><span> </span><span class="token" style="color:#ce9178">&#x27;chrome 52&#x27;</span><span class="token" style="color:#d4d4d4">]</span><span class="token" style="color:#d4d4d4">,</span><span>  </span><span class="token" style="color:#6a9955">//需要兼容的目标列表，可以设置多个</span><span>
</span><span>      additionalLegacyPolyfills</span><span class="token" style="color:#d4d4d4">:</span><span> </span><span class="token" style="color:#d4d4d4">[</span><span class="token" style="color:#ce9178">&#x27;regenerator-runtime/runtime&#x27;</span><span class="token" style="color:#d4d4d4">]</span><span class="token" style="color:#d4d4d4">,</span><span>
</span><span>      renderLegacyChunks</span><span class="token" style="color:#d4d4d4">:</span><span> </span><span class="token" style="color:#569cd6">true</span><span class="token" style="color:#d4d4d4">,</span><span>
</span><span>      polyfills</span><span class="token" style="color:#d4d4d4">:</span><span> </span><span class="token" style="color:#d4d4d4">[</span><span>
</span><span>        </span><span class="token" style="color:#ce9178">&#x27;es.symbol&#x27;</span><span class="token" style="color:#d4d4d4">,</span><span>
</span><span>        </span><span class="token" style="color:#ce9178">&#x27;es.array.filter&#x27;</span><span class="token" style="color:#d4d4d4">,</span><span>
</span><span>        </span><span class="token" style="color:#ce9178">&#x27;es.promise&#x27;</span><span class="token" style="color:#d4d4d4">,</span><span>
</span><span>        </span><span class="token" style="color:#ce9178">&#x27;es.promise.finally&#x27;</span><span class="token" style="color:#d4d4d4">,</span><span>
</span><span>        </span><span class="token" style="color:#ce9178">&#x27;es/map&#x27;</span><span class="token" style="color:#d4d4d4">,</span><span>
</span><span>        </span><span class="token" style="color:#ce9178">&#x27;es/set&#x27;</span><span class="token" style="color:#d4d4d4">,</span><span>
</span><span>        </span><span class="token" style="color:#ce9178">&#x27;es.array.for-each&#x27;</span><span class="token" style="color:#d4d4d4">,</span><span>
</span><span>        </span><span class="token" style="color:#ce9178">&#x27;es.object.define-properties&#x27;</span><span class="token" style="color:#d4d4d4">,</span><span>
</span><span>        </span><span class="token" style="color:#ce9178">&#x27;es.object.define-property&#x27;</span><span class="token" style="color:#d4d4d4">,</span><span>
</span><span>        </span><span class="token" style="color:#ce9178">&#x27;es.object.get-own-property-descriptor&#x27;</span><span class="token" style="color:#d4d4d4">,</span><span>
</span><span>        </span><span class="token" style="color:#ce9178">&#x27;es.object.get-own-property-descriptors&#x27;</span><span class="token" style="color:#d4d4d4">,</span><span>
</span><span>        </span><span class="token" style="color:#ce9178">&#x27;es.object.keys&#x27;</span><span class="token" style="color:#d4d4d4">,</span><span>
</span><span>        </span><span class="token" style="color:#ce9178">&#x27;es.object.to-string&#x27;</span><span class="token" style="color:#d4d4d4">,</span><span>
</span><span>        </span><span class="token" style="color:#ce9178">&#x27;web.dom-collections.for-each&#x27;</span><span class="token" style="color:#d4d4d4">,</span><span>
</span><span>        </span><span class="token" style="color:#ce9178">&#x27;esnext.global-this&#x27;</span><span class="token" style="color:#d4d4d4">,</span><span>
</span><span>        </span><span class="token" style="color:#ce9178">&#x27;esnext.string.match-all&#x27;</span><span>
</span><span>      </span><span class="token" style="color:#d4d4d4">]</span><span>
</span><span>    </span><span class="token" style="color:#d4d4d4">}</span><span class="token" style="color:#d4d4d4">)</span><span>
</span><span>  </span><span class="token" style="color:#d4d4d4">]</span><span class="token" style="color:#d4d4d4">,</span><span>
</span><span></span><span class="token" style="color:#d4d4d4">}</span><span class="token" style="color:#d4d4d4">)</span><span>
</span>
</code></pre></div></pre></div></div></main></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"metaData":{"title":"vite学习","description":"vite学习","tags":["vite"],"keywords":["vite"],"id":"vite学习","create":1687144350874,"lastUpdate":1687337636339},"content":{"compiledSource":"/*@jsxRuntime automatic @jsxImportSource react*/\nconst {Fragment: _Fragment, jsx: _jsx, jsxs: _jsxs} = arguments[0];\nconst {useMDXComponents: _provideComponents} = arguments[0];\nfunction _createMdxContent(props) {\n  const _components = Object.assign({\n    h1: \"h1\",\n    p: \"p\",\n    ul: \"ul\",\n    li: \"li\",\n    a: \"a\",\n    h3: \"h3\",\n    blockquote: \"blockquote\",\n    pre: \"pre\",\n    code: \"code\"\n  }, _provideComponents(), props.components);\n  return _jsxs(_Fragment, {\n    children: [_jsx(_components.h1, {\n      children: \"vite学习\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"Vite（法语意为 \\\"快速的\\\"，发音 /vit/，发音同 \\\"veet\\\"）是一种新型前端构建工具，能够显著提升前端开发体验。它主要由两部分组成：\"\n    }), \"\\n\", _jsxs(_components.ul, {\n      children: [\"\\n\", _jsx(_components.li, {\n        children: \"一个开发服务器，它基于 原生 ES 模块 提供了 丰富的内建功能，如速度快到惊人的 模块热更新（HMR）。\"\n      }), \"\\n\", _jsx(_components.li, {\n        children: \"一套构建指令，它使用 Rollup 打包你的代码，并且它是预配置的，可输出用于生产环境的高度优化过的静态资源。\"\n      }), \"\\n\"]\n    }), \"\\n\", _jsx(_components.p, {\n      children: _jsx(_components.a, {\n        href: \"https://cn.vitejs.dev/\",\n        children: \"vite官网\"\n      })\n    }), \"\\n\", _jsx(_components.h3, {\n      children: \"社区模板初始化\"\n    }), \"\\n\", _jsxs(_components.blockquote, {\n      children: [\"\\n\", _jsx(_components.p, {\n        children: \"npm create vite@latest\"\n      }), \"\\n\"]\n    }), \"\\n\", _jsx(_components.h3, {\n      children: \"vite.config.ts配置\"\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsx(_components.code, {\n        className: \"language-typescript:vite.config.ts\",\n        children: \"import { defineConfig } from 'vite'\\nimport react from '@vitejs/plugin-react'\\n\\n// https://vitejs.dev/config/\\nexport default defineConfig({\\n  plugins: [react()],\\n})\\n\"\n      })\n    }), \"\\n\", _jsx(_components.h3, {\n      children: \"路径别名\"\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsx(_components.code, {\n        className: \"language-typescript:vite.config.ts\",\n        children: \"import { defineConfig } from 'vite'\\nimport path from 'path'\\nexport default defineConfig({\\n  resolve: {\\n    alias: {\\n      '@': path.resolve(__dirname, 'src'),\\n    },\\n    extensions: ['.js', '.vue', '.json'], // vue项目配置\\n  },\\n})\\n\"\n      })\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"配合typescript需要在tsconfig同步配置\"\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsx(_components.code, {\n        className: \"language-json:tsconfig.json\",\n        children: \"{\\n  \\\"compilerOptions\\\": {\\n    \\\"baseUrl\\\": \\\".\\\",\\n    \\\"paths\\\": {\\\"@/*\\\":[\\\"src/*\\\"]},\\n  },\\n  \\\"include\\\": [\\\"src/**/*.ts\\\", \\\"src/**/*.d.ts\\\", \\\"src/**/*.tsx\\\", \\\"src/**/*.vue\\\",\\\"@types/*.d.ts\\\"],\\n  \\\"references\\\": [{ \\\"path\\\": \\\"./tsconfig.node.json\\\" }]\\n}\\n\"\n      })\n    }), \"\\n\", _jsx(_components.h3, {\n      children: \"代码压缩\"\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsx(_components.code, {\n        className: \"language-typescript:vite.config.ts\",\n        children: \"import { defineConfig } from 'vite'\\nimport path from 'path'\\nimport viteCompression from 'vite-plugin-compression'\\nexport default defineConfig({\\n  plugins: [viteCompression()],\\n})\\n\"\n      })\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"需要nginx配合\"\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsx(_components.code, {\n        className: \"language-yaml\",\n        children: \"# 开启gzip\\ngzip on;\\n\\n# 启用gzip压缩的最小文件，小于设置值的文件将不会压缩\\ngzip_min_length 1k;\\n\\n# gzip 压缩级别，1-9，数字越大压缩的越好，也越占用CPU时间，后面会有详细说明\\ngzip_comp_level 1;\\n\\n# 进行压缩的文件类型。javascript有多种形式。其中的值可以在 mime.types 文件中找到。\\ngzip_types text/plain application/javascript application/x-javascript text/css application/xml text/javascript application/x-httpd-php image/jpeg image/gif image/png application/vnd.ms-fontobject font/ttf font/opentype font/x-woff image/svg+xml;\\n\\n# 是否在http header中添加Vary: Accept-Encoding，建议开启\\ngzip_vary on;\\n\\n# 禁用IE 6 gzip\\ngzip_disable \\\"MSIE [1-6]\\\\.\\\";\\n\\n# 设置压缩所需要的缓冲区大小\\ngzip_buffers 32 4k;\\n\"\n      })\n    }), \"\\n\", _jsx(_components.h3, {\n      children: \"公共依赖打包成一个文件\"\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsx(_components.code, {\n        className: \"language-typescript:vite.config.ts\",\n        children: \"  import { defineConfig } from 'vite'\\n  export default defineConfig({\\n    build: {\\n      outDir: \\\"../q/src/main/resources/static\\\",\\n      manifest: true,\\n      emptyOutDir: true,\\n      minify:\\\"terser\\\",\\n      terserOptions: {\\n        compress: {\\n          drop_console: true,\\n          drop_debugger: true,\\n        },\\n      },\\n      chunkSizeWarningLimit: 1000,\\n      rollupOptions: {\\n        output: {\\n          entryFileNames: 'assets/entry/[name][hash].js',\\n          chunkFileNames: 'assets/chunk/[name][hash].js',\\n          assetFileNames: 'assets/file/[name][hash].[ext]',\\n          manualChunks(id) {\\n            const NODE_MODULES = 'node_modules'\\n            if (id.includes(NODE_MODULES)) return 'vendor'\\n          },\\n        },\\n      }\\n    },\\n  })\\n\"\n      })\n    }), \"\\n\", _jsx(_components.h3, {\n      children: \"server配置\"\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsx(_components.code, {\n        className: \"language-typescript:vite.config.ts\",\n        children: \"  import { defineConfig } from 'vite'\\n  export default defineConfig({\\n    server: {\\n      host: \\\"0.0.0.0\\\",\\n      port:\\\"3000\\\",// 默认5173\\n      proxy: {\\n        // 字符串简写写法：http://localhost:5173/foo -\u003e http://localhost:4567/foo\\n        '/foo': 'http://localhost:4567',\\n        // 带选项写法：http://localhost:5173/api/bar -\u003e http://jsonplaceholder.typicode.com/bar\\n        '/api': {\\n          target: 'http://jsonplaceholder.typicode.com',\\n          changeOrigin: true,\\n          rewrite: (path) =\u003e path.replace(/^\\\\/api/, ''),\\n        },\\n        // 正则表达式写法：http://localhost:5173/fallback/ -\u003e http://jsonplaceholder.typicode.com/\\n        '^/fallback/.*': {\\n          target: 'http://jsonplaceholder.typicode.com',\\n          changeOrigin: true,\\n          rewrite: (path) =\u003e path.replace(/^\\\\/fallback/, ''),\\n        },\\n        // 使用 proxy 实例\\n        '/api': {\\n          target: 'http://jsonplaceholder.typicode.com',\\n          changeOrigin: true,\\n          configure: (proxy, options) =\u003e {\\n            // proxy 是 'http-proxy' 的实例\\n          }\\n        },\\n        // 代理 websockets 或 socket.io 写法：ws://localhost:5173/socket.io -\u003e ws://localhost:5174/socket.io\\n        '/socket.io': {\\n          target: 'ws://localhost:5174',\\n          ws: true,\\n        },\\n      },\\n    }\\n  })\\n\"\n      })\n    }), \"\\n\", _jsx(_components.h3, {\n      children: \"浏览器兼容\"\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsx(_components.code, {\n        className: \"language-typescript:vite.config.ts\",\n        children: \"import { defineConfig } from 'vite'\\nimport vue from '@vitejs/plugin-vue'\\nimport legacy from '@vitejs/plugin-legacy'\\nexport default defineConfig({\\n  plugins: [\\n    vue(),\\n    legacy({\\n      targets: ['defaults', 'ie \u003e= 11', 'chrome 52'],  //需要兼容的目标列表，可以设置多个\\n      additionalLegacyPolyfills: ['regenerator-runtime/runtime'],\\n      renderLegacyChunks: true,\\n      polyfills: [\\n        'es.symbol',\\n        'es.array.filter',\\n        'es.promise',\\n        'es.promise.finally',\\n        'es/map',\\n        'es/set',\\n        'es.array.for-each',\\n        'es.object.define-properties',\\n        'es.object.define-property',\\n        'es.object.get-own-property-descriptor',\\n        'es.object.get-own-property-descriptors',\\n        'es.object.keys',\\n        'es.object.to-string',\\n        'web.dom-collections.for-each',\\n        'esnext.global-this',\\n        'esnext.string.match-all'\\n      ]\\n    })\\n  ],\\n})\\n\\n\"\n      })\n    })]\n  });\n}\nfunction MDXContent(props = {}) {\n  const {wrapper: MDXLayout} = Object.assign({}, _provideComponents(), props.components);\n  return MDXLayout ? _jsx(MDXLayout, Object.assign({}, props, {\n    children: _jsx(_createMdxContent, props)\n  })) : _createMdxContent(props);\n}\nreturn {\n  default: MDXContent\n};\n","frontmatter":{},"scope":{}}},"__N_SSG":true},"page":"/blog/detail/[id]","query":{"id":"vite学习"},"buildId":"Rb0y7oK5AW-ds3C_tW37q","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>