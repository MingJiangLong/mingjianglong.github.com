<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><title>(*^▽^*)</title><meta name="next-head-count" content="3"/><link rel="preload" href="/_next/static/css/80a95484ea2876e6.css" as="style"/><link rel="stylesheet" href="/_next/static/css/80a95484ea2876e6.css" data-n-g=""/><link rel="preload" href="/_next/static/css/f8f6338530cfd437.css" as="style"/><link rel="stylesheet" href="/_next/static/css/f8f6338530cfd437.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/_next/static/chunks/webpack-ee7e63bc15b31913.js" defer=""></script><script src="/_next/static/chunks/framework-2c79e2a64abdb08b.js" defer=""></script><script src="/_next/static/chunks/main-7477d36a73a3487c.js" defer=""></script><script src="/_next/static/chunks/pages/_app-d15f243f6b85624f.js" defer=""></script><script src="/_next/static/chunks/171-0943d13a71220321.js" defer=""></script><script src="/_next/static/chunks/pages/blog/detail/%5Bid%5D-0499978da9bd8e44.js" defer=""></script><script src="/_next/static/HP81LP17NPlwa6Lp7DH3o/_buildManifest.js" defer=""></script><script src="/_next/static/HP81LP17NPlwa6Lp7DH3o/_ssgManifest.js" defer=""></script></head><body><div id="__next"><div class="layout_main-container__jR90l"><main class="layout_main__E22hH"><div style="width:15em"><nav class="sidebar_nav__EFmKd"><div class="Avatar_container__egCID"><div class="Avatar_image-container__9WrGh"><img src="/images/avatar.png" alt="mingjianglong" class="Avatar_avatar__oORu6"/><h2>龙江</h2><h3 style="font-weight:normal;padding-top:.6em;color:grey">Jiang Long</h3><h4 style="padding-top:1.3em">等风也等你~</h4><span class="Avatar_my-face__hbhE_">ღゝ◡╹)ノ♡</span></div><div></div></div><a style="color:black" href="/">开心☺</a><a style="color:black" href="/blog">Blog</a><a style="color:black" href="/archive">归档</a><a style="color:black" href="/resume">简介</a></nav></div><div style="flex:1;height:100vh;display:flex;flex-direction:column;overflow-y:hidden"><div style="height:100%;padding:7em;overflow:scroll"><h1 style="font-family:&#x27;Ubuntu&#x27;, sans-serif;font-size:calc(1rem + 1.5vw);color:#1d2b35;padding:1em 0;overflow-wrap:break-word">京东购机小时达</h1>
<p style="font-family:&#x27;Source Sans Pro&#x27;, sans-serif;font-size:calc(1rem + 0.1vw);color:#071013f2;margin:0vh 0 1vh 0;overflow-wrap:break-word">京东为给用户提供更快的物流效果，实现手机业务物流小时达。京东手机小时达业务供应商作为代理商，对接京东和拓展线下门店手机货源。京东手机小时达业务供应商需要一个系统打通京东履约系统和线下门店，实现门店上报、商品库存上报、订单下发。</p>
<p style="font-family:&#x27;Source Sans Pro&#x27;, sans-serif;font-size:calc(1rem + 0.1vw);color:#071013f2;margin:0vh 0 1vh 0;overflow-wrap:break-word"><img alt="流程图" src="/md-images/jd-sale.png" style="width:100%;height:auto"/></p>
<h2 style="font-family:&#x27;Maven Pro&#x27;, sans-serif;font-size:calc(1rem + 1vw);color:#1d2b35;padding:.8em 0;overflow-wrap:break-word">微信相关</h2>
<h3 style="font-family:&#x27;Maven Pro&#x27;, sans-serif;font-size:calc(1rem + 0.5vw);color:#1d2b35;padding:.6em 0;overflow-wrap:break-word">配置公众号<span class="SyntaxHighlighter_key-words__9bKIe">JS接口安全域名</span>和<span class="SyntaxHighlighter_key-words__9bKIe">授权回调页面域名</span></h3>
<p style="font-family:&#x27;Source Sans Pro&#x27;, sans-serif;font-size:calc(1rem + 0.1vw);color:#071013f2;margin:0vh 0 1vh 0;overflow-wrap:break-word">配置此两项时需要注意只需要配置<span class="SyntaxHighlighter_key-words__9bKIe">host(主机)</span></p>
<p style="font-family:&#x27;Source Sans Pro&#x27;, sans-serif;font-size:calc(1rem + 0.1vw);color:#071013f2;margin:0vh 0 1vh 0;overflow-wrap:break-word">列如:</p>
<p style="font-family:&#x27;Source Sans Pro&#x27;, sans-serif;font-size:calc(1rem + 0.1vw);color:#071013f2;margin:0vh 0 1vh 0;overflow-wrap:break-word">项目地址: http:www.hello.com/a/#/world</p>
<p style="font-family:&#x27;Source Sans Pro&#x27;, sans-serif;font-size:calc(1rem + 0.1vw);color:#071013f2;margin:0vh 0 1vh 0;overflow-wrap:break-word">配置内容: www.hello.com</p>
<h3 style="font-family:&#x27;Maven Pro&#x27;, sans-serif;font-size:calc(1rem + 0.5vw);color:#1d2b35;padding:.6em 0;overflow-wrap:break-word">静默获取code</h3>
<h3 style="font-family:&#x27;Maven Pro&#x27;, sans-serif;font-size:calc(1rem + 0.5vw);color:#1d2b35;padding:.6em 0;overflow-wrap:break-word">调用js接口</h3>
<h2 style="font-family:&#x27;Maven Pro&#x27;, sans-serif;font-size:calc(1rem + 1vw);color:#1d2b35;padding:.8em 0;overflow-wrap:break-word">项目相关</h2>
<h3 style="font-family:&#x27;Maven Pro&#x27;, sans-serif;font-size:calc(1rem + 0.5vw);color:#1d2b35;padding:.6em 0;overflow-wrap:break-word">登录保持</h3>
<p style="font-family:&#x27;Source Sans Pro&#x27;, sans-serif;font-size:calc(1rem + 0.1vw);color:#071013f2;margin:0vh 0 1vh 0;overflow-wrap:break-word">使用localStorage结合token</p>
<h3 style="font-family:&#x27;Maven Pro&#x27;, sans-serif;font-size:calc(1rem + 0.5vw);color:#1d2b35;padding:.6em 0;overflow-wrap:break-word">微信的code 使用</h3>
<p style="font-family:&#x27;Source Sans Pro&#x27;, sans-serif;font-size:calc(1rem + 0.1vw);color:#071013f2;margin:0vh 0 1vh 0;overflow-wrap:break-word">该项目中需要将用户的openid和后端用户绑定,所以需要依赖前端的code。但是code在微信设计中只能使用一次,所以后台登录逻辑中需要注意code的使用时机(最后使用code),报错内容需要告知前端是否已经使用code,再接口报错且code已经使用需要重新刷新code</p>
<h3 style="font-family:&#x27;Maven Pro&#x27;, sans-serif;font-size:calc(1rem + 0.5vw);color:#1d2b35;padding:.6em 0;overflow-wrap:break-word">重定向获取code</h3>
<p style="font-family:&#x27;Source Sans Pro&#x27;, sans-serif;font-size:calc(1rem + 0.1vw);color:#071013f2;margin:0vh 0 1vh 0;overflow-wrap:break-word">原本是在公众号菜单栏添加微信的重定向接口,这样就会导致每一个菜单进入项目页面都有一个静默获取code的过程(页面展示是有一个loading),实际上我们只需要静默获取一次,使用之后再获取一次即可。那我们就可以把获取动作放在自己项目中而不是放在微信底部菜单栏中</p></div></div></main></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"metaData":{"title":"京东购机小时达项目","description":"对接京东履约系统和线下门店","tags":["微信公众号","H5","vue"],"keywords":["微信公众号","H5","vue"],"id":"京东购机小时达","create":1705631674829,"lastUpdate":1705650397310},"content":{"compiledSource":"/*@jsxRuntime automatic @jsxImportSource react*/\nconst {Fragment: _Fragment, jsx: _jsx, jsxs: _jsxs} = arguments[0];\nconst {useMDXComponents: _provideComponents} = arguments[0];\nfunction _createMdxContent(props) {\n  const _components = Object.assign({\n    h1: \"h1\",\n    p: \"p\",\n    img: \"img\",\n    h2: \"h2\",\n    h3: \"h3\",\n    code: \"code\"\n  }, _provideComponents(), props.components);\n  return _jsxs(_Fragment, {\n    children: [_jsx(_components.h1, {\n      children: \"京东购机小时达\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"京东为给用户提供更快的物流效果，实现手机业务物流小时达。京东手机小时达业务供应商作为代理商，对接京东和拓展线下门店手机货源。京东手机小时达业务供应商需要一个系统打通京东履约系统和线下门店，实现门店上报、商品库存上报、订单下发。\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: _jsx(_components.img, {\n        src: \"/md-images/jd-sale.png\",\n        alt: \"流程图\"\n      })\n    }), \"\\n\", _jsx(_components.h2, {\n      children: \"微信相关\"\n    }), \"\\n\", _jsxs(_components.h3, {\n      children: [\"配置公众号\", _jsx(_components.code, {\n        children: \"JS接口安全域名\"\n      }), \"和\", _jsx(_components.code, {\n        children: \"授权回调页面域名\"\n      })]\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"配置此两项时需要注意只需要配置\", _jsx(_components.code, {\n        children: \"host(主机)\"\n      })]\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"列如:\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"项目地址: http:www.hello.com/a/#/world\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"配置内容: www.hello.com\"\n    }), \"\\n\", _jsx(_components.h3, {\n      children: \"静默获取code\"\n    }), \"\\n\", _jsx(_components.h3, {\n      children: \"调用js接口\"\n    }), \"\\n\", _jsx(_components.h2, {\n      children: \"项目相关\"\n    }), \"\\n\", _jsx(_components.h3, {\n      children: \"登录保持\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"使用localStorage结合token\"\n    }), \"\\n\", _jsx(_components.h3, {\n      children: \"微信的code 使用\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"该项目中需要将用户的openid和后端用户绑定,所以需要依赖前端的code。但是code在微信设计中只能使用一次,所以后台登录逻辑中需要注意code的使用时机(最后使用code),报错内容需要告知前端是否已经使用code,再接口报错且code已经使用需要重新刷新code\"\n    }), \"\\n\", _jsx(_components.h3, {\n      children: \"重定向获取code\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"原本是在公众号菜单栏添加微信的重定向接口,这样就会导致每一个菜单进入项目页面都有一个静默获取code的过程(页面展示是有一个loading),实际上我们只需要静默获取一次,使用之后再获取一次即可。那我们就可以把获取动作放在自己项目中而不是放在微信底部菜单栏中\"\n    })]\n  });\n}\nfunction MDXContent(props = {}) {\n  const {wrapper: MDXLayout} = Object.assign({}, _provideComponents(), props.components);\n  return MDXLayout ? _jsx(MDXLayout, Object.assign({}, props, {\n    children: _jsx(_createMdxContent, props)\n  })) : _createMdxContent(props);\n}\nreturn {\n  default: MDXContent\n};\n","frontmatter":{},"scope":{}}},"__N_SSG":true},"page":"/blog/detail/[id]","query":{"id":"京东购机小时达"},"buildId":"HP81LP17NPlwa6Lp7DH3o","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>