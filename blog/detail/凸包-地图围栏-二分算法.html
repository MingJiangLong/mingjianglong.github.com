<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><title>(*^▽^*)</title><meta name="next-head-count" content="3"/><link rel="preload" href="/_next/static/css/3bf46ada9988a1ba.css" as="style"/><link rel="stylesheet" href="/_next/static/css/3bf46ada9988a1ba.css" data-n-g=""/><link rel="preload" href="/_next/static/css/f8f6338530cfd437.css" as="style"/><link rel="stylesheet" href="/_next/static/css/f8f6338530cfd437.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/_next/static/chunks/webpack-ee7e63bc15b31913.js" defer=""></script><script src="/_next/static/chunks/framework-2c79e2a64abdb08b.js" defer=""></script><script src="/_next/static/chunks/main-7477d36a73a3487c.js" defer=""></script><script src="/_next/static/chunks/pages/_app-d4a67795baa53afd.js" defer=""></script><script src="/_next/static/chunks/784-00c1e6d16e5c2f27.js" defer=""></script><script src="/_next/static/chunks/pages/blog/detail/%5Bid%5D-7068d1fed1a11860.js" defer=""></script><script src="/_next/static/Hva7HUnK3O36PIkcQPHRk/_buildManifest.js" defer=""></script><script src="/_next/static/Hva7HUnK3O36PIkcQPHRk/_ssgManifest.js" defer=""></script><style id="__jsx-1471609662">.file-name-container.jsx-1471609662{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;width:100%;max-width:100%;background-color:#1d2b35d9;padding:-webkit-calc(.5rem + .2vw);padding:-moz-calc(.5rem + .2vw);padding:calc(.5rem + .2vw);-webkit-border-top-left-radius:5px;-moz-border-radius-topleft:5px;border-top-left-radius:5px;-webkit-border-top-right-radius:5px;-moz-border-radius-topright:5px;border-top-right-radius:5px;margin-top:1vh;white-space:pre-wrap;word-wrap:break-word;overflow-wrap:break-word}.file-name.jsx-1471609662{font-family:"Share Tech Mono",monospace;font-size:-webkit-calc(.9rem + .1vw);font-size:-moz-calc(.9rem + .1vw);font-size:calc(.9rem + .1vw);color:#fffecbf2}</style></head><body><div id="__next"><div class="layout_main-container__jR90l"><main class="layout_main__E22hH"><div style="width:15em"><nav class="sidebar_nav__EFmKd"><div class="Avatar_container__egCID"><div class="Avatar_image-container__9WrGh"><img src="/images/avatar.png" alt="mingjianglong" class="Avatar_avatar__oORu6"/><h2>龙江</h2><h3 style="font-weight:normal;padding-top:.6em;color:grey">Jiang Long</h3><h4 style="padding-top:1.3em">等风也等你~</h4><span class="Avatar_my-face__hbhE_">ღゝ◡╹)ノ♡</span></div><div></div></div><a style="color:black" href="/">开心☺</a><a style="color:black" href="/blog">Blog</a><a style="color:black" href="/archive">归档</a><a style="color:black" href="/resume">简介</a></nav></div><div style="flex:1;height:100vh;display:flex;flex-direction:column;overflow-y:hidden"><div style="height:100%;padding:7em;overflow:scroll"><h1 style="font-family:&#x27;Ubuntu&#x27;, sans-serif;font-size:calc(1rem + 1.5vw);color:#1d2b35;padding:1em 0;overflow-wrap:break-word">凸包算法-地图围栏</h1>
<p style="font-family:&#x27;Source Sans Pro&#x27;, sans-serif;font-size:calc(1rem + 0.1vw);color:#071013f2;margin:0vh 0 1vh 0;overflow-wrap:break-word">公司零售货柜机在地图上的点需要围栏圈起来，以便显示大致范围</p>
<pre><pre class="language-js" style="color:#d4d4d4;font-size:calc(0.9rem + 0.1vw);text-shadow:none;font-family:Menlo, Monaco, Consolas, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, &quot;Courier New&quot;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.2;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto;background:#1e1e1e;background-color:#071013f2;margin-top:1vh;margin-bottom:1vh;border-radius:5px;padding-bottom:1em"><code class="language-js" style="color:#d4d4d4;font-size:calc(0.8rem + 0.1vw);text-shadow:none;font-family:Menlo, Monaco, Consolas, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, &quot;Courier New&quot;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.2;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span>
</span><span></span><span class="token doc-comment" style="color:#6a9955">/**
</span><span class="token doc-comment" style="color:#6a9955"> *      p2
</span><span class="token doc-comment" style="color:#6a9955"> *  p1&lt;
</span><span class="token doc-comment" style="color:#6a9955"> *      p3
</span><span class="token doc-comment" style="color:#6a9955"> * 叉积判断 p1p2 p1p3
</span><span class="token doc-comment" style="color:#6a9955"> * | p2.x-p1.x | p2.y-p1.y |
</span><span class="token doc-comment" style="color:#6a9955"> * | p3.x-p1.x | p3.y-p1.y |
</span><span class="token doc-comment" style="color:#6a9955"> * </span><span class="token doc-comment" style="color:#569CD6">@param</span><span class="token doc-comment" style="color:#6a9955"> </span><span class="token doc-comment" style="color:#d4d4d4">{</span><span class="token doc-comment" style="color:#d4d4d4">{</span><span class="token doc-comment" style="color:#4ec9b0">x</span><span class="token doc-comment" style="color:#d4d4d4">:</span><span class="token doc-comment" style="color:#4ec9b0">number</span><span class="token doc-comment" style="color:#d4d4d4">,</span><span class="token doc-comment" style="color:#4ec9b0">y</span><span class="token doc-comment" style="color:#d4d4d4">:</span><span class="token doc-comment" style="color:#4ec9b0">number</span><span class="token doc-comment" style="color:#d4d4d4">}</span><span class="token doc-comment" style="color:#d4d4d4">}</span><span class="token doc-comment" style="color:#6a9955"> </span><span class="token doc-comment" style="color:#9cdcfe">p1</span><span class="token doc-comment" style="color:#6a9955"> 
</span><span class="token doc-comment" style="color:#6a9955"> * </span><span class="token doc-comment" style="color:#569CD6">@param</span><span class="token doc-comment" style="color:#6a9955"> </span><span class="token doc-comment" style="color:#d4d4d4">{</span><span class="token doc-comment" style="color:#d4d4d4">{</span><span class="token doc-comment" style="color:#4ec9b0">x</span><span class="token doc-comment" style="color:#d4d4d4">:</span><span class="token doc-comment" style="color:#4ec9b0">number</span><span class="token doc-comment" style="color:#d4d4d4">,</span><span class="token doc-comment" style="color:#4ec9b0">y</span><span class="token doc-comment" style="color:#d4d4d4">:</span><span class="token doc-comment" style="color:#4ec9b0">number</span><span class="token doc-comment" style="color:#d4d4d4">}</span><span class="token doc-comment" style="color:#d4d4d4">}</span><span class="token doc-comment" style="color:#6a9955"> </span><span class="token doc-comment" style="color:#9cdcfe">p2</span><span class="token doc-comment" style="color:#6a9955"> 
</span><span class="token doc-comment" style="color:#6a9955"> * </span><span class="token doc-comment" style="color:#569CD6">@param</span><span class="token doc-comment" style="color:#6a9955"> </span><span class="token doc-comment" style="color:#d4d4d4">{</span><span class="token doc-comment" style="color:#d4d4d4">{</span><span class="token doc-comment" style="color:#4ec9b0">x</span><span class="token doc-comment" style="color:#d4d4d4">:</span><span class="token doc-comment" style="color:#4ec9b0">number</span><span class="token doc-comment" style="color:#d4d4d4">,</span><span class="token doc-comment" style="color:#4ec9b0">y</span><span class="token doc-comment" style="color:#d4d4d4">:</span><span class="token doc-comment" style="color:#4ec9b0">number</span><span class="token doc-comment" style="color:#d4d4d4">}</span><span class="token doc-comment" style="color:#d4d4d4">}</span><span class="token doc-comment" style="color:#6a9955"> </span><span class="token doc-comment" style="color:#9cdcfe">p3</span><span class="token doc-comment" style="color:#6a9955"> 
</span><span class="token doc-comment" style="color:#6a9955"> */</span><span>
</span><span></span><span class="token" style="color:#569CD6">function</span><span> </span><span class="token" style="color:#dcdcaa">crossProduct</span><span class="token" style="color:#d4d4d4">(</span><span class="token" style="color:#9cdcfe">p1</span><span class="token" style="color:#d4d4d4">,</span><span class="token" style="color:#9cdcfe"> p2</span><span class="token" style="color:#d4d4d4">,</span><span class="token" style="color:#9cdcfe"> p3</span><span class="token" style="color:#d4d4d4">)</span><span> </span><span class="token" style="color:#d4d4d4">{</span><span>
</span><span>  </span><span class="token" style="color:#c586c0">return</span><span> </span><span class="token" style="color:#d4d4d4">(</span><span>p2</span><span class="token" style="color:#d4d4d4">.</span><span class="token property-access">x</span><span> </span><span class="token" style="color:#d4d4d4">-</span><span> p1</span><span class="token" style="color:#d4d4d4">.</span><span class="token property-access">x</span><span class="token" style="color:#d4d4d4">)</span><span> </span><span class="token" style="color:#d4d4d4">*</span><span> </span><span class="token" style="color:#d4d4d4">(</span><span>p3</span><span class="token" style="color:#d4d4d4">.</span><span class="token property-access">y</span><span> </span><span class="token" style="color:#d4d4d4">-</span><span> p1</span><span class="token" style="color:#d4d4d4">.</span><span class="token property-access">y</span><span class="token" style="color:#d4d4d4">)</span><span> </span><span class="token" style="color:#d4d4d4">-</span><span> </span><span class="token" style="color:#d4d4d4">(</span><span>p2</span><span class="token" style="color:#d4d4d4">.</span><span class="token property-access">y</span><span> </span><span class="token" style="color:#d4d4d4">-</span><span> p1</span><span class="token" style="color:#d4d4d4">.</span><span class="token property-access">y</span><span class="token" style="color:#d4d4d4">)</span><span> </span><span class="token" style="color:#d4d4d4">*</span><span> </span><span class="token" style="color:#d4d4d4">(</span><span>p3</span><span class="token" style="color:#d4d4d4">.</span><span class="token property-access">x</span><span> </span><span class="token" style="color:#d4d4d4">-</span><span> p1</span><span class="token" style="color:#d4d4d4">.</span><span class="token property-access">x</span><span class="token" style="color:#d4d4d4">)</span><span class="token" style="color:#d4d4d4">;</span><span>
</span><span></span><span class="token" style="color:#d4d4d4">}</span><span>
</span>
<span></span><span class="token doc-comment" style="color:#6a9955">/**
</span><span class="token doc-comment" style="color:#6a9955"> * 
</span><span class="token doc-comment" style="color:#6a9955"> * </span><span class="token doc-comment" style="color:#569CD6">@param</span><span class="token doc-comment" style="color:#6a9955"> </span><span class="token doc-comment" style="color:#d4d4d4">{</span><span class="token doc-comment" style="color:#d4d4d4">{</span><span class="token doc-comment" style="color:#4ec9b0">x</span><span class="token doc-comment" style="color:#d4d4d4">:</span><span class="token doc-comment" style="color:#4ec9b0">number</span><span class="token doc-comment" style="color:#d4d4d4">,</span><span class="token doc-comment" style="color:#4ec9b0">y</span><span class="token doc-comment" style="color:#d4d4d4">:</span><span class="token doc-comment" style="color:#4ec9b0">number</span><span class="token doc-comment" style="color:#d4d4d4">}</span><span class="token doc-comment" style="color:#d4d4d4">[</span><span class="token doc-comment" style="color:#d4d4d4">]</span><span class="token doc-comment" style="color:#d4d4d4">}</span><span class="token doc-comment" style="color:#6a9955"> </span><span class="token doc-comment" style="color:#9cdcfe">points</span><span class="token doc-comment" style="color:#6a9955"> 
</span><span class="token doc-comment" style="color:#6a9955"> */</span><span>
</span><span></span><span class="token" style="color:#569CD6">function</span><span> </span><span class="token" style="color:#dcdcaa">getConvexHull</span><span class="token" style="color:#d4d4d4">(</span><span class="token" style="color:#9cdcfe">points</span><span class="token" style="color:#d4d4d4">)</span><span> </span><span class="token" style="color:#d4d4d4">{</span><span>
</span>
<span>  </span><span class="token" style="color:#c586c0">if</span><span> </span><span class="token" style="color:#d4d4d4">(</span><span>points</span><span class="token" style="color:#d4d4d4">.</span><span class="token property-access">length</span><span> </span><span class="token" style="color:#d4d4d4">&lt;=</span><span> </span><span class="token" style="color:#b5cea8">1</span><span class="token" style="color:#d4d4d4">)</span><span> </span><span class="token" style="color:#d4d4d4">{</span><span> </span><span class="token" style="color:#c586c0">return</span><span> points</span><span class="token" style="color:#d4d4d4">;</span><span> </span><span class="token" style="color:#d4d4d4">}</span><span>
</span>
<span>  </span><span class="token" style="color:#6a9955">//按照x坐标排序 </span><span>
</span><span>  points</span><span class="token" style="color:#d4d4d4">.</span><span class="token method property-access" style="color:#dcdcaa">sort</span><span class="token" style="color:#d4d4d4">(</span><span class="token" style="color:#d4d4d4">(</span><span class="token" style="color:#9cdcfe">a</span><span class="token" style="color:#d4d4d4">,</span><span class="token" style="color:#9cdcfe"> b</span><span class="token" style="color:#d4d4d4">)</span><span> </span><span class="token" style="color:#569CD6">=&gt;</span><span> a</span><span class="token" style="color:#d4d4d4">.</span><span class="token property-access">x</span><span> </span><span class="token" style="color:#d4d4d4">-</span><span> b</span><span class="token" style="color:#d4d4d4">.</span><span class="token property-access">x</span><span> </span><span class="token" style="color:#d4d4d4">||</span><span> a</span><span class="token" style="color:#d4d4d4">.</span><span class="token property-access">y</span><span> </span><span class="token" style="color:#d4d4d4">-</span><span> b</span><span class="token" style="color:#d4d4d4">.</span><span class="token property-access">y</span><span class="token" style="color:#d4d4d4">)</span><span class="token" style="color:#d4d4d4">;</span><span>
</span><span>  </span><span class="token" style="color:#569CD6">let</span><span> lowerHull </span><span class="token" style="color:#d4d4d4">=</span><span> </span><span class="token" style="color:#d4d4d4">[</span><span class="token" style="color:#d4d4d4">]</span><span class="token" style="color:#d4d4d4">;</span><span>
</span><span>  </span><span class="token" style="color:#c586c0">for</span><span> </span><span class="token" style="color:#d4d4d4">(</span><span class="token" style="color:#569CD6">let</span><span> i </span><span class="token" style="color:#d4d4d4">=</span><span> </span><span class="token" style="color:#b5cea8">0</span><span class="token" style="color:#d4d4d4">;</span><span> i </span><span class="token" style="color:#d4d4d4">&lt;</span><span> points</span><span class="token" style="color:#d4d4d4">.</span><span class="token property-access">length</span><span class="token" style="color:#d4d4d4">;</span><span> i</span><span class="token" style="color:#d4d4d4">++</span><span class="token" style="color:#d4d4d4">)</span><span> </span><span class="token" style="color:#d4d4d4">{</span><span>
</span><span>    </span><span class="token" style="color:#6a9955">//构建下凸包</span><span>
</span>
<span>    </span><span class="token" style="color:#6a9955">// 遍历凸包数据集判断当前点Pi是否在 H(n-2)H(n-1)的内侧(叉积&lt;0)，如果在内侧就移除H(n-1) </span><span>
</span><span>    </span><span class="token" style="color:#c586c0">while</span><span> </span><span class="token" style="color:#d4d4d4">(</span><span>
</span><span>      lowerHull</span><span class="token" style="color:#d4d4d4">.</span><span class="token property-access">length</span><span> </span><span class="token" style="color:#d4d4d4">&gt;=</span><span> </span><span class="token" style="color:#b5cea8">2</span><span> </span><span class="token" style="color:#d4d4d4">&amp;&amp;</span><span> 
</span><span>      </span><span class="token" style="color:#dcdcaa">crossProduct</span><span class="token" style="color:#d4d4d4">(</span><span>lowerHull</span><span class="token" style="color:#d4d4d4">[</span><span>lowerHull</span><span class="token" style="color:#d4d4d4">.</span><span class="token property-access">length</span><span> </span><span class="token" style="color:#d4d4d4">-</span><span> </span><span class="token" style="color:#b5cea8">2</span><span class="token" style="color:#d4d4d4">]</span><span class="token" style="color:#d4d4d4">,</span><span> lowerHull</span><span class="token" style="color:#d4d4d4">[</span><span>lowerHull</span><span class="token" style="color:#d4d4d4">.</span><span class="token property-access">length</span><span> </span><span class="token" style="color:#d4d4d4">-</span><span> </span><span class="token" style="color:#b5cea8">1</span><span class="token" style="color:#d4d4d4">]</span><span class="token" style="color:#d4d4d4">,</span><span> points</span><span class="token" style="color:#d4d4d4">[</span><span>i</span><span class="token" style="color:#d4d4d4">]</span><span class="token" style="color:#d4d4d4">)</span><span> </span><span class="token" style="color:#d4d4d4">&lt;=</span><span> </span><span class="token" style="color:#b5cea8">0</span><span>
</span><span>    </span><span class="token" style="color:#d4d4d4">)</span><span> </span><span class="token" style="color:#d4d4d4">{</span><span>
</span><span>      lowerHull</span><span class="token" style="color:#d4d4d4">.</span><span class="token method property-access" style="color:#dcdcaa">pop</span><span class="token" style="color:#d4d4d4">(</span><span class="token" style="color:#d4d4d4">)</span><span class="token" style="color:#d4d4d4">;</span><span>
</span><span>    </span><span class="token" style="color:#d4d4d4">}</span><span>
</span><span>    lowerHull</span><span class="token" style="color:#d4d4d4">.</span><span class="token method property-access" style="color:#dcdcaa">push</span><span class="token" style="color:#d4d4d4">(</span><span>points</span><span class="token" style="color:#d4d4d4">[</span><span>i</span><span class="token" style="color:#d4d4d4">]</span><span class="token" style="color:#d4d4d4">)</span><span class="token" style="color:#d4d4d4">;</span><span>
</span><span>  </span><span class="token" style="color:#d4d4d4">}</span><span>
</span><span>  </span><span class="token" style="color:#569CD6">let</span><span> upperHull </span><span class="token" style="color:#d4d4d4">=</span><span> </span><span class="token" style="color:#d4d4d4">[</span><span class="token" style="color:#d4d4d4">]</span><span class="token" style="color:#d4d4d4">;</span><span>
</span><span>  </span><span class="token" style="color:#c586c0">for</span><span> </span><span class="token" style="color:#d4d4d4">(</span><span class="token" style="color:#569CD6">let</span><span> i </span><span class="token" style="color:#d4d4d4">=</span><span> points</span><span class="token" style="color:#d4d4d4">.</span><span class="token property-access">length</span><span> </span><span class="token" style="color:#d4d4d4">-</span><span> </span><span class="token" style="color:#b5cea8">1</span><span class="token" style="color:#d4d4d4">;</span><span> i </span><span class="token" style="color:#d4d4d4">&gt;=</span><span> </span><span class="token" style="color:#b5cea8">0</span><span class="token" style="color:#d4d4d4">;</span><span> i</span><span class="token" style="color:#d4d4d4">--</span><span class="token" style="color:#d4d4d4">)</span><span> </span><span class="token" style="color:#d4d4d4">{</span><span>
</span><span>    </span><span class="token" style="color:#6a9955">//构建上凸包</span><span>
</span><span>    </span><span class="token" style="color:#c586c0">while</span><span> </span><span class="token" style="color:#d4d4d4">(</span><span>
</span><span>      upperHull</span><span class="token" style="color:#d4d4d4">.</span><span class="token property-access">length</span><span> </span><span class="token" style="color:#d4d4d4">&gt;=</span><span> </span><span class="token" style="color:#b5cea8">2</span><span> </span><span class="token" style="color:#d4d4d4">&amp;&amp;</span><span> 
</span><span>      </span><span class="token" style="color:#dcdcaa">crossProduct</span><span class="token" style="color:#d4d4d4">(</span><span>upperHull</span><span class="token" style="color:#d4d4d4">[</span><span>upperHull</span><span class="token" style="color:#d4d4d4">.</span><span class="token property-access">length</span><span> </span><span class="token" style="color:#d4d4d4">-</span><span> </span><span class="token" style="color:#b5cea8">2</span><span class="token" style="color:#d4d4d4">]</span><span class="token" style="color:#d4d4d4">,</span><span> upperHull</span><span class="token" style="color:#d4d4d4">[</span><span>upperHull</span><span class="token" style="color:#d4d4d4">.</span><span class="token property-access">length</span><span> </span><span class="token" style="color:#d4d4d4">-</span><span> </span><span class="token" style="color:#b5cea8">1</span><span class="token" style="color:#d4d4d4">]</span><span class="token" style="color:#d4d4d4">,</span><span> points</span><span class="token" style="color:#d4d4d4">[</span><span>i</span><span class="token" style="color:#d4d4d4">]</span><span class="token" style="color:#d4d4d4">)</span><span> </span><span class="token" style="color:#d4d4d4">&lt;=</span><span> </span><span class="token" style="color:#b5cea8">0</span><span class="token" style="color:#d4d4d4">)</span><span> </span><span class="token" style="color:#d4d4d4">{</span><span>
</span><span>      upperHull</span><span class="token" style="color:#d4d4d4">.</span><span class="token method property-access" style="color:#dcdcaa">pop</span><span class="token" style="color:#d4d4d4">(</span><span class="token" style="color:#d4d4d4">)</span><span class="token" style="color:#d4d4d4">;</span><span>
</span><span>    </span><span class="token" style="color:#d4d4d4">}</span><span>
</span><span>    upperHull</span><span class="token" style="color:#d4d4d4">.</span><span class="token method property-access" style="color:#dcdcaa">push</span><span class="token" style="color:#d4d4d4">(</span><span>points</span><span class="token" style="color:#d4d4d4">[</span><span>i</span><span class="token" style="color:#d4d4d4">]</span><span class="token" style="color:#d4d4d4">)</span><span class="token" style="color:#d4d4d4">;</span><span>
</span><span>  </span><span class="token" style="color:#d4d4d4">}</span><span>
</span><span>  </span><span class="token" style="color:#6a9955">//合并上下凸包 </span><span>
</span><span>  upperHull</span><span class="token" style="color:#d4d4d4">.</span><span class="token method property-access" style="color:#dcdcaa">pop</span><span class="token" style="color:#d4d4d4">(</span><span class="token" style="color:#d4d4d4">)</span><span class="token" style="color:#d4d4d4">;</span><span>
</span><span>  lowerHull</span><span class="token" style="color:#d4d4d4">.</span><span class="token method property-access" style="color:#dcdcaa">pop</span><span class="token" style="color:#d4d4d4">(</span><span class="token" style="color:#d4d4d4">)</span><span class="token" style="color:#d4d4d4">;</span><span>
</span><span>  </span><span class="token" style="color:#c586c0">return</span><span> lowerHull</span><span class="token" style="color:#d4d4d4">.</span><span class="token method property-access" style="color:#dcdcaa">concat</span><span class="token" style="color:#d4d4d4">(</span><span>upperHull</span><span class="token" style="color:#d4d4d4">)</span><span class="token" style="color:#d4d4d4">;</span><span>
</span><span></span><span class="token" style="color:#d4d4d4">}</span><span>
</span></code></pre></pre></div></div></main></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"metaData":{"title":"凸包-地图围栏","description":"公司零售货柜机在地图上的点需要围栏圈起来，以便显示大致范围","tags":["算法"],"keywords":["算法"],"id":"凸包-地图围栏-二分算法","create":1682416219035,"lastUpdate":1686119361138},"content":{"compiledSource":"/*@jsxRuntime automatic @jsxImportSource react*/\nconst {Fragment: _Fragment, jsx: _jsx, jsxs: _jsxs} = arguments[0];\nconst {useMDXComponents: _provideComponents} = arguments[0];\nfunction _createMdxContent(props) {\n  const _components = Object.assign({\n    h1: \"h1\",\n    p: \"p\",\n    pre: \"pre\",\n    code: \"code\"\n  }, _provideComponents(), props.components);\n  return _jsxs(_Fragment, {\n    children: [_jsx(_components.h1, {\n      children: \"凸包算法-地图围栏\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"公司零售货柜机在地图上的点需要围栏圈起来，以便显示大致范围\"\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsx(_components.code, {\n        className: \"language-js\",\n        children: \"\\n/**\\n *      p2\\n *  p1\u003c\\n *      p3\\n * 叉积判断 p1p2 p1p3\\n * | p2.x-p1.x | p2.y-p1.y |\\n * | p3.x-p1.x | p3.y-p1.y |\\n * @param {{x:number,y:number}} p1 \\n * @param {{x:number,y:number}} p2 \\n * @param {{x:number,y:number}} p3 \\n */\\nfunction crossProduct(p1, p2, p3) {\\n  return (p2.x - p1.x) * (p3.y - p1.y) - (p2.y - p1.y) * (p3.x - p1.x);\\n}\\n\\n/**\\n * \\n * @param {{x:number,y:number}[]} points \\n */\\nfunction getConvexHull(points) {\\n\\n  if (points.length \u003c= 1) { return points; }\\n\\n  //按照x坐标排序 \\n  points.sort((a, b) =\u003e a.x - b.x || a.y - b.y);\\n  let lowerHull = [];\\n  for (let i = 0; i \u003c points.length; i++) {\\n    //构建下凸包\\n\\n    // 遍历凸包数据集判断当前点Pi是否在 H(n-2)H(n-1)的内侧(叉积\u003c0)，如果在内侧就移除H(n-1) \\n    while (\\n      lowerHull.length \u003e= 2 \u0026\u0026 \\n      crossProduct(lowerHull[lowerHull.length - 2], lowerHull[lowerHull.length - 1], points[i]) \u003c= 0\\n    ) {\\n      lowerHull.pop();\\n    }\\n    lowerHull.push(points[i]);\\n  }\\n  let upperHull = [];\\n  for (let i = points.length - 1; i \u003e= 0; i--) {\\n    //构建上凸包\\n    while (\\n      upperHull.length \u003e= 2 \u0026\u0026 \\n      crossProduct(upperHull[upperHull.length - 2], upperHull[upperHull.length - 1], points[i]) \u003c= 0) {\\n      upperHull.pop();\\n    }\\n    upperHull.push(points[i]);\\n  }\\n  //合并上下凸包 \\n  upperHull.pop();\\n  lowerHull.pop();\\n  return lowerHull.concat(upperHull);\\n}\\n\"\n      })\n    })]\n  });\n}\nfunction MDXContent(props = {}) {\n  const {wrapper: MDXLayout} = Object.assign({}, _provideComponents(), props.components);\n  return MDXLayout ? _jsx(MDXLayout, Object.assign({}, props, {\n    children: _jsx(_createMdxContent, props)\n  })) : _createMdxContent(props);\n}\nreturn {\n  default: MDXContent\n};\n","frontmatter":{},"scope":{}}},"__N_SSG":true},"page":"/blog/detail/[id]","query":{"id":"凸包-地图围栏-二分算法"},"buildId":"Hva7HUnK3O36PIkcQPHRk","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>