---
title: React Provider使用
description: React Provider使用
tags:
  - React
  - Provider
keywords:
  - React
  - Provider
id: ReactProvider
create: 1705631674804
lastUpdate: 1705631674804
---

# React Provider使用

###总结
Provider 可以用作拆分代码，不适用于公共组件使用

### 背景
Provider在多层级传递参数有很好的应用,通常我们上下级组件传递参数都会使用props进行参数传递。但是一旦组件嵌套层级过多，从最外层组件向最内层组件传递参数就需要经过组件层层传递

```tsx:demo.tsx
  // 如下代码向内部Component3传递一个topName就需要进过层层传递才能到达最内层组件,
  function Component1(){
    return (
      <>
        <Component2 topName="Component1">
          <Component3></Component3>
        </Component2>
      </>
    )
  }

  function Component2({topName}){
    return (
      <>
          <Component3 topName/>
      </>
    )
  }
  function Component3({topName}){
    return <div>{topName}</div>
  }
```

### Provider

provider则可以避免这种繁琐的代码,可以topName的传递可以完全绕过Component2
```tsx:demo2.tsx
  const CONTEXT = createContext({
    topName:''
  })
  function Component1(){
    return (
      <CONTEXT.Provider value={{
        topName:"Component1"
      }}>
        <Component2>
          <Component3></Component3>
        </Component2>
      </CONTEXT.Provider>
    )
  }

  function Component2(){
    return (
      <>
          <Component3/>
      </>
    )
  }

  function Component3(){
    cont TOP_CONTEXT=useContext(CONTEXT)
    return <div>{TOP_CONTEXT.topName}</div>
  }
```

###问题

这样写虽然可以避免一定量的重复代码，但是也会造成性能问题，最重要的还会造成组件的不可复用性。
如果Component3只是拆分的代码这样写没有多大的问题，如果Component3是一个公共组件，其他页面使用该组件就会导致Component3获取不到CONTEXT。当然也可以用if判断,但是这样就会导致组件的可复用性降低。




