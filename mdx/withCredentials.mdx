---
title: withCredentials
description: withCredentials
tags:
  - xmlhttprequest
keywords:
  - xmlhttprequest
id: withCredentials
create: 1705631674824
lastUpdate: 1705631674824
---

# withCredentials


### 背景
H5接口本地开发环境正常运行，但是上到预发布环境不能收到response响应(有多个系统接口,所以接口统一走了nginx);经过排查之后发现是axios设置了withCredentials，所以来学习一下。


### 什么是withCredentials
XMLHttpRequest.withCredentials 属性是一个布尔值，它指示了`是否该使用`类似 `cookie、Authorization 标头或者 TLS 客户端证书等凭据`进行`跨站点访问控制`（Acess-Control）请求。设置 withCredentials `对同源请求是无效`的。

此外，这个标志还用于`指示何时在响应中忽略 cookie`。默认值是 false。除非在发送 XMLHttpRequest 请求之前，将 withCredentials 设置为 true，否则来自不同域的 XMLHttpRequest 响应无法为自己的域设置 cookie 值。而通过设置 withCredentials 为 true 获得第三方 cookie，仍将遵循同源策略，因此请求的脚本无法通过 document.cookie 或者响应标头访问。

### 小结
简单来说就是:
- 设置withCredentials为true时，当前请求为跨域类型时在请求中协带cookie,同时后端需要设置Access-Control-Allow-Origin(pass:不能设置为*)和Access-Control-Allow-Credentials;

- 设置withCredentials为false时,跨域xmlhttprequest响应无法为自己的域设置 cookie 值
