---
title: 凸包-地图围栏
description: 公司零售货柜机在地图上的点需要围栏圈起来，以便显示大致范围
tags:
  - 算法
keywords:
  - 算法
id: 凸包-地图围栏-二分算法
create: 1682416219035
lastUpdate: 1682416974231
---
# 凸包算法-地图围栏

公司零售货柜机在地图上的点需要围栏圈起来，以便显示大致范围

```js

/**
 *      p2
 *  p1<
 *      p3
 * 叉积判断 p1p2 p1p3
 * | p2.x-p1.x | p2.y-p1.y |
 * | p3.x-p1.x | p3.y-p1.y |
 * @param {{x:number,y:number}} p1 
 * @param {{x:number,y:number}} p2 
 * @param {{x:number,y:number}} p3 
 */
function crossProduct(p1, p2, p3) {
  return (p2.x - p1.x) * (p3.y - p1.y) - (p2.y - p1.y) * (p3.x - p1.x);
}

/**
 * 
 * @param {{x:number,y:number}[]} points 
 */
function getConvexHull(points) {

  if (points.length <= 1) { return points; }

  //按照x坐标排序 
  points.sort((a, b) => a.x - b.x || a.y - b.y);
  let lowerHull = [];
  for (let i = 0; i < points.length; i++) {
    //构建下凸包

    // 遍历凸包数据集判断当前点Pi是否在 H(n-2)H(n-1)的内侧(叉积<0)，如果在内侧就移除H(n-1) 
    while (
      lowerHull.length >= 2 && 
      crossProduct(lowerHull[lowerHull.length - 2], lowerHull[lowerHull.length - 1], points[i]) <= 0
    ) {
      lowerHull.pop();
    }
    lowerHull.push(points[i]);
  }
  let upperHull = [];
  for (let i = points.length - 1; i >= 0; i--) {
    //构建上凸包
    while (
      upperHull.length >= 2 && 
      crossProduct(upperHull[upperHull.length - 2], upperHull[upperHull.length - 1], points[i]) <= 0) {
      upperHull.pop();
    }
    upperHull.push(points[i]);
  }
  //合并上下凸包 
  upperHull.pop();
  lowerHull.pop();
  return lowerHull.concat(upperHull);
}
```
