---
title: 算法-接雨水
description: 算法-接雨水
tags:
  - 算法
keywords:
  - 算法
id: 接雨水
create: 1705631674842
lastUpdate: 1705631674842
---

# 接雨水

给定 n 个非负整数表示每个宽度为 1 的柱子的高度图，计算按此排列的柱子，下雨之后能接多少雨水。

输入：height = [0,1,0,2,1,0,1,3,2,1,2,1]

输出：6

解释：上面是由数组 [0,1,0,2,1,0,1,3,2,1,2,1] 表示的高度图，在这种情况下，可以接 6 个单位的雨水（蓝色部分表示雨水）。 

找到最高点,从最高点左右向最高点靠近并维护一个当前最大值，比当前最大值小的都可以装水
```js:接雨水
/**
 * @param {number[]} height
 * @return {number}
 */
var trap = function (height) {
    const maxValue = Math.max(...height);
    const maxValueIndex = height.findIndex(item => item == maxValue);
    let count = 0;

    let currentMax = height[0];
    for (let i = 0; i < maxValueIndex; i++) {
        const current = height[i];
        if (height[i] > currentMax) {
            currentMax = height[i];
        } else {
            count += (currentMax - height[i])
        }
    }

    const lastIndex = height.length - 1;
    currentMax = height[lastIndex];
    for (let i = lastIndex; i >= maxValueIndex; i--) {
        const current = height[i];
        if (height[i] > currentMax) {
            currentMax = height[i];
        } else {
            count += (currentMax - height[i])
        }
    }

    return count
};
```
