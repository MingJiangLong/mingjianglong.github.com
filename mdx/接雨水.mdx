---
title: 算法-接雨水
description: 算法-接雨水
tags:
  - 算法
keywords:
  - 算法
---

# 接雨水

给定 n 个非负整数表示每个宽度为 1 的柱子的高度图，计算按此排列的柱子，下雨之后能接多少雨水。

输入：height = [0,1,0,2,1,0,1,3,2,1,2,1]

输出：6

解释：上面是由数组 [0,1,0,2,1,0,1,3,2,1,2,1] 表示的高度图，在这种情况下，可以接 6 个单位的雨水（蓝色部分表示雨水）。 

要接住雨水得是`先递减然后再递增的一个区间`

```js:接雨水

/**
 * @param {number[]} height
 * @return {number}
 */
var trap = function (height) {
  let value = Math.max(...height);

  // 总体积
  let size = value * height.length;

  // 减掉柱子体积
  size = height.reduce((count, current) => {
    return count -= current
  }, size)

  // 最大值下标
  let maxIndex = height.findIndex(item => item == value)

  // 减掉空白体积
  let currentMax = height[0];
  for (let i = 0; i <= maxIndex; i++) {
    if (height[i] >= currentMax) {
      currentMax = height[i]
    }
    size -= (value - currentMax)
  }
  currentMax = height[height.length - 1]
  for (let i = height.length - 1; i > maxIndex; i--) {
    if (height[i] >= currentMax) {
      currentMax = height[i]
    }
    size -= (value - currentMax)
  }
  return size

};
```